{
  "address": "0x68E41C8B5EbC787035697F29ceeAA758085d9723",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "target",
          "type": "address"
        }
      ],
      "name": "AddressEmptyCode",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "AddressInsufficientBalance",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "implementation",
          "type": "address"
        }
      ],
      "name": "ERC1967InvalidImplementation",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ERC1967NonPayable",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "FailedInnerCall",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidInitialization",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotInitializing",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "OwnableInvalidOwner",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "OwnableUnauthorizedAccount",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuardReentrantCall",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        }
      ],
      "name": "SafeERC20FailedOperation",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "expected",
          "type": "address"
        }
      ],
      "name": "StabilityPool__ActivePoolOnly",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "expected",
          "type": "address"
        }
      ],
      "name": "StabilityPool__AdminContractOnly",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "StabilityPool__ArrayNotInAscendingOrder",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "expected",
          "type": "address"
        }
      ],
      "name": "StabilityPool__TrenBoxManagerOnly",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "UUPSUnauthorizedCallContext",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "slot",
          "type": "bytes32"
        }
      ],
      "name": "UUPSUnsupportedProxiableUUID",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "AssetSent",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "newAddress",
          "type": "address"
        }
      ],
      "name": "CommunityIssuanceAddressChanged",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_P",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_G",
          "type": "uint256"
        }
      ],
      "name": "DepositSnapshotUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "_currentEpoch",
          "type": "uint128"
        }
      ],
      "name": "EpochUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_G",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "_epoch",
          "type": "uint128"
        },
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "_scale",
          "type": "uint128"
        }
      ],
      "name": "G_Updated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address[]",
          "name": "_collaterals",
          "type": "address[]"
        },
        {
          "indexed": false,
          "internalType": "uint256[]",
          "name": "_amounts",
          "type": "uint256[]"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_debtTokenLoss",
          "type": "uint256"
        }
      ],
      "name": "GainsWithdrawn",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "version",
          "type": "uint64"
        }
      ],
      "name": "Initialized",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_P",
          "type": "uint256"
        }
      ],
      "name": "P_Updated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_S",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "_epoch",
          "type": "uint128"
        },
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "_scale",
          "type": "uint128"
        }
      ],
      "name": "S_Updated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "_currentScale",
          "type": "uint128"
        }
      ],
      "name": "ScaleUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_newBalance",
          "type": "uint256"
        }
      ],
      "name": "StabilityPoolAssetBalanceUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_newBalance",
          "type": "uint256"
        }
      ],
      "name": "StabilityPoolDebtTokenBalanceUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_newSystemStake",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        }
      ],
      "name": "StakeChanged",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_P",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_G",
          "type": "uint256"
        }
      ],
      "name": "SystemSnapshotUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_TREN",
          "type": "uint256"
        }
      ],
      "name": "TRENPaidToDepositor",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "implementation",
          "type": "address"
        }
      ],
      "name": "Upgraded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "_newDeposit",
          "type": "uint256"
        }
      ],
      "name": "UserDepositChanged",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "DECIMAL_PRECISION",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "NAME",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "P",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        }
      ],
      "name": "S",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "SCALE_FACTOR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "UPGRADE_INTERFACE_VERSION",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "activePool",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_collateral",
          "type": "address"
        }
      ],
      "name": "addCollateralType",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "adminContract",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newImplementation",
          "type": "address"
        }
      ],
      "name": "authorizeUpgrade",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "borrowerOperations",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "collSurplusPool",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "communityIssuance",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "currentEpoch",
      "outputs": [
        {
          "internalType": "uint128",
          "name": "",
          "type": "uint128"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "currentScale",
      "outputs": [
        {
          "internalType": "uint128",
          "name": "",
          "type": "uint128"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "debtToken",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "defaultPool",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "depositSnapshots",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "P",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "G",
          "type": "uint256"
        },
        {
          "internalType": "uint128",
          "name": "scale",
          "type": "uint128"
        },
        {
          "internalType": "uint128",
          "name": "epoch",
          "type": "uint128"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "deposits",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint128",
          "name": "",
          "type": "uint128"
        },
        {
          "internalType": "uint128",
          "name": "",
          "type": "uint128"
        }
      ],
      "name": "epochToScaleToG",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint128",
          "name": "",
          "type": "uint128"
        },
        {
          "internalType": "uint128",
          "name": "",
          "type": "uint128"
        }
      ],
      "name": "epochToScaleToSum",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "feeCollector",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "gasPoolAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getAllCollateral",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_collateral",
          "type": "address"
        }
      ],
      "name": "getCollateral",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        }
      ],
      "name": "getCompoundedDebtTokenDeposits",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "_assets",
          "type": "address[]"
        }
      ],
      "name": "getDepositorGains",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_depositor",
          "type": "address"
        }
      ],
      "name": "getDepositorTRENGain",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        }
      ],
      "name": "getEntireSystemColl",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "entireSystemColl",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        }
      ],
      "name": "getEntireSystemDebt",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "entireSystemDebt",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getTotalDebtTokenDeposits",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "initialize",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "isAddressSetupInitialized",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "lastAssetError_Offset",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "lastDebtTokenLossError_Offset",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "lastTRENError",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_debtToOffset",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amountAdded",
          "type": "uint256"
        }
      ],
      "name": "offset",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "priceFeed",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "address[]",
          "name": "_assets",
          "type": "address[]"
        }
      ],
      "name": "provideToSP",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "proxiableUUID",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_asset",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "receivedERC20",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "_addresses",
          "type": "address[]"
        }
      ],
      "name": "setAddresses",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_communityIssuance",
          "type": "address"
        }
      ],
      "name": "setCommunityIssuance",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_trenStaking",
          "type": "address"
        }
      ],
      "name": "setTRENStaking",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "sortedTrenBoxes",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "stabilityPool",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "timelockAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "treasuryAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "trenBoxManager",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "trenBoxManagerOperations",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "trenStaking",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newImplementation",
          "type": "address"
        },
        {
          "internalType": "bytes",
          "name": "data",
          "type": "bytes"
        }
      ],
      "name": "upgradeToAndCall",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "address[]",
          "name": "_assets",
          "type": "address[]"
        }
      ],
      "name": "withdrawFromSP",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x0e6cc0533032271c52f71ad0c1fddb699dcad9399380d62f1d38f87a64b171dd",
  "receipt": {
    "to": null,
    "from": "0x19E733F20aAdaB8996f7895ACBD04f746BF4Aac1",
    "contractAddress": "0x68E41C8B5EbC787035697F29ceeAA758085d9723",
    "transactionIndex": 90,
    "gasUsed": "3573275",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x37c9f777b75a4d20cacdb412499ebded4d9374aab8784c3f083e992ce88a2971",
    "transactionHash": "0x0e6cc0533032271c52f71ad0c1fddb699dcad9399380d62f1d38f87a64b171dd",
    "logs": [],
    "blockNumber": 5625507,
    "cumulativeGasUsed": "15697103",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "e6971fb87a17deef3641f1719687e39f",
  "metadata": "{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"AddressEmptyCode\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"AddressInsufficientBalance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"ERC1967InvalidImplementation\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ERC1967NonPayable\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FailedInnerCall\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidInitialization\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotInitializing\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"OwnableInvalidOwner\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"OwnableUnauthorizedAccount\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ReentrancyGuardReentrantCall\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"SafeERC20FailedOperation\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"expected\",\"type\":\"address\"}],\"name\":\"StabilityPool__ActivePoolOnly\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"expected\",\"type\":\"address\"}],\"name\":\"StabilityPool__AdminContractOnly\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"StabilityPool__ArrayNotInAscendingOrder\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"expected\",\"type\":\"address\"}],\"name\":\"StabilityPool__TrenBoxManagerOnly\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"UUPSUnauthorizedCallContext\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"slot\",\"type\":\"bytes32\"}],\"name\":\"UUPSUnsupportedProxiableUUID\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"AssetSent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"newAddress\",\"type\":\"address\"}],\"name\":\"CommunityIssuanceAddressChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_P\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_G\",\"type\":\"uint256\"}],\"name\":\"DepositSnapshotUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"_currentEpoch\",\"type\":\"uint128\"}],\"name\":\"EpochUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_G\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"_epoch\",\"type\":\"uint128\"},{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"_scale\",\"type\":\"uint128\"}],\"name\":\"G_Updated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address[]\",\"name\":\"_collaterals\",\"type\":\"address[]\"},{\"indexed\":false,\"internalType\":\"uint256[]\",\"name\":\"_amounts\",\"type\":\"uint256[]\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_debtTokenLoss\",\"type\":\"uint256\"}],\"name\":\"GainsWithdrawn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"version\",\"type\":\"uint64\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_P\",\"type\":\"uint256\"}],\"name\":\"P_Updated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_S\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"_epoch\",\"type\":\"uint128\"},{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"_scale\",\"type\":\"uint128\"}],\"name\":\"S_Updated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"_currentScale\",\"type\":\"uint128\"}],\"name\":\"ScaleUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_newBalance\",\"type\":\"uint256\"}],\"name\":\"StabilityPoolAssetBalanceUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_newBalance\",\"type\":\"uint256\"}],\"name\":\"StabilityPoolDebtTokenBalanceUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_newSystemStake\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"}],\"name\":\"StakeChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_P\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_G\",\"type\":\"uint256\"}],\"name\":\"SystemSnapshotUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_TREN\",\"type\":\"uint256\"}],\"name\":\"TRENPaidToDepositor\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"Upgraded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_newDeposit\",\"type\":\"uint256\"}],\"name\":\"UserDepositChanged\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"DECIMAL_PRECISION\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"NAME\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"P\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"}],\"name\":\"S\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SCALE_FACTOR\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"UPGRADE_INTERFACE_VERSION\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"activePool\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_collateral\",\"type\":\"address\"}],\"name\":\"addCollateralType\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"adminContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newImplementation\",\"type\":\"address\"}],\"name\":\"authorizeUpgrade\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"borrowerOperations\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"collSurplusPool\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"communityIssuance\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"currentEpoch\",\"outputs\":[{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"currentScale\",\"outputs\":[{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"debtToken\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"defaultPool\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"depositSnapshots\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"P\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"G\",\"type\":\"uint256\"},{\"internalType\":\"uint128\",\"name\":\"scale\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"epoch\",\"type\":\"uint128\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"deposits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"name\":\"epochToScaleToG\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"name\":\"epochToScaleToSum\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feeCollector\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gasPoolAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getAllCollateral\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_collateral\",\"type\":\"address\"}],\"name\":\"getCollateral\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"}],\"name\":\"getCompoundedDebtTokenDeposits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"_assets\",\"type\":\"address[]\"}],\"name\":\"getDepositorGains\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_depositor\",\"type\":\"address\"}],\"name\":\"getDepositorTRENGain\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"}],\"name\":\"getEntireSystemColl\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"entireSystemColl\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"}],\"name\":\"getEntireSystemDebt\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"entireSystemDebt\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getTotalDebtTokenDeposits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"isAddressSetupInitialized\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"lastAssetError_Offset\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lastDebtTokenLossError_Offset\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lastTRENError\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_debtToOffset\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amountAdded\",\"type\":\"uint256\"}],\"name\":\"offset\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"priceFeed\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"_assets\",\"type\":\"address[]\"}],\"name\":\"provideToSP\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"proxiableUUID\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_asset\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"receivedERC20\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_addresses\",\"type\":\"address[]\"}],\"name\":\"setAddresses\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_communityIssuance\",\"type\":\"address\"}],\"name\":\"setCommunityIssuance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_trenStaking\",\"type\":\"address\"}],\"name\":\"setTRENStaking\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"sortedTrenBoxes\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilityPool\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"timelockAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"treasuryAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"trenBoxManager\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"trenBoxManagerOperations\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"trenStaking\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newImplementation\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"upgradeToAndCall\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"_assets\",\"type\":\"address[]\"}],\"name\":\"withdrawFromSP\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"When a trenBox is liquidated, then depending on system conditions, some of its debt tokens debt gets offset with debt tokens in the Stability Pool: that is, the offset debt evaporates, and an equal amount of debt tokens tokens in the Stability Pool is burned. Thus, a liquidation causes each depositor to receive a debt tokens loss, in proportion to their deposit as a share of total deposits. They also receive an Collateral gain, as the amount of collateral of the liquidated trenBox is distributed among Stability depositors, in the same proportion. When a liquidation occurs, it depletes every deposit by the same fraction: for example, a liquidation that depletes 40% of the total debt tokens in the Stability Pool, depletes 40% of each deposit. A deposit that has experienced a series of liquidations is termed a \\\"compounded deposit\\\": each liquidation depletes the deposit, multiplying it by some factor in range ]0,1[ --- IMPLEMENTATION --- We use a highly scalable method of tracking deposits and Collateral gains that has O(1) complexity. When a liquidation occurs, rather than updating each depositor's deposit and Collateral gain, we simply update two state variables: a product P, and a sum S. These are kept track for each type of collateral. A mathematical manipulation allows us to factor out the initial deposit, and accurately track all depositors' compounded deposits and accumulated Collateral amount gains over time, as liquidations occur, using just these two variables P and S. When depositors join the Stability Pool, they get a snapshot of the latest P and S: P_t and S_t, respectively. The formula for a depositor's accumulated Collateral amount gain is derived here: https://github.com/liquity/dev/blob/main/papers/Scalable_Reward_Distribution_with_Compounding_Stakes.pdf For a given deposit d_t, the ratio P/P_t tells us the factor by which a deposit has decreased since it joined the Stability Pool, and the term d_t * (S - S_t)/P_t gives us the deposit's total accumulated Collateral amount gain. Each liquidation updates the product P and sum S. After a series of liquidations, a compounded deposit and corresponding Collateral amount gain can be calculated using the initial deposit, the depositor\\u2019s snapshots of P and S, and the latest values of P and S. Any time a depositor updates their deposit (withdrawal, top-up) their accumulated Collateral amount gain is paid out, their new deposit is recorded (based on their latest compounded deposit and modified by the withdrawal/top-up), and they receive new snapshots of the latest P and S. Essentially, they make a fresh deposit that overwrites the old one. --- SCALE FACTOR --- Since P is a running product in range ]0,1] that is always-decreasing, it should never reach 0 when multiplied by a number in range ]0,1[. Unfortunately, Solidity floor division always reaches 0, sooner or later. A series of liquidations that nearly empty the Pool (and thus each multiply P by a very small number in range ]0,1[ ) may push P to its 18 digit decimal limit, and round it to 0, when in fact the Pool hasn't been emptied: this would break deposit tracking. So, to track P accurately, we use a scale factor: if a liquidation would cause P to decrease to <1e-9 (and be rounded to 0 by Solidity), we first multiply P by 1e9, and increment a currentScale factor by 1. The added benefit of using 1e9 for the scale factor (rather than 1e18) is that it ensures negligible precision loss close to the scale boundary: when P is at its minimum value of 1e9, the relative precision loss in P due to floor division is only on the order of 1e-9. --- EPOCHS --- Whenever a liquidation fully empties the Stability Pool, all deposits should become 0. However, setting P to 0 would make P be 0 forever, and break all future reward calculations. So, every time the Stability Pool is emptied by a liquidation, we reset P = 1 and currentScale = 0, and increment the currentEpoch by 1. --- TRACKING DEPOSIT OVER SCALE CHANGES AND EPOCHS --- When a deposit is made, it gets snapshots of the currentEpoch and the currentScale. When calculating a compounded deposit, we compare the current epoch to the deposit's epoch snapshot. If the current epoch is newer, then the deposit was present during a pool-emptying liquidation, and necessarily has been depleted to 0. Otherwise, we then compare the current scale to the deposit's scale snapshot. If they're equal, the compounded deposit is given by d_t * P/P_t. If it spans one scale change, it is given by d_t * P/(P_t * 1e9). If it spans more than one scale change, we define the compounded deposit as 0, since it is now less than 1e-9'th of its initial value (e.g. a deposit of 1 billion debt tokens has depleted to < 1 debt token).  --- TRACKING DEPOSITOR'S COLLATERAL AMOUNT GAIN OVER SCALE CHANGES AND EPOCHS --- In the current epoch, the latest value of S is stored upon each scale change, and the mapping (scale -> S) is stored for each epoch. This allows us to calculate a deposit's accumulated Collateral amount gain, during the epoch in which the deposit was non-zero and earned Collateral amount. We calculate the depositor's accumulated Collateral amount gain for the scale at which they made the deposit, using the Collateral amount gain formula: e_1 = d_t * (S - S_t) / P_t and also for scale after, taking care to divide the latter by a factor of 1e9: e_2 = d_t * S / (P_t * 1e9) The gain in the second scale will be full, as the starting point was in the previous scale, thus no need to subtract anything. The deposit therefore was present for reward events from the beginning of that second scale.        S_i-S_t + S_{i+1}      .<--------.------------>      .         .      . S_i     .   S_{i+1}   <--.-------->.<----------->   S_t.         .   <->.         .      t         .  |---+---------|-------------|-----...         i            i+1 The sum of (e_1 + e_2) captures the depositor's total accumulated Collateral amount gain, handling the case where their deposit spanned one scale change. We only care about gains across one scale change, since the compounded deposit is defined as being 0 once it has spanned more than one scale change. --- UPDATING P WHEN A LIQUIDATION OCCURS --- Please see the implementation spec in the proof document, which closely follows on from the compounded deposit / Collateral amount gain derivations: https://github.com/liquity/liquity/blob/master/papers/Scalable_Reward_Distribution_with_Compounding_Stakes.pdf --- Gravita ISSUANCE TO STABILITY POOL DEPOSITORS --- An Gravita issuance event occurs at every deposit operation, and every liquidation. All deposits earn a share of the issued Gravita in proportion to the deposit as a share of total deposits. Please see the system Readme for an overview: https://github.com/liquity/dev/blob/main/README.md#lqty-issuance-to-stability-providers We use the same mathematical product-sum approach to track Gravita gains for depositors, where 'G' is the sum corresponding to Gravita gains. The product P (and snapshot P_t) is re-used, as the ratio P/P_t tracks a deposit's depletion due to liquidations.\",\"errors\":{\"AddressEmptyCode(address)\":[{\"details\":\"There's no code at `target` (it is not a contract).\"}],\"AddressInsufficientBalance(address)\":[{\"details\":\"The ETH balance of the account is not enough to perform the operation.\"}],\"ERC1967InvalidImplementation(address)\":[{\"details\":\"The `implementation` of the proxy is invalid.\"}],\"ERC1967NonPayable()\":[{\"details\":\"An upgrade function sees `msg.value > 0` that may be lost.\"}],\"FailedInnerCall()\":[{\"details\":\"A call to an address target failed. The target may have reverted.\"}],\"InvalidInitialization()\":[{\"details\":\"The contract is already initialized.\"}],\"NotInitializing()\":[{\"details\":\"The contract is not initializing.\"}],\"OwnableInvalidOwner(address)\":[{\"details\":\"The owner is not a valid owner account. (eg. `address(0)`)\"}],\"OwnableUnauthorizedAccount(address)\":[{\"details\":\"The caller account is not authorized to perform an operation.\"}],\"ReentrancyGuardReentrantCall()\":[{\"details\":\"Unauthorized reentrant call.\"}],\"SafeERC20FailedOperation(address)\":[{\"details\":\"An operation with an ERC20 token failed.\"}],\"UUPSUnauthorizedCallContext()\":[{\"details\":\"The call is from an unauthorized context.\"}],\"UUPSUnsupportedProxiableUUID(bytes32)\":[{\"details\":\"The storage `slot` is unsupported as a UUID.\"}]},\"events\":{\"Initialized(uint64)\":{\"details\":\"Triggered when the contract has been initialized or reinitialized.\"},\"Upgraded(address)\":{\"details\":\"Emitted when the implementation is upgraded.\"}},\"kind\":\"dev\",\"methods\":{\"addCollateralType(address)\":{\"details\":\"should be called anytime a collateral is added to controller keeps all arrays the correct length\",\"params\":{\"_collateral\":\"address of collateral to add\"}},\"getAllCollateral()\":{\"details\":\"gets collateral from totalColl This is not necessarily the contract's actual collateral balance; just what is stored in state\",\"returns\":{\"_0\":\"tokens and amounts\"}},\"getCollateral(address)\":{\"details\":\"Not necessarily this contract's actual collateral balance; just what is stored in state\",\"params\":{\"_collateral\":\"address of the collateral to get amount of\"},\"returns\":{\"_0\":\"amount of this specific collateral\"}},\"getDepositorGains(address,address[])\":{\"details\":\"Given by the formula:  E = d0 * (S - S(0))/P(0) where S(0) and P(0) are the depositor's snapshots of the sum S and product P, respectively. d0 is the last recorded deposit value.\",\"params\":{\"_assets\":\"array of assets to check gains for\",\"_depositor\":\"address of depositor in question\"},\"returns\":{\"_0\":\"assets, amounts\"}},\"getTotalDebtTokenDeposits()\":{\"details\":\"gets total debtToken from deposits\",\"returns\":{\"_0\":\"totalDebtTokenDeposits\"}},\"offset(uint256,address,uint256)\":{\"details\":\"Cancels out the specified debt against the debtTokens contained in the Stability Pool (as far as possible) and transfers the TrenBox's collateral from ActivePool to StabilityPool. Only called by liquidation functions in the TrenBoxManager.\",\"params\":{\"_amountAdded\":\"token amount as uint256\",\"_asset\":\"token address\",\"_debtToOffset\":\"how much debt to offset\"}},\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"provideToSP(uint256,address[])\":{\"details\":\"Triggers a TREN issuance, based on time passed since the last issuance. The TREN issuance is shared between *all* depositors - Sends depositor's accumulated gains (TREN, collateral assets) to depositor - Increases deposit stake, and takes new snapshots for each.\",\"params\":{\"_amount\":\"amount of debtToken provided\",\"_assets\":\"an array of collaterals to be claimed. Skipping a collateral forfeits the available rewards (can be useful for gas optimizations)\"}},\"proxiableUUID()\":{\"details\":\"Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the implementation. It is used to validate the implementation's compatibility when performing an upgrade. IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier.\"},\"renounceOwnership()\":{\"details\":\"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.\"},\"transferOwnership(address)\":{\"details\":\"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.\"},\"upgradeToAndCall(address,bytes)\":{\"custom:oz-upgrades-unsafe-allow-reachable\":\"delegatecall\",\"details\":\"Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call encoded in `data`. Calls {_authorizeUpgrade}. Emits an {Upgraded} event.\"},\"withdrawFromSP(uint256,address[])\":{\"params\":{\"_amount\":\"amount of debtToken to withdraw\",\"_assets\":\"an array of collaterals to be claimed.\"}}},\"title\":\"The Stability Pool holds debt tokens deposited by Stability Pool depositors.\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"addCollateralType(address)\":{\"notice\":\"add a collateral\"},\"getAllCollateral()\":{\"notice\":\"getter function\"},\"getCollateral(address)\":{\"notice\":\"get collateral balance in the SP for a given collateral type\"},\"getDepositorGains(address,address[])\":{\"notice\":\"Calculates the gains earned by the deposit since its last snapshots were taken for selected assets.\"},\"getTotalDebtTokenDeposits()\":{\"notice\":\"getter function\"},\"offset(uint256,address,uint256)\":{\"notice\":\"sets the offset for liquidation\"},\"provideToSP(uint256,address[])\":{\"notice\":\"Used to provide debt tokens to the stability Pool\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/StabilityPool.sol\":\"StabilityPool\"},\"evmVersion\":\"paris\",\"libraries\":{\":__CACHE_BREAKER__\":\"0x00000000d41867734bbee4c6863d9255b2b06ac1\"},\"metadata\":{\"bytecodeHash\":\"none\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (access/Ownable.sol)\\n\\npragma solidity ^0.8.20;\\n\\nimport {ContextUpgradeable} from \\\"../utils/ContextUpgradeable.sol\\\";\\nimport {Initializable} from \\\"../proxy/utils/Initializable.sol\\\";\\n\\n/**\\n * @dev Contract module which provides a basic access control mechanism, where\\n * there is an account (an owner) that can be granted exclusive access to\\n * specific functions.\\n *\\n * The initial owner is set to the address provided by the deployer. This can\\n * later be changed with {transferOwnership}.\\n *\\n * This module is used through inheritance. It will make available the modifier\\n * `onlyOwner`, which can be applied to your functions to restrict their use to\\n * the owner.\\n */\\nabstract contract OwnableUpgradeable is Initializable, ContextUpgradeable {\\n    /// @custom:storage-location erc7201:openzeppelin.storage.Ownable\\n    struct OwnableStorage {\\n        address _owner;\\n    }\\n\\n    // keccak256(abi.encode(uint256(keccak256(\\\"openzeppelin.storage.Ownable\\\")) - 1)) & ~bytes32(uint256(0xff))\\n    bytes32 private constant OwnableStorageLocation = 0x9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300;\\n\\n    function _getOwnableStorage() private pure returns (OwnableStorage storage $) {\\n        assembly {\\n            $.slot := OwnableStorageLocation\\n        }\\n    }\\n\\n    /**\\n     * @dev The caller account is not authorized to perform an operation.\\n     */\\n    error OwnableUnauthorizedAccount(address account);\\n\\n    /**\\n     * @dev The owner is not a valid owner account. (eg. `address(0)`)\\n     */\\n    error OwnableInvalidOwner(address owner);\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    /**\\n     * @dev Initializes the contract setting the address provided by the deployer as the initial owner.\\n     */\\n    function __Ownable_init(address initialOwner) internal onlyInitializing {\\n        __Ownable_init_unchained(initialOwner);\\n    }\\n\\n    function __Ownable_init_unchained(address initialOwner) internal onlyInitializing {\\n        if (initialOwner == address(0)) {\\n            revert OwnableInvalidOwner(address(0));\\n        }\\n        _transferOwnership(initialOwner);\\n    }\\n\\n    /**\\n     * @dev Throws if called by any account other than the owner.\\n     */\\n    modifier onlyOwner() {\\n        _checkOwner();\\n        _;\\n    }\\n\\n    /**\\n     * @dev Returns the address of the current owner.\\n     */\\n    function owner() public view virtual returns (address) {\\n        OwnableStorage storage $ = _getOwnableStorage();\\n        return $._owner;\\n    }\\n\\n    /**\\n     * @dev Throws if the sender is not the owner.\\n     */\\n    function _checkOwner() internal view virtual {\\n        if (owner() != _msgSender()) {\\n            revert OwnableUnauthorizedAccount(_msgSender());\\n        }\\n    }\\n\\n    /**\\n     * @dev Leaves the contract without owner. It will not be possible to call\\n     * `onlyOwner` functions. Can only be called by the current owner.\\n     *\\n     * NOTE: Renouncing ownership will leave the contract without an owner,\\n     * thereby disabling any functionality that is only available to the owner.\\n     */\\n    function renounceOwnership() public virtual onlyOwner {\\n        _transferOwnership(address(0));\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Can only be called by the current owner.\\n     */\\n    function transferOwnership(address newOwner) public virtual onlyOwner {\\n        if (newOwner == address(0)) {\\n            revert OwnableInvalidOwner(address(0));\\n        }\\n        _transferOwnership(newOwner);\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Internal function without access restriction.\\n     */\\n    function _transferOwnership(address newOwner) internal virtual {\\n        OwnableStorage storage $ = _getOwnableStorage();\\n        address oldOwner = $._owner;\\n        $._owner = newOwner;\\n        emit OwnershipTransferred(oldOwner, newOwner);\\n    }\\n}\\n\",\"keccak256\":\"0xc163fcf9bb10138631a9ba5564df1fa25db9adff73bd9ee868a8ae1858fe093a\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (proxy/utils/Initializable.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\\n * behind a proxy. Since proxied contracts do not make use of a constructor, it's common to move constructor logic to an\\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\\n *\\n * The initialization functions use a version number. Once a version number is used, it is consumed and cannot be\\n * reused. This mechanism prevents re-execution of each \\\"step\\\" but allows the creation of new initialization steps in\\n * case an upgrade adds a module that needs to be initialized.\\n *\\n * For example:\\n *\\n * [.hljs-theme-light.nopadding]\\n * ```solidity\\n * contract MyToken is ERC20Upgradeable {\\n *     function initialize() initializer public {\\n *         __ERC20_init(\\\"MyToken\\\", \\\"MTK\\\");\\n *     }\\n * }\\n *\\n * contract MyTokenV2 is MyToken, ERC20PermitUpgradeable {\\n *     function initializeV2() reinitializer(2) public {\\n *         __ERC20Permit_init(\\\"MyToken\\\");\\n *     }\\n * }\\n * ```\\n *\\n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\\n * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.\\n *\\n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\\n *\\n * [CAUTION]\\n * ====\\n * Avoid leaving a contract uninitialized.\\n *\\n * An uninitialized contract can be taken over by an attacker. This applies to both a proxy and its implementation\\n * contract, which may impact the proxy. To prevent the implementation contract from being used, you should invoke\\n * the {_disableInitializers} function in the constructor to automatically lock it when it is deployed:\\n *\\n * [.hljs-theme-light.nopadding]\\n * ```\\n * /// @custom:oz-upgrades-unsafe-allow constructor\\n * constructor() {\\n *     _disableInitializers();\\n * }\\n * ```\\n * ====\\n */\\nabstract contract Initializable {\\n    /**\\n     * @dev Storage of the initializable contract.\\n     *\\n     * It's implemented on a custom ERC-7201 namespace to reduce the risk of storage collisions\\n     * when using with upgradeable contracts.\\n     *\\n     * @custom:storage-location erc7201:openzeppelin.storage.Initializable\\n     */\\n    struct InitializableStorage {\\n        /**\\n         * @dev Indicates that the contract has been initialized.\\n         */\\n        uint64 _initialized;\\n        /**\\n         * @dev Indicates that the contract is in the process of being initialized.\\n         */\\n        bool _initializing;\\n    }\\n\\n    // keccak256(abi.encode(uint256(keccak256(\\\"openzeppelin.storage.Initializable\\\")) - 1)) & ~bytes32(uint256(0xff))\\n    bytes32 private constant INITIALIZABLE_STORAGE = 0xf0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00;\\n\\n    /**\\n     * @dev The contract is already initialized.\\n     */\\n    error InvalidInitialization();\\n\\n    /**\\n     * @dev The contract is not initializing.\\n     */\\n    error NotInitializing();\\n\\n    /**\\n     * @dev Triggered when the contract has been initialized or reinitialized.\\n     */\\n    event Initialized(uint64 version);\\n\\n    /**\\n     * @dev A modifier that defines a protected initializer function that can be invoked at most once. In its scope,\\n     * `onlyInitializing` functions can be used to initialize parent contracts.\\n     *\\n     * Similar to `reinitializer(1)`, except that in the context of a constructor an `initializer` may be invoked any\\n     * number of times. This behavior in the constructor can be useful during testing and is not expected to be used in\\n     * production.\\n     *\\n     * Emits an {Initialized} event.\\n     */\\n    modifier initializer() {\\n        // solhint-disable-next-line var-name-mixedcase\\n        InitializableStorage storage $ = _getInitializableStorage();\\n\\n        // Cache values to avoid duplicated sloads\\n        bool isTopLevelCall = !$._initializing;\\n        uint64 initialized = $._initialized;\\n\\n        // Allowed calls:\\n        // - initialSetup: the contract is not in the initializing state and no previous version was\\n        //                 initialized\\n        // - construction: the contract is initialized at version 1 (no reininitialization) and the\\n        //                 current contract is just being deployed\\n        bool initialSetup = initialized == 0 && isTopLevelCall;\\n        bool construction = initialized == 1 && address(this).code.length == 0;\\n\\n        if (!initialSetup && !construction) {\\n            revert InvalidInitialization();\\n        }\\n        $._initialized = 1;\\n        if (isTopLevelCall) {\\n            $._initializing = true;\\n        }\\n        _;\\n        if (isTopLevelCall) {\\n            $._initializing = false;\\n            emit Initialized(1);\\n        }\\n    }\\n\\n    /**\\n     * @dev A modifier that defines a protected reinitializer function that can be invoked at most once, and only if the\\n     * contract hasn't been initialized to a greater version before. In its scope, `onlyInitializing` functions can be\\n     * used to initialize parent contracts.\\n     *\\n     * A reinitializer may be used after the original initialization step. This is essential to configure modules that\\n     * are added through upgrades and that require initialization.\\n     *\\n     * When `version` is 1, this modifier is similar to `initializer`, except that functions marked with `reinitializer`\\n     * cannot be nested. If one is invoked in the context of another, execution will revert.\\n     *\\n     * Note that versions can jump in increments greater than 1; this implies that if multiple reinitializers coexist in\\n     * a contract, executing them in the right order is up to the developer or operator.\\n     *\\n     * WARNING: Setting the version to 2**64 - 1 will prevent any future reinitialization.\\n     *\\n     * Emits an {Initialized} event.\\n     */\\n    modifier reinitializer(uint64 version) {\\n        // solhint-disable-next-line var-name-mixedcase\\n        InitializableStorage storage $ = _getInitializableStorage();\\n\\n        if ($._initializing || $._initialized >= version) {\\n            revert InvalidInitialization();\\n        }\\n        $._initialized = version;\\n        $._initializing = true;\\n        _;\\n        $._initializing = false;\\n        emit Initialized(version);\\n    }\\n\\n    /**\\n     * @dev Modifier to protect an initialization function so that it can only be invoked by functions with the\\n     * {initializer} and {reinitializer} modifiers, directly or indirectly.\\n     */\\n    modifier onlyInitializing() {\\n        _checkInitializing();\\n        _;\\n    }\\n\\n    /**\\n     * @dev Reverts if the contract is not in an initializing state. See {onlyInitializing}.\\n     */\\n    function _checkInitializing() internal view virtual {\\n        if (!_isInitializing()) {\\n            revert NotInitializing();\\n        }\\n    }\\n\\n    /**\\n     * @dev Locks the contract, preventing any future reinitialization. This cannot be part of an initializer call.\\n     * Calling this in the constructor of a contract will prevent that contract from being initialized or reinitialized\\n     * to any version. It is recommended to use this to lock implementation contracts that are designed to be called\\n     * through proxies.\\n     *\\n     * Emits an {Initialized} event the first time it is successfully executed.\\n     */\\n    function _disableInitializers() internal virtual {\\n        // solhint-disable-next-line var-name-mixedcase\\n        InitializableStorage storage $ = _getInitializableStorage();\\n\\n        if ($._initializing) {\\n            revert InvalidInitialization();\\n        }\\n        if ($._initialized != type(uint64).max) {\\n            $._initialized = type(uint64).max;\\n            emit Initialized(type(uint64).max);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the highest version that has been initialized. See {reinitializer}.\\n     */\\n    function _getInitializedVersion() internal view returns (uint64) {\\n        return _getInitializableStorage()._initialized;\\n    }\\n\\n    /**\\n     * @dev Returns `true` if the contract is currently initializing. See {onlyInitializing}.\\n     */\\n    function _isInitializing() internal view returns (bool) {\\n        return _getInitializableStorage()._initializing;\\n    }\\n\\n    /**\\n     * @dev Returns a pointer to the storage namespace.\\n     */\\n    // solhint-disable-next-line var-name-mixedcase\\n    function _getInitializableStorage() private pure returns (InitializableStorage storage $) {\\n        assembly {\\n            $.slot := INITIALIZABLE_STORAGE\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x631188737069917d2f909d29ce62c4d48611d326686ba6683e26b72a23bfac0b\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (proxy/utils/UUPSUpgradeable.sol)\\n\\npragma solidity ^0.8.20;\\n\\nimport {IERC1822Proxiable} from \\\"@openzeppelin/contracts/interfaces/draft-IERC1822.sol\\\";\\nimport {ERC1967Utils} from \\\"@openzeppelin/contracts/proxy/ERC1967/ERC1967Utils.sol\\\";\\nimport {Initializable} from \\\"./Initializable.sol\\\";\\n\\n/**\\n * @dev An upgradeability mechanism designed for UUPS proxies. The functions included here can perform an upgrade of an\\n * {ERC1967Proxy}, when this contract is set as the implementation behind such a proxy.\\n *\\n * A security mechanism ensures that an upgrade does not turn off upgradeability accidentally, although this risk is\\n * reinstated if the upgrade retains upgradeability but removes the security mechanism, e.g. by replacing\\n * `UUPSUpgradeable` with a custom implementation of upgrades.\\n *\\n * The {_authorizeUpgrade} function must be overridden to include access restriction to the upgrade mechanism.\\n */\\nabstract contract UUPSUpgradeable is Initializable, IERC1822Proxiable {\\n    /// @custom:oz-upgrades-unsafe-allow state-variable-immutable\\n    address private immutable __self = address(this);\\n\\n    /**\\n     * @dev The version of the upgrade interface of the contract. If this getter is missing, both `upgradeTo(address)`\\n     * and `upgradeToAndCall(address,bytes)` are present, and `upgradeTo` must be used if no function should be called,\\n     * while `upgradeToAndCall` will invoke the `receive` function if the second argument is the empty byte string.\\n     * If the getter returns `\\\"5.0.0\\\"`, only `upgradeToAndCall(address,bytes)` is present, and the second argument must\\n     * be the empty byte string if no function should be called, making it impossible to invoke the `receive` function\\n     * during an upgrade.\\n     */\\n    string public constant UPGRADE_INTERFACE_VERSION = \\\"5.0.0\\\";\\n\\n    /**\\n     * @dev The call is from an unauthorized context.\\n     */\\n    error UUPSUnauthorizedCallContext();\\n\\n    /**\\n     * @dev The storage `slot` is unsupported as a UUID.\\n     */\\n    error UUPSUnsupportedProxiableUUID(bytes32 slot);\\n\\n    /**\\n     * @dev Check that the execution is being performed through a delegatecall call and that the execution context is\\n     * a proxy contract with an implementation (as defined in ERC1967) pointing to self. This should only be the case\\n     * for UUPS and transparent proxies that are using the current contract as their implementation. Execution of a\\n     * function through ERC1167 minimal proxies (clones) would not normally pass this test, but is not guaranteed to\\n     * fail.\\n     */\\n    modifier onlyProxy() {\\n        _checkProxy();\\n        _;\\n    }\\n\\n    /**\\n     * @dev Check that the execution is not being performed through a delegate call. This allows a function to be\\n     * callable on the implementing contract but not through proxies.\\n     */\\n    modifier notDelegated() {\\n        _checkNotDelegated();\\n        _;\\n    }\\n\\n    function __UUPSUpgradeable_init() internal onlyInitializing {\\n    }\\n\\n    function __UUPSUpgradeable_init_unchained() internal onlyInitializing {\\n    }\\n    /**\\n     * @dev Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the\\n     * implementation. It is used to validate the implementation's compatibility when performing an upgrade.\\n     *\\n     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks\\n     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this\\n     * function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier.\\n     */\\n    function proxiableUUID() external view virtual notDelegated returns (bytes32) {\\n        return ERC1967Utils.IMPLEMENTATION_SLOT;\\n    }\\n\\n    /**\\n     * @dev Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call\\n     * encoded in `data`.\\n     *\\n     * Calls {_authorizeUpgrade}.\\n     *\\n     * Emits an {Upgraded} event.\\n     *\\n     * @custom:oz-upgrades-unsafe-allow-reachable delegatecall\\n     */\\n    function upgradeToAndCall(address newImplementation, bytes memory data) public payable virtual onlyProxy {\\n        _authorizeUpgrade(newImplementation);\\n        _upgradeToAndCallUUPS(newImplementation, data);\\n    }\\n\\n    /**\\n     * @dev Reverts if the execution is not performed via delegatecall or the execution\\n     * context is not of a proxy with an ERC1967-compliant implementation pointing to self.\\n     * See {_onlyProxy}.\\n     */\\n    function _checkProxy() internal view virtual {\\n        if (\\n            address(this) == __self || // Must be called through delegatecall\\n            ERC1967Utils.getImplementation() != __self // Must be called through an active proxy\\n        ) {\\n            revert UUPSUnauthorizedCallContext();\\n        }\\n    }\\n\\n    /**\\n     * @dev Reverts if the execution is performed via delegatecall.\\n     * See {notDelegated}.\\n     */\\n    function _checkNotDelegated() internal view virtual {\\n        if (address(this) != __self) {\\n            // Must not be called through delegatecall\\n            revert UUPSUnauthorizedCallContext();\\n        }\\n    }\\n\\n    /**\\n     * @dev Function that should revert when `msg.sender` is not authorized to upgrade the contract. Called by\\n     * {upgradeToAndCall}.\\n     *\\n     * Normally, this function will use an xref:access.adoc[access control] modifier such as {Ownable-onlyOwner}.\\n     *\\n     * ```solidity\\n     * function _authorizeUpgrade(address) internal onlyOwner {}\\n     * ```\\n     */\\n    function _authorizeUpgrade(address newImplementation) internal virtual;\\n\\n    /**\\n     * @dev Performs an implementation upgrade with a security check for UUPS proxies, and additional setup call.\\n     *\\n     * As a security check, {proxiableUUID} is invoked in the new implementation, and the return value\\n     * is expected to be the implementation slot in ERC1967.\\n     *\\n     * Emits an {IERC1967-Upgraded} event.\\n     */\\n    function _upgradeToAndCallUUPS(address newImplementation, bytes memory data) private {\\n        try IERC1822Proxiable(newImplementation).proxiableUUID() returns (bytes32 slot) {\\n            if (slot != ERC1967Utils.IMPLEMENTATION_SLOT) {\\n                revert UUPSUnsupportedProxiableUUID(slot);\\n            }\\n            ERC1967Utils.upgradeToAndCall(newImplementation, data);\\n        } catch {\\n            // The implementation is not UUPS\\n            revert ERC1967Utils.ERC1967InvalidImplementation(newImplementation);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x3f13b947637c4969c0644cab4ef399cdc4b67f101463b8775c5a43b118558e53\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/utils/ContextUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.1) (utils/Context.sol)\\n\\npragma solidity ^0.8.20;\\nimport {Initializable} from \\\"../proxy/utils/Initializable.sol\\\";\\n\\n/**\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract ContextUpgradeable is Initializable {\\n    function __Context_init() internal onlyInitializing {\\n    }\\n\\n    function __Context_init_unchained() internal onlyInitializing {\\n    }\\n    function _msgSender() internal view virtual returns (address) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes calldata) {\\n        return msg.data;\\n    }\\n\\n    function _contextSuffixLength() internal view virtual returns (uint256) {\\n        return 0;\\n    }\\n}\\n\",\"keccak256\":\"0xdbef5f0c787055227243a7318ef74c8a5a1108ca3a07f2b3a00ef67769e1e397\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/ReentrancyGuard.sol)\\n\\npragma solidity ^0.8.20;\\nimport {Initializable} from \\\"../proxy/utils/Initializable.sol\\\";\\n\\n/**\\n * @dev Contract module that helps prevent reentrant calls to a function.\\n *\\n * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier\\n * available, which can be applied to functions to make sure there are no nested\\n * (reentrant) calls to them.\\n *\\n * Note that because there is a single `nonReentrant` guard, functions marked as\\n * `nonReentrant` may not call one another. This can be worked around by making\\n * those functions `private`, and then adding `external` `nonReentrant` entry\\n * points to them.\\n *\\n * TIP: If you would like to learn more about reentrancy and alternative ways\\n * to protect against it, check out our blog post\\n * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].\\n */\\nabstract contract ReentrancyGuardUpgradeable is Initializable {\\n    // Booleans are more expensive than uint256 or any type that takes up a full\\n    // word because each write operation emits an extra SLOAD to first read the\\n    // slot's contents, replace the bits taken up by the boolean, and then write\\n    // back. This is the compiler's defense against contract upgrades and\\n    // pointer aliasing, and it cannot be disabled.\\n\\n    // The values being non-zero value makes deployment a bit more expensive,\\n    // but in exchange the refund on every call to nonReentrant will be lower in\\n    // amount. Since refunds are capped to a percentage of the total\\n    // transaction's gas, it is best to keep them low in cases like this one, to\\n    // increase the likelihood of the full refund coming into effect.\\n    uint256 private constant NOT_ENTERED = 1;\\n    uint256 private constant ENTERED = 2;\\n\\n    /// @custom:storage-location erc7201:openzeppelin.storage.ReentrancyGuard\\n    struct ReentrancyGuardStorage {\\n        uint256 _status;\\n    }\\n\\n    // keccak256(abi.encode(uint256(keccak256(\\\"openzeppelin.storage.ReentrancyGuard\\\")) - 1)) & ~bytes32(uint256(0xff))\\n    bytes32 private constant ReentrancyGuardStorageLocation = 0x9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00;\\n\\n    function _getReentrancyGuardStorage() private pure returns (ReentrancyGuardStorage storage $) {\\n        assembly {\\n            $.slot := ReentrancyGuardStorageLocation\\n        }\\n    }\\n\\n    /**\\n     * @dev Unauthorized reentrant call.\\n     */\\n    error ReentrancyGuardReentrantCall();\\n\\n    function __ReentrancyGuard_init() internal onlyInitializing {\\n        __ReentrancyGuard_init_unchained();\\n    }\\n\\n    function __ReentrancyGuard_init_unchained() internal onlyInitializing {\\n        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();\\n        $._status = NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Prevents a contract from calling itself, directly or indirectly.\\n     * Calling a `nonReentrant` function from another `nonReentrant`\\n     * function is not supported. It is possible to prevent this from happening\\n     * by making the `nonReentrant` function external, and making it call a\\n     * `private` function that does the actual work.\\n     */\\n    modifier nonReentrant() {\\n        _nonReentrantBefore();\\n        _;\\n        _nonReentrantAfter();\\n    }\\n\\n    function _nonReentrantBefore() private {\\n        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();\\n        // On the first call to nonReentrant, _status will be NOT_ENTERED\\n        if ($._status == ENTERED) {\\n            revert ReentrancyGuardReentrantCall();\\n        }\\n\\n        // Any calls to nonReentrant after this point will fail\\n        $._status = ENTERED;\\n    }\\n\\n    function _nonReentrantAfter() private {\\n        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();\\n        // By storing the original value once again, a refund is triggered (see\\n        // https://eips.ethereum.org/EIPS/eip-2200)\\n        $._status = NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Returns true if the reentrancy guard is currently set to \\\"entered\\\", which indicates there is a\\n     * `nonReentrant` function in the call stack.\\n     */\\n    function _reentrancyGuardEntered() internal view returns (bool) {\\n        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();\\n        return $._status == ENTERED;\\n    }\\n}\\n\",\"keccak256\":\"0xb44e086e941292cdc7f440de51478493894ef0b1aeccb0c4047445919f667f74\",\"license\":\"MIT\"},\"@openzeppelin/contracts/interfaces/draft-IERC1822.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (interfaces/draft-IERC1822.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev ERC1822: Universal Upgradeable Proxy Standard (UUPS) documents a method for upgradeability through a simplified\\n * proxy whose upgrades are fully controlled by the current implementation.\\n */\\ninterface IERC1822Proxiable {\\n    /**\\n     * @dev Returns the storage slot that the proxiable contract assumes is being used to store the implementation\\n     * address.\\n     *\\n     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks\\n     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this\\n     * function revert if invoked through a proxy.\\n     */\\n    function proxiableUUID() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0x2a1f9944df2015c081d89cd41ba22ffaf10aa6285969f0dc612b235cc448999c\",\"license\":\"MIT\"},\"@openzeppelin/contracts/proxy/ERC1967/ERC1967Utils.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (proxy/ERC1967/ERC1967Utils.sol)\\n\\npragma solidity ^0.8.20;\\n\\nimport {IBeacon} from \\\"../beacon/IBeacon.sol\\\";\\nimport {Address} from \\\"../../utils/Address.sol\\\";\\nimport {StorageSlot} from \\\"../../utils/StorageSlot.sol\\\";\\n\\n/**\\n * @dev This abstract contract provides getters and event emitting update functions for\\n * https://eips.ethereum.org/EIPS/eip-1967[EIP1967] slots.\\n */\\nlibrary ERC1967Utils {\\n    // We re-declare ERC-1967 events here because they can't be used directly from IERC1967.\\n    // This will be fixed in Solidity 0.8.21. At that point we should remove these events.\\n    /**\\n     * @dev Emitted when the implementation is upgraded.\\n     */\\n    event Upgraded(address indexed implementation);\\n\\n    /**\\n     * @dev Emitted when the admin account has changed.\\n     */\\n    event AdminChanged(address previousAdmin, address newAdmin);\\n\\n    /**\\n     * @dev Emitted when the beacon is changed.\\n     */\\n    event BeaconUpgraded(address indexed beacon);\\n\\n    /**\\n     * @dev Storage slot with the address of the current implementation.\\n     * This is the keccak-256 hash of \\\"eip1967.proxy.implementation\\\" subtracted by 1.\\n     */\\n    // solhint-disable-next-line private-vars-leading-underscore\\n    bytes32 internal constant IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;\\n\\n    /**\\n     * @dev The `implementation` of the proxy is invalid.\\n     */\\n    error ERC1967InvalidImplementation(address implementation);\\n\\n    /**\\n     * @dev The `admin` of the proxy is invalid.\\n     */\\n    error ERC1967InvalidAdmin(address admin);\\n\\n    /**\\n     * @dev The `beacon` of the proxy is invalid.\\n     */\\n    error ERC1967InvalidBeacon(address beacon);\\n\\n    /**\\n     * @dev An upgrade function sees `msg.value > 0` that may be lost.\\n     */\\n    error ERC1967NonPayable();\\n\\n    /**\\n     * @dev Returns the current implementation address.\\n     */\\n    function getImplementation() internal view returns (address) {\\n        return StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value;\\n    }\\n\\n    /**\\n     * @dev Stores a new address in the EIP1967 implementation slot.\\n     */\\n    function _setImplementation(address newImplementation) private {\\n        if (newImplementation.code.length == 0) {\\n            revert ERC1967InvalidImplementation(newImplementation);\\n        }\\n        StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value = newImplementation;\\n    }\\n\\n    /**\\n     * @dev Performs implementation upgrade with additional setup call if data is nonempty.\\n     * This function is payable only if the setup call is performed, otherwise `msg.value` is rejected\\n     * to avoid stuck value in the contract.\\n     *\\n     * Emits an {IERC1967-Upgraded} event.\\n     */\\n    function upgradeToAndCall(address newImplementation, bytes memory data) internal {\\n        _setImplementation(newImplementation);\\n        emit Upgraded(newImplementation);\\n\\n        if (data.length > 0) {\\n            Address.functionDelegateCall(newImplementation, data);\\n        } else {\\n            _checkNonPayable();\\n        }\\n    }\\n\\n    /**\\n     * @dev Storage slot with the admin of the contract.\\n     * This is the keccak-256 hash of \\\"eip1967.proxy.admin\\\" subtracted by 1.\\n     */\\n    // solhint-disable-next-line private-vars-leading-underscore\\n    bytes32 internal constant ADMIN_SLOT = 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103;\\n\\n    /**\\n     * @dev Returns the current admin.\\n     *\\n     * TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using\\n     * the https://eth.wiki/json-rpc/API#eth_getstorageat[`eth_getStorageAt`] RPC call.\\n     * `0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103`\\n     */\\n    function getAdmin() internal view returns (address) {\\n        return StorageSlot.getAddressSlot(ADMIN_SLOT).value;\\n    }\\n\\n    /**\\n     * @dev Stores a new address in the EIP1967 admin slot.\\n     */\\n    function _setAdmin(address newAdmin) private {\\n        if (newAdmin == address(0)) {\\n            revert ERC1967InvalidAdmin(address(0));\\n        }\\n        StorageSlot.getAddressSlot(ADMIN_SLOT).value = newAdmin;\\n    }\\n\\n    /**\\n     * @dev Changes the admin of the proxy.\\n     *\\n     * Emits an {IERC1967-AdminChanged} event.\\n     */\\n    function changeAdmin(address newAdmin) internal {\\n        emit AdminChanged(getAdmin(), newAdmin);\\n        _setAdmin(newAdmin);\\n    }\\n\\n    /**\\n     * @dev The storage slot of the UpgradeableBeacon contract which defines the implementation for this proxy.\\n     * This is the keccak-256 hash of \\\"eip1967.proxy.beacon\\\" subtracted by 1.\\n     */\\n    // solhint-disable-next-line private-vars-leading-underscore\\n    bytes32 internal constant BEACON_SLOT = 0xa3f0ad74e5423aebfd80d3ef4346578335a9a72aeaee59ff6cb3582b35133d50;\\n\\n    /**\\n     * @dev Returns the current beacon.\\n     */\\n    function getBeacon() internal view returns (address) {\\n        return StorageSlot.getAddressSlot(BEACON_SLOT).value;\\n    }\\n\\n    /**\\n     * @dev Stores a new beacon in the EIP1967 beacon slot.\\n     */\\n    function _setBeacon(address newBeacon) private {\\n        if (newBeacon.code.length == 0) {\\n            revert ERC1967InvalidBeacon(newBeacon);\\n        }\\n\\n        StorageSlot.getAddressSlot(BEACON_SLOT).value = newBeacon;\\n\\n        address beaconImplementation = IBeacon(newBeacon).implementation();\\n        if (beaconImplementation.code.length == 0) {\\n            revert ERC1967InvalidImplementation(beaconImplementation);\\n        }\\n    }\\n\\n    /**\\n     * @dev Change the beacon and trigger a setup call if data is nonempty.\\n     * This function is payable only if the setup call is performed, otherwise `msg.value` is rejected\\n     * to avoid stuck value in the contract.\\n     *\\n     * Emits an {IERC1967-BeaconUpgraded} event.\\n     *\\n     * CAUTION: Invoking this function has no effect on an instance of {BeaconProxy} since v5, since\\n     * it uses an immutable beacon without looking at the value of the ERC-1967 beacon slot for\\n     * efficiency.\\n     */\\n    function upgradeBeaconToAndCall(address newBeacon, bytes memory data) internal {\\n        _setBeacon(newBeacon);\\n        emit BeaconUpgraded(newBeacon);\\n\\n        if (data.length > 0) {\\n            Address.functionDelegateCall(IBeacon(newBeacon).implementation(), data);\\n        } else {\\n            _checkNonPayable();\\n        }\\n    }\\n\\n    /**\\n     * @dev Reverts if `msg.value` is not zero. It can be used to avoid `msg.value` stuck in the contract\\n     * if an upgrade doesn't perform an initialization call.\\n     */\\n    function _checkNonPayable() private {\\n        if (msg.value > 0) {\\n            revert ERC1967NonPayable();\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x06a78f9b3ee3e6d0eb4e4cd635ba49960bea34cac1db8c0a27c75f2319f1fd65\",\"license\":\"MIT\"},\"@openzeppelin/contracts/proxy/beacon/IBeacon.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (proxy/beacon/IBeacon.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev This is the interface that {BeaconProxy} expects of its beacon.\\n */\\ninterface IBeacon {\\n    /**\\n     * @dev Must return an address that can be used as a delegate call target.\\n     *\\n     * {UpgradeableBeacon} will check that this address is a contract.\\n     */\\n    function implementation() external view returns (address);\\n}\\n\",\"keccak256\":\"0xc59a78b07b44b2cf2e8ab4175fca91e8eca1eee2df7357b8d2a8833e5ea1f64c\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the value of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the value of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the\\n     * caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from `from` to `to` using the\\n     * allowance mechanism. `value` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 value) external returns (bool);\\n}\\n\",\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/extensions/IERC20Permit.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/IERC20Permit.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC20 Permit extension allowing approvals to be made via signatures, as defined in\\n * https://eips.ethereum.org/EIPS/eip-2612[EIP-2612].\\n *\\n * Adds the {permit} method, which can be used to change an account's ERC20 allowance (see {IERC20-allowance}) by\\n * presenting a message signed by the account. By not relying on {IERC20-approve}, the token holder account doesn't\\n * need to send a transaction, and thus is not required to hold Ether at all.\\n *\\n * ==== Security Considerations\\n *\\n * There are two important considerations concerning the use of `permit`. The first is that a valid permit signature\\n * expresses an allowance, and it should not be assumed to convey additional meaning. In particular, it should not be\\n * considered as an intention to spend the allowance in any specific way. The second is that because permits have\\n * built-in replay protection and can be submitted by anyone, they can be frontrun. A protocol that uses permits should\\n * take this into consideration and allow a `permit` call to fail. Combining these two aspects, a pattern that may be\\n * generally recommended is:\\n *\\n * ```solidity\\n * function doThingWithPermit(..., uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) public {\\n *     try token.permit(msg.sender, address(this), value, deadline, v, r, s) {} catch {}\\n *     doThing(..., value);\\n * }\\n *\\n * function doThing(..., uint256 value) public {\\n *     token.safeTransferFrom(msg.sender, address(this), value);\\n *     ...\\n * }\\n * ```\\n *\\n * Observe that: 1) `msg.sender` is used as the owner, leaving no ambiguity as to the signer intent, and 2) the use of\\n * `try/catch` allows the permit to fail and makes the code tolerant to frontrunning. (See also\\n * {SafeERC20-safeTransferFrom}).\\n *\\n * Additionally, note that smart contract wallets (such as Argent or Safe) are not able to produce permit signatures, so\\n * contracts should have entry points that don't rely on permit.\\n */\\ninterface IERC20Permit {\\n    /**\\n     * @dev Sets `value` as the allowance of `spender` over ``owner``'s tokens,\\n     * given ``owner``'s signed approval.\\n     *\\n     * IMPORTANT: The same issues {IERC20-approve} has related to transaction\\n     * ordering also apply here.\\n     *\\n     * Emits an {Approval} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     * - `deadline` must be a timestamp in the future.\\n     * - `v`, `r` and `s` must be a valid `secp256k1` signature from `owner`\\n     * over the EIP712-formatted function arguments.\\n     * - the signature must use ``owner``'s current nonce (see {nonces}).\\n     *\\n     * For more information on the signature format, see the\\n     * https://eips.ethereum.org/EIPS/eip-2612#specification[relevant EIP\\n     * section].\\n     *\\n     * CAUTION: See Security Considerations above.\\n     */\\n    function permit(\\n        address owner,\\n        address spender,\\n        uint256 value,\\n        uint256 deadline,\\n        uint8 v,\\n        bytes32 r,\\n        bytes32 s\\n    ) external;\\n\\n    /**\\n     * @dev Returns the current nonce for `owner`. This value must be\\n     * included whenever a signature is generated for {permit}.\\n     *\\n     * Every successful call to {permit} increases ``owner``'s nonce by one. This\\n     * prevents a signature from being used multiple times.\\n     */\\n    function nonces(address owner) external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the domain separator used in the encoding of the signature for {permit}, as defined by {EIP712}.\\n     */\\n    // solhint-disable-next-line func-name-mixedcase\\n    function DOMAIN_SEPARATOR() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0x6008dabfe393240d73d7dd7688033f72740d570aa422254d29a7dce8568f3aff\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/utils/SafeERC20.sol)\\n\\npragma solidity ^0.8.20;\\n\\nimport {IERC20} from \\\"../IERC20.sol\\\";\\nimport {IERC20Permit} from \\\"../extensions/IERC20Permit.sol\\\";\\nimport {Address} from \\\"../../../utils/Address.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20 {\\n    using Address for address;\\n\\n    /**\\n     * @dev An operation with an ERC20 token failed.\\n     */\\n    error SafeERC20FailedOperation(address token);\\n\\n    /**\\n     * @dev Indicates a failed `decreaseAllowance` request.\\n     */\\n    error SafeERC20FailedDecreaseAllowance(address spender, uint256 currentAllowance, uint256 requestedDecrease);\\n\\n    /**\\n     * @dev Transfer `value` amount of `token` from the calling contract to `to`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeTransfer(IERC20 token, address to, uint256 value) internal {\\n        _callOptionalReturn(token, abi.encodeCall(token.transfer, (to, value)));\\n    }\\n\\n    /**\\n     * @dev Transfer `value` amount of `token` from `from` to `to`, spending the approval given by `from` to the\\n     * calling contract. If `token` returns no value, non-reverting calls are assumed to be successful.\\n     */\\n    function safeTransferFrom(IERC20 token, address from, address to, uint256 value) internal {\\n        _callOptionalReturn(token, abi.encodeCall(token.transferFrom, (from, to, value)));\\n    }\\n\\n    /**\\n     * @dev Increase the calling contract's allowance toward `spender` by `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeIncreaseAllowance(IERC20 token, address spender, uint256 value) internal {\\n        uint256 oldAllowance = token.allowance(address(this), spender);\\n        forceApprove(token, spender, oldAllowance + value);\\n    }\\n\\n    /**\\n     * @dev Decrease the calling contract's allowance toward `spender` by `requestedDecrease`. If `token` returns no\\n     * value, non-reverting calls are assumed to be successful.\\n     */\\n    function safeDecreaseAllowance(IERC20 token, address spender, uint256 requestedDecrease) internal {\\n        unchecked {\\n            uint256 currentAllowance = token.allowance(address(this), spender);\\n            if (currentAllowance < requestedDecrease) {\\n                revert SafeERC20FailedDecreaseAllowance(spender, currentAllowance, requestedDecrease);\\n            }\\n            forceApprove(token, spender, currentAllowance - requestedDecrease);\\n        }\\n    }\\n\\n    /**\\n     * @dev Set the calling contract's allowance toward `spender` to `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful. Meant to be used with tokens that require the approval\\n     * to be set to zero before setting it to a non-zero value, such as USDT.\\n     */\\n    function forceApprove(IERC20 token, address spender, uint256 value) internal {\\n        bytes memory approvalCall = abi.encodeCall(token.approve, (spender, value));\\n\\n        if (!_callOptionalReturnBool(token, approvalCall)) {\\n            _callOptionalReturn(token, abi.encodeCall(token.approve, (spender, 0)));\\n            _callOptionalReturn(token, approvalCall);\\n        }\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function _callOptionalReturn(IERC20 token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We use {Address-functionCall} to perform this call, which verifies that\\n        // the target address contains contract code and also asserts for success in the low-level call.\\n\\n        bytes memory returndata = address(token).functionCall(data);\\n        if (returndata.length != 0 && !abi.decode(returndata, (bool))) {\\n            revert SafeERC20FailedOperation(address(token));\\n        }\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     *\\n     * This is a variant of {_callOptionalReturn} that silents catches all reverts and returns a bool instead.\\n     */\\n    function _callOptionalReturnBool(IERC20 token, bytes memory data) private returns (bool) {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We cannot use {Address-functionCall} here since this should return false\\n        // and not revert is the subcall reverts.\\n\\n        (bool success, bytes memory returndata) = address(token).call(data);\\n        return success && (returndata.length == 0 || abi.decode(returndata, (bool))) && address(token).code.length > 0;\\n    }\\n}\\n\",\"keccak256\":\"0x37bb49513c49c87c4642a891b13b63571bc87013dde806617aa1efb54605f386\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Address.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/Address.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev The ETH balance of the account is not enough to perform the operation.\\n     */\\n    error AddressInsufficientBalance(address account);\\n\\n    /**\\n     * @dev There's no code at `target` (it is not a contract).\\n     */\\n    error AddressEmptyCode(address target);\\n\\n    /**\\n     * @dev A call to an address target failed. The target may have reverted.\\n     */\\n    error FailedInnerCall();\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://consensys.net/diligence/blog/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.8.20/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        if (address(this).balance < amount) {\\n            revert AddressInsufficientBalance(address(this));\\n        }\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        if (!success) {\\n            revert FailedInnerCall();\\n        }\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason or custom error, it is bubbled\\n     * up by this function (like regular Solidity function calls). However, if\\n     * the call reverted with no returned reason, this function reverts with a\\n     * {FailedInnerCall} error.\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     */\\n    function functionCallWithValue(address target, bytes memory data, uint256 value) internal returns (bytes memory) {\\n        if (address(this).balance < value) {\\n            revert AddressInsufficientBalance(address(this));\\n        }\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResultFromTarget(target, success, returndata);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResultFromTarget(target, success, returndata);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a delegate call.\\n     */\\n    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.delegatecall(data);\\n        return verifyCallResultFromTarget(target, success, returndata);\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call to smart-contract was successful, and reverts if the target\\n     * was not a contract or bubbling up the revert reason (falling back to {FailedInnerCall}) in case of an\\n     * unsuccessful call.\\n     */\\n    function verifyCallResultFromTarget(\\n        address target,\\n        bool success,\\n        bytes memory returndata\\n    ) internal view returns (bytes memory) {\\n        if (!success) {\\n            _revert(returndata);\\n        } else {\\n            // only check if target is a contract if the call was successful and the return data is empty\\n            // otherwise we already know that it was a contract\\n            if (returndata.length == 0 && target.code.length == 0) {\\n                revert AddressEmptyCode(target);\\n            }\\n            return returndata;\\n        }\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call was successful, and reverts if it wasn't, either by bubbling the\\n     * revert reason or with a default {FailedInnerCall} error.\\n     */\\n    function verifyCallResult(bool success, bytes memory returndata) internal pure returns (bytes memory) {\\n        if (!success) {\\n            _revert(returndata);\\n        } else {\\n            return returndata;\\n        }\\n    }\\n\\n    /**\\n     * @dev Reverts with returndata if present. Otherwise reverts with {FailedInnerCall}.\\n     */\\n    function _revert(bytes memory returndata) private pure {\\n        // Look for revert reason and bubble it up if present\\n        if (returndata.length > 0) {\\n            // The easiest way to bubble the revert reason is using memory via assembly\\n            /// @solidity memory-safe-assembly\\n            assembly {\\n                let returndata_size := mload(returndata)\\n                revert(add(32, returndata), returndata_size)\\n            }\\n        } else {\\n            revert FailedInnerCall();\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xaf28a975a78550e45f65e559a3ad6a5ad43b9b8a37366999abd1b7084eb70721\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/StorageSlot.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/StorageSlot.sol)\\n// This file was procedurally generated from scripts/generate/templates/StorageSlot.js.\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Library for reading and writing primitive types to specific storage slots.\\n *\\n * Storage slots are often used to avoid storage conflict when dealing with upgradeable contracts.\\n * This library helps with reading and writing to such slots without the need for inline assembly.\\n *\\n * The functions in this library return Slot structs that contain a `value` member that can be used to read or write.\\n *\\n * Example usage to set ERC1967 implementation slot:\\n * ```solidity\\n * contract ERC1967 {\\n *     bytes32 internal constant _IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;\\n *\\n *     function _getImplementation() internal view returns (address) {\\n *         return StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value;\\n *     }\\n *\\n *     function _setImplementation(address newImplementation) internal {\\n *         require(newImplementation.code.length > 0);\\n *         StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value = newImplementation;\\n *     }\\n * }\\n * ```\\n */\\nlibrary StorageSlot {\\n    struct AddressSlot {\\n        address value;\\n    }\\n\\n    struct BooleanSlot {\\n        bool value;\\n    }\\n\\n    struct Bytes32Slot {\\n        bytes32 value;\\n    }\\n\\n    struct Uint256Slot {\\n        uint256 value;\\n    }\\n\\n    struct StringSlot {\\n        string value;\\n    }\\n\\n    struct BytesSlot {\\n        bytes value;\\n    }\\n\\n    /**\\n     * @dev Returns an `AddressSlot` with member `value` located at `slot`.\\n     */\\n    function getAddressSlot(bytes32 slot) internal pure returns (AddressSlot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `BooleanSlot` with member `value` located at `slot`.\\n     */\\n    function getBooleanSlot(bytes32 slot) internal pure returns (BooleanSlot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `Bytes32Slot` with member `value` located at `slot`.\\n     */\\n    function getBytes32Slot(bytes32 slot) internal pure returns (Bytes32Slot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `Uint256Slot` with member `value` located at `slot`.\\n     */\\n    function getUint256Slot(bytes32 slot) internal pure returns (Uint256Slot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `StringSlot` with member `value` located at `slot`.\\n     */\\n    function getStringSlot(bytes32 slot) internal pure returns (StringSlot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `StringSlot` representation of the string storage pointer `store`.\\n     */\\n    function getStringSlot(string storage store) internal pure returns (StringSlot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := store.slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `BytesSlot` with member `value` located at `slot`.\\n     */\\n    function getBytesSlot(bytes32 slot) internal pure returns (BytesSlot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := slot\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an `BytesSlot` representation of the bytes storage pointer `store`.\\n     */\\n    function getBytesSlot(bytes storage store) internal pure returns (BytesSlot storage r) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := store.slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x32ba59b4b7299237c8ba56319110989d7978a039faf754793064e967e5894418\",\"license\":\"MIT\"},\"contracts/Addresses.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { AddressesConfigurable } from \\\"./Dependencies/AddressesConfigurable.sol\\\";\\n\\ncontract Addresses is AddressesConfigurable { }\\n\",\"keccak256\":\"0xee6f0debf09164467fe0766a99b35a0c3f7837429bcc0d519cd6987b00e81b8c\",\"license\":\"MIT\"},\"contracts/Dependencies/AddressesConfigurable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { OwnableUpgradeable } from\\n    \\\"@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol\\\";\\n\\nabstract contract AddressesConfigurable is OwnableUpgradeable {\\n    address public activePool;\\n    address public adminContract;\\n    address public borrowerOperations;\\n    address public collSurplusPool;\\n    address public communityIssuance;\\n    address public debtToken;\\n    address public defaultPool;\\n    address public feeCollector;\\n    address public gasPoolAddress;\\n    address public trenStaking;\\n    address public priceFeed;\\n    address public sortedTrenBoxes;\\n    address public stabilityPool;\\n    address public timelockAddress;\\n    address public treasuryAddress;\\n    address public trenBoxManager;\\n    address public trenBoxManagerOperations;\\n\\n    bool public isAddressSetupInitialized;\\n\\n    /**\\n     * @dev This empty reserved space is put in place to allow future versions to add new\\n     * variables without shifting down storage in the inheritance chain.\\n     * See https://docs.openzeppelin.com/contracts/4.x/upgradeable#storage_gaps\\n     */\\n    uint256[33] private __gap; // Goerli uses 47; Arbitrum uses 33\\n\\n    // Dependency setters\\n    // -----------------------------------------------------------------------------------------------\\n\\n    function setAddresses(address[] calldata _addresses) external onlyOwner {\\n        require(!isAddressSetupInitialized, \\\"Setup is already initialized\\\");\\n        require(_addresses.length == 15, \\\"Expected 15 addresses at setup\\\");\\n        for (uint256 i = 0; i < 15; i++) {\\n            require(_addresses[i] != address(0), \\\"Invalid address\\\");\\n        }\\n        activePool = _addresses[0];\\n        adminContract = _addresses[1];\\n        borrowerOperations = _addresses[2];\\n        collSurplusPool = _addresses[3];\\n        debtToken = _addresses[4];\\n        defaultPool = _addresses[5];\\n        feeCollector = _addresses[6];\\n        gasPoolAddress = _addresses[7];\\n        priceFeed = _addresses[8];\\n        sortedTrenBoxes = _addresses[9];\\n        stabilityPool = _addresses[10];\\n        timelockAddress = _addresses[11];\\n        treasuryAddress = _addresses[12];\\n        trenBoxManager = _addresses[13];\\n        trenBoxManagerOperations = _addresses[14];\\n\\n        isAddressSetupInitialized = true;\\n    }\\n\\n    function setCommunityIssuance(address _communityIssuance) public onlyOwner {\\n        communityIssuance = _communityIssuance;\\n    }\\n\\n    function setTRENStaking(address _trenStaking) public onlyOwner {\\n        trenStaking = _trenStaking;\\n    }\\n}\\n\",\"keccak256\":\"0xd11d486cb2a0c07199b14176e64ad449567e453db4bccdb1d35a06bf732ccc4a\",\"license\":\"MIT\"},\"contracts/Dependencies/BaseMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nabstract contract BaseMath {\\n    uint256 public constant DECIMAL_PRECISION = 1 ether;\\n}\\n\",\"keccak256\":\"0xf57930536bdd0489378ca7488d73a53e6d357bb001511fe3ef8e0bd9bbfc7769\",\"license\":\"MIT\"},\"contracts/Dependencies/SafetyTransfer.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IERC20Decimals } from \\\"../Interfaces/IERC20Decimals.sol\\\";\\n\\nlibrary SafetyTransfer {\\n    error EthUnsupportedError();\\n    error InvalidAmountError();\\n\\n    //_amount is in ether (1e18) and we want to convert it to the token decimal\\n    function decimalsCorrection(address _token, uint256 _amount) internal view returns (uint256) {\\n        if (_token == address(0)) {\\n            revert EthUnsupportedError();\\n        }\\n        if (_amount == 0) {\\n            return 0;\\n        }\\n        uint8 decimals = IERC20Decimals(_token).decimals();\\n        if (decimals < 18) {\\n            uint256 divisor = 10 ** (18 - decimals);\\n            if (_amount % divisor != 0) {\\n                revert InvalidAmountError();\\n            }\\n            return _amount / divisor;\\n        } else if (decimals > 18) {\\n            uint256 multiplier = 10 ** (decimals - 18);\\n            return _amount * multiplier;\\n        }\\n        return _amount;\\n    }\\n}\\n\",\"keccak256\":\"0x8661386c9ff583aa23a5edfcba5bef533877663018bcc8c626fb70d2090872cf\",\"license\":\"MIT\"},\"contracts/Dependencies/TrenBase.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { OwnableUpgradeable } from\\n    \\\"@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol\\\";\\nimport { UUPSUpgradeable } from\\n    \\\"@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol\\\";\\n\\nimport { BaseMath } from \\\"./BaseMath.sol\\\";\\nimport { TrenMath } from \\\"./TrenMath.sol\\\";\\nimport { IActivePool } from \\\"../Interfaces/IActivePool.sol\\\";\\nimport { IDefaultPool } from \\\"../Interfaces/IDefaultPool.sol\\\";\\nimport { ITrenBase } from \\\"../Interfaces/ITrenBase.sol\\\";\\nimport { IAdminContract } from \\\"../Interfaces/IAdminContract.sol\\\";\\nimport { IDefaultPool } from \\\"../Interfaces/IDefaultPool.sol\\\";\\nimport { Addresses } from \\\"../Addresses.sol\\\";\\n\\n/*\\n* Base contract for TrenBoxManager, BorrowerOperations and StabilityPool. Contains global system\\nconstants and\\n * common functions.\\n */\\nabstract contract TrenBase is ITrenBase, BaseMath, OwnableUpgradeable, Addresses {\\n    // --- Gas compensation functions ---\\n\\n    // Returns the composite debt (drawn debt + gas compensation) of a trenBox, for the purpose of\\n    // ICR calculation\\n    function _getCompositeDebt(address _asset, uint256 _debt) internal view returns (uint256) {\\n        return _debt + IAdminContract(adminContract).getDebtTokenGasCompensation(_asset);\\n    }\\n\\n    function _getNetDebt(address _asset, uint256 _debt) internal view returns (uint256) {\\n        return _debt - IAdminContract(adminContract).getDebtTokenGasCompensation(_asset);\\n    }\\n\\n    // Return the amount of ETH to be drawn from a trenBox's collateral and sent as gas\\n    // compensation.\\n    function _getCollGasCompensation(\\n        address _asset,\\n        uint256 _entireColl\\n    )\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        return _entireColl / IAdminContract(adminContract).getPercentDivisor(_asset);\\n    }\\n\\n    function getEntireSystemColl(address _asset) public view returns (uint256 entireSystemColl) {\\n        uint256 activeColl = IActivePool(activePool).getAssetBalance(_asset);\\n        uint256 liquidatedColl = IDefaultPool(defaultPool).getAssetBalance(_asset);\\n        return activeColl + liquidatedColl;\\n    }\\n\\n    function getEntireSystemDebt(address _asset) public view returns (uint256 entireSystemDebt) {\\n        uint256 activeDebt = IActivePool(activePool).getDebtTokenBalance(_asset);\\n        uint256 closedDebt = IDefaultPool(defaultPool).getDebtTokenBalance(_asset);\\n        return activeDebt + closedDebt;\\n    }\\n\\n    function _getTCR(address _asset, uint256 _price) internal view returns (uint256 TCR) {\\n        uint256 entireSystemColl = getEntireSystemColl(_asset);\\n        uint256 entireSystemDebt = getEntireSystemDebt(_asset);\\n        TCR = TrenMath._computeCR(entireSystemColl, entireSystemDebt, _price);\\n    }\\n\\n    function _checkRecoveryMode(address _asset, uint256 _price) internal view returns (bool) {\\n        uint256 TCR = _getTCR(_asset, _price);\\n        return TCR < IAdminContract(adminContract).getCcr(_asset);\\n    }\\n\\n    function _requireUserAcceptsFee(\\n        uint256 _fee,\\n        uint256 _amount,\\n        uint256 _maxFeePercentage\\n    )\\n        internal\\n        view\\n    {\\n        uint256 feePercentage = (_fee * IAdminContract(adminContract).DECIMAL_PRECISION()) / _amount;\\n        require(feePercentage <= _maxFeePercentage, \\\"Fee exceeded provided maximum\\\");\\n    }\\n}\\n\",\"keccak256\":\"0x01642c6bd97e4fc6dd2992c28e8ff029ed7a19f4d3404895cd95a91f76c0ad31\",\"license\":\"MIT\"},\"contracts/Dependencies/TrenMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nlibrary TrenMath {\\n    uint256 internal constant DECIMAL_PRECISION = 1 ether;\\n\\n    uint256 internal constant EXPONENT_CAP = 525_600_000;\\n\\n    /* Precision for Nominal ICR (independent of price). Rationale for the value:\\n     *\\n     * - Making it \\u201ctoo high\\u201d could lead to overflows.\\n    * - Making it \\u201ctoo low\\u201d could lead to an ICR equal to zero, due to truncation from Solidity\\n    floor division.\\n     *\\n    * This value of 1e20 is chosen for safety: the NICR will only overflow for numerator > ~1e39\\n    ETH,\\n    * and will only truncate to 0 if the denominator is at least 1e20 times greater than the\\n    numerator.\\n     *\\n     */\\n    uint256 internal constant NICR_PRECISION = 1e20;\\n\\n    function _min(uint256 _a, uint256 _b) internal pure returns (uint256) {\\n        return (_a < _b) ? _a : _b;\\n    }\\n\\n    function _max(uint256 _a, uint256 _b) internal pure returns (uint256) {\\n        return (_a >= _b) ? _a : _b;\\n    }\\n\\n    /*\\n     * Multiply two decimal numbers and use normal rounding rules:\\n     * -round product up if 19'th mantissa digit >= 5\\n     * -round product down if 19'th mantissa digit < 5\\n     *\\n     * Used only inside the exponentiation, _decPow().\\n     */\\n    function decMul(uint256 x, uint256 y) internal pure returns (uint256 decProd) {\\n        uint256 prod_xy = x * y;\\n\\n        decProd = (prod_xy + (DECIMAL_PRECISION / 2)) / DECIMAL_PRECISION;\\n    }\\n\\n    /*\\n     * _decPow: Exponentiation function for 18-digit decimal base, and integer exponent n.\\n     *\\n     * Uses the efficient \\\"exponentiation by squaring\\\" algorithm. O(log(n)) complexity.\\n     *\\n     * Called by two functions that represent time in units of minutes:\\n     * 1) TrenBoxManager._calcDecayedBaseRate\\n     * 2) CommunityIssuance._getCumulativeIssuanceFraction\\n     *\\n     * The exponent is capped to avoid reverting due to overflow. The cap 525600000 equals\\n     * \\\"minutes in 1000 years\\\": 60 * 24 * 365 * 1000\\n     *\\n    * If a period of > 1000 years is ever used as an exponent in either of the above functions, the\\n    result will be\\n     * negligibly different from just passing the cap, since:\\n     *\\n     * In function 1), the decayed base rate will be 0 for 1000 years or > 1000 years\\n    * In function 2), the difference in tokens issued at 1000 years and any time > 1000 years, will\\n    be negligible\\n     */\\n    function _decPow(uint256 _base, uint256 _minutes) internal pure returns (uint256) {\\n        if (_minutes > EXPONENT_CAP) {\\n            _minutes = EXPONENT_CAP;\\n        } // cap to avoid overflow\\n\\n        if (_minutes == 0) {\\n            return DECIMAL_PRECISION;\\n        }\\n\\n        uint256 y = DECIMAL_PRECISION;\\n        uint256 x = _base;\\n        uint256 n = _minutes;\\n\\n        // Exponentiation-by-squaring\\n        while (n > 1) {\\n            if (n % 2 == 0) {\\n                x = decMul(x, x);\\n                n = n / 2;\\n            } else {\\n                // if (n % 2 != 0)\\n                y = decMul(x, y);\\n                x = decMul(x, x);\\n                n = (n - 1) / 2;\\n            }\\n        }\\n\\n        return decMul(x, y);\\n    }\\n\\n    function _getAbsoluteDifference(uint256 _a, uint256 _b) internal pure returns (uint256) {\\n        return (_a >= _b) ? _a - _b : _b - _a;\\n    }\\n\\n    function _computeNominalCR(uint256 _coll, uint256 _debt) internal pure returns (uint256) {\\n        if (_debt != 0) {\\n            return (_coll * NICR_PRECISION) / _debt;\\n        }\\n        // Return the maximal value for uint256 if the TrenBox has a debt of 0. Represents\\n        // \\\"infinite\\\"\\n        // CR.\\n        else {\\n            // if (_debt == 0)\\n            return type(uint256).max;\\n        }\\n    }\\n\\n    function _computeCR(\\n        uint256 _coll,\\n        uint256 _debt,\\n        uint256 _price\\n    )\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        if (_debt != 0) {\\n            uint256 newCollRatio = (_coll * _price) / _debt;\\n\\n            return newCollRatio;\\n        }\\n        // Return the maximal value for uint256 if the TrenBox has a debt of 0. Represents\\n        // \\\"infinite\\\"\\n        // CR.\\n        else {\\n            // if (_debt == 0)\\n            return type(uint256).max;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x55e26ab7b17d50d12ad55d8a2c4a931535a8316d346da8d72d56841846cde527\",\"license\":\"MIT\"},\"contracts/Interfaces/IActivePool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IPool } from \\\"./IPool.sol\\\";\\n\\ninterface IActivePool is IPool {\\n    // --- Events ---\\n\\n    event ActivePoolDebtUpdated(address _asset, uint256 _debtTokenAmount);\\n    event ActivePoolAssetBalanceUpdated(address _asset, uint256 _balance);\\n\\n    // --- Functions ---\\n\\n    function sendAsset(address _asset, address _account, uint256 _amount) external;\\n}\\n\",\"keccak256\":\"0x24cd7bd86a150c9c6fe86f48dc36d1ce8619e98d839794293721a0262b02b342\",\"license\":\"MIT\"},\"contracts/Interfaces/IAdminContract.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IActivePool } from \\\"./IActivePool.sol\\\";\\nimport { IDefaultPool } from \\\"./IDefaultPool.sol\\\";\\nimport { IPriceFeed } from \\\"./IPriceFeed.sol\\\";\\n\\ninterface IAdminContract {\\n    // Structs\\n    // ----------------------------------------------------------------------------------------------------------\\n\\n    struct CollateralParams {\\n        uint256 decimals;\\n        uint256 index; // Maps to token address in validCollateral[]\\n        bool active;\\n        uint256 borrowingFee;\\n        uint256 ccr;\\n        uint256 mcr;\\n        uint256 debtTokenGasCompensation; // Amount of debtToken to be locked in gas pool on opening\\n            // trenBoxes\\n        uint256 minNetDebt; // Minimum amount of net debtToken a trenBox must have\\n        uint256 mintCap;\\n        uint256 percentDivisor;\\n        uint256 redemptionFeeFloor;\\n        uint256 redemptionBlockTimestamp;\\n    }\\n\\n    // Custom Errors\\n    // ----------------------------------------------------------------------------------------------------\\n\\n    error SafeCheckError(string parameter, uint256 valueEntered, uint256 minValue, uint256 maxValue);\\n    error AdminContract__OnlyOwner();\\n    error AdminContract__OnlyTimelock();\\n    error AdminContract__CollateralAlreadyInitialized();\\n\\n    // Events\\n    // -----------------------------------------------------------------------------------------------------------\\n\\n    event CollateralAdded(address _collateral);\\n    event MCRChanged(uint256 oldMCR, uint256 newMCR);\\n    event CCRChanged(uint256 oldCCR, uint256 newCCR);\\n    event MinNetDebtChanged(uint256 oldMinNet, uint256 newMinNet);\\n    event PercentDivisorChanged(uint256 oldPercentDiv, uint256 newPercentDiv);\\n    event BorrowingFeeChanged(uint256 oldBorrowingFee, uint256 newBorrowingFee);\\n    event RedemptionFeeFloorChanged(uint256 oldRedemptionFeeFloor, uint256 newRedemptionFeeFloor);\\n    event MintCapChanged(uint256 oldMintCap, uint256 newMintCap);\\n    event RedemptionBlockTimestampChanged(address _collateral, uint256 _blockTimestamp);\\n\\n    // Functions\\n    // --------------------------------------------------------------------------------------------------------\\n\\n    function DECIMAL_PRECISION() external view returns (uint256);\\n\\n    function _100pct() external view returns (uint256);\\n\\n    function addNewCollateral(\\n        address _collateral,\\n        uint256 _debtTokenGasCompensation,\\n        uint256 _decimals\\n    )\\n        external;\\n\\n    function setCollateralParameters(\\n        address _collateral,\\n        uint256 borrowingFee,\\n        uint256 ccr,\\n        uint256 mcr,\\n        uint256 minNetDebt,\\n        uint256 mintCap,\\n        uint256 percentDivisor,\\n        uint256 redemptionFeeFloor\\n    )\\n        external;\\n\\n    function setMCR(address _collateral, uint256 newMCR) external;\\n\\n    function setCCR(address _collateral, uint256 newCCR) external;\\n\\n    function setMinNetDebt(address _collateral, uint256 minNetDebt) external;\\n\\n    function setPercentDivisor(address _collateral, uint256 precentDivisor) external;\\n\\n    function setBorrowingFee(address _collateral, uint256 borrowingFee) external;\\n\\n    function setRedemptionFeeFloor(address _collateral, uint256 redemptionFeeFloor) external;\\n\\n    function setMintCap(address _collateral, uint256 mintCap) external;\\n\\n    function setRedemptionBlockTimestamp(address _collateral, uint256 _blockTimestamp) external;\\n\\n    function getIndex(address _collateral) external view returns (uint256);\\n\\n    function getIsActive(address _collateral) external view returns (bool);\\n\\n    function getValidCollateral() external view returns (address[] memory);\\n\\n    function getMcr(address _collateral) external view returns (uint256);\\n\\n    function getCcr(address _collateral) external view returns (uint256);\\n\\n    function getDebtTokenGasCompensation(address _collateral) external view returns (uint256);\\n\\n    function getMinNetDebt(address _collateral) external view returns (uint256);\\n\\n    function getPercentDivisor(address _collateral) external view returns (uint256);\\n\\n    function getBorrowingFee(address _collateral) external view returns (uint256);\\n\\n    function getRedemptionFeeFloor(address _collateral) external view returns (uint256);\\n\\n    function getRedemptionBlockTimestamp(address _collateral) external view returns (uint256);\\n\\n    function getMintCap(address _collateral) external view returns (uint256);\\n\\n    function getTotalAssetDebt(address _asset) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x8284e5438e9411a75b0f2ca44f43fb946ee42aad11d548c9fff10de4aec7602f\",\"license\":\"MIT\"},\"contracts/Interfaces/ICollSurplusPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IDeposit } from \\\"./IDeposit.sol\\\";\\n\\ninterface ICollSurplusPool is IDeposit {\\n    // --- Events ---\\n\\n    event CollBalanceUpdated(address indexed _account, uint256 _newBalance);\\n    event AssetSent(address _to, uint256 _amount);\\n\\n    // --- Functions ---\\n\\n    function getAssetBalance(address _asset) external view returns (uint256);\\n\\n    function getCollateral(address _asset, address _account) external view returns (uint256);\\n\\n    function accountSurplus(address _asset, address _account, uint256 _amount) external;\\n\\n    function claimColl(address _asset, address _account) external;\\n}\\n\",\"keccak256\":\"0x47bd8cb30891e8dd1315b2b7b3a6e011de69dd67cf5bc6ff9fa732e1eda0552b\",\"license\":\"MIT\"},\"contracts/Interfaces/ICommunityIssuance.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\ninterface ICommunityIssuance {\\n    // --- Events ---\\n\\n    event TotalTRENIssuedUpdated(uint256 _totalTRENIssued);\\n\\n    // --- Functions ---\\n\\n    function issueTREN() external returns (uint256);\\n\\n    function sendTREN(address _account, uint256 _TRENamount) external;\\n\\n    function addFundToStabilityPool(uint256 _assignedSupply) external;\\n\\n    function addFundToStabilityPoolFrom(uint256 _assignedSupply, address _spender) external;\\n\\n    function setWeeklyTrenDistribution(uint256 _weeklyReward) external;\\n}\\n\",\"keccak256\":\"0xd051ab1a9c3572e62cc8ae69defa3cdda147280cb532a64a638542e5c993d1a8\",\"license\":\"MIT\"},\"contracts/Interfaces/IDebtToken.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport { IStabilityPool } from \\\"./IStabilityPool.sol\\\";\\n\\ninterface IDebtToken is IERC20 {\\n    // --- Events ---\\n\\n    event TokenBalanceUpdated(address _user, uint256 _amount);\\n    event EmergencyStopMintingCollateral(address _asset, bool state);\\n    event WhitelistChanged(address _whitelisted, bool whitelisted);\\n\\n    function emergencyStopMinting(address _asset, bool status) external;\\n\\n    function mint(address _asset, address _account, uint256 _amount) external;\\n\\n    function mintFromWhitelistedContract(uint256 _amount) external;\\n\\n    function burnFromWhitelistedContract(uint256 _amount) external;\\n\\n    function burn(address _account, uint256 _amount) external;\\n\\n    function sendToPool(address _sender, address poolAddress, uint256 _amount) external;\\n\\n    function returnFromPool(address poolAddress, address user, uint256 _amount) external;\\n\\n    function addWhitelist(address _address) external;\\n\\n    function removeWhitelist(address _address) external;\\n}\\n\",\"keccak256\":\"0xf2e2cf49ec210bd5e0078d96ae9dbd82eb6b89155ea11673b7b9b43b816e5e2b\",\"license\":\"MIT\"},\"contracts/Interfaces/IDefaultPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IPool } from \\\"./IPool.sol\\\";\\n\\ninterface IDefaultPool is IPool {\\n    // --- Events ---\\n    event DefaultPoolDebtUpdated(address _asset, uint256 _debt);\\n    event DefaultPoolAssetBalanceUpdated(address _asset, uint256 _balance);\\n\\n    // --- Functions ---\\n    function sendAssetToActivePool(address _asset, uint256 _amount) external;\\n}\\n\",\"keccak256\":\"0xe68312fe3192b59bea18d1c3f027842418c10ad647f3e282bace8417ba656327\",\"license\":\"MIT\"},\"contracts/Interfaces/IDeposit.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\ninterface IDeposit {\\n    function receivedERC20(address _asset, uint256 _amount) external;\\n}\\n\",\"keccak256\":\"0x2791510cd93e4aab04349c67b20fc52ac0af5ac9aed9b1c12e10743d1f1f7e61\",\"license\":\"MIT\"},\"contracts/Interfaces/IERC20Decimals.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\ninterface IERC20Decimals {\\n    function decimals() external view returns (uint8);\\n}\\n\",\"keccak256\":\"0xb784584e544d4f45a48dc5c68bea423dbb35bd4cfadc3007ee3ab64212ff71da\",\"license\":\"MIT\"},\"contracts/Interfaces/IPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IDeposit } from \\\"./IDeposit.sol\\\";\\n\\ninterface IPool is IDeposit {\\n    // --- Events ---\\n\\n    event AssetSent(address _to, address indexed _asset, uint256 _amount);\\n\\n    // --- Functions ---\\n\\n    function getAssetBalance(address _asset) external view returns (uint256);\\n\\n    function getDebtTokenBalance(address _asset) external view returns (uint256);\\n\\n    function increaseDebt(address _asset, uint256 _amount) external;\\n\\n    function decreaseDebt(address _asset, uint256 _amount) external;\\n}\\n\",\"keccak256\":\"0xa97342dc61c23cbb4be7afe6d224fa866fc28d7c007a6e940e8252dd9194b1aa\",\"license\":\"MIT\"},\"contracts/Interfaces/IPriceFeed.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\n/*\\n* @dev from\\nhttps://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol\\n */\\ninterface ChainlinkAggregatorV3Interface {\\n    function decimals() external view returns (uint8);\\n\\n    function latestRoundData()\\n        external\\n        view\\n        returns (\\n            uint80 roundId,\\n            int256 answer,\\n            uint256 startedAt,\\n            uint256 updatedAt,\\n            uint80 answeredInRound\\n        );\\n}\\n\\ninterface IPriceFeed {\\n    // Enums\\n    // ----------------------------------------------------------------------------------------------------------\\n\\n    enum ProviderType {\\n        Chainlink,\\n        API3\\n    }\\n\\n    // Structs\\n    // --------------------------------------------------------------------------------------------------------\\n\\n    struct OracleRecordV2 {\\n        address oracleAddress;\\n        ProviderType providerType;\\n        uint256 timeoutSeconds;\\n        uint256 decimals;\\n        bool isEthIndexed;\\n    }\\n\\n    /// @dev Deprecated, but retained for upgradeability\\n    struct OracleRecord {\\n        address chainLinkOracle;\\n        uint256 maxDeviationBetweenRounds;\\n        bool exists;\\n        bool isFeedWorking;\\n        bool isEthIndexed;\\n    }\\n\\n    /// @dev Deprecated, but retained for upgradeability\\n    struct PriceRecord {\\n        uint256 scaledPrice;\\n        uint256 timestamp;\\n    }\\n\\n    /// @dev Deprecated, but retained for upgradeability\\n    struct FeedResponse {\\n        uint80 roundId;\\n        int256 answer;\\n        uint256 timestamp;\\n        bool success;\\n        uint8 decimals;\\n    }\\n\\n    // Custom Errors\\n    // --------------------------------------------------------------------------------------------------\\n\\n    error PriceFeed__ExistingOracleRequired();\\n    error PriceFeed__InvalidDecimalsError();\\n    error PriceFeed__InvalidOracleResponseError(address token);\\n    error PriceFeed__TimelockOnlyError();\\n    error PriceFeed__UnknownAssetError();\\n\\n    // Events\\n    // ---------------------------------------------------------------------------------------------------------\\n\\n    event NewOracleRegistered(\\n        address token, address oracleAddress, bool isEthIndexed, bool isFallback\\n    );\\n\\n    // Functions\\n    // ------------------------------------------------------------------------------------------------------\\n\\n    function fetchPrice(address _token) external view returns (uint256);\\n\\n    function setOracle(\\n        address _token,\\n        address _oracle,\\n        ProviderType _type,\\n        uint256 _timeoutSeconds,\\n        bool _isEthIndexed,\\n        bool _isFallback\\n    )\\n        external;\\n}\\n\",\"keccak256\":\"0xf0c82fbfb780e4eff5d3fce5a6b38af415f42a2daec9c3bfb4cfa5d17764532c\",\"license\":\"MIT\"},\"contracts/Interfaces/ISortedTrenBoxes.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\ninterface ISortedTrenBoxes {\\n    // --- Events ---\\n\\n    event NodeAdded(address indexed _asset, address _id, uint256 _NICR);\\n    event NodeRemoved(address indexed _asset, address _id);\\n\\n    // --- Functions ---\\n\\n    function insert(\\n        address _asset,\\n        address _id,\\n        uint256 _ICR,\\n        address _prevId,\\n        address _nextId\\n    )\\n        external;\\n\\n    function remove(address _asset, address _id) external;\\n\\n    function reInsert(\\n        address _asset,\\n        address _id,\\n        uint256 _newICR,\\n        address _prevId,\\n        address _nextId\\n    )\\n        external;\\n\\n    function contains(address _asset, address _id) external view returns (bool);\\n\\n    function isEmpty(address _asset) external view returns (bool);\\n\\n    function getSize(address _asset) external view returns (uint256);\\n\\n    function getFirst(address _asset) external view returns (address);\\n\\n    function getLast(address _asset) external view returns (address);\\n\\n    function getNext(address _asset, address _id) external view returns (address);\\n\\n    function getPrev(address _asset, address _id) external view returns (address);\\n\\n    function validInsertPosition(\\n        address _asset,\\n        uint256 _ICR,\\n        address _prevId,\\n        address _nextId\\n    )\\n        external\\n        view\\n        returns (bool);\\n\\n    function findInsertPosition(\\n        address _asset,\\n        uint256 _ICR,\\n        address _prevId,\\n        address _nextId\\n    )\\n        external\\n        view\\n        returns (address, address);\\n}\\n\",\"keccak256\":\"0x031de1954b0e18ca6efbd25a54449a1561b537361341971d050e44c34e150434\",\"license\":\"MIT\"},\"contracts/Interfaces/IStabilityPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IDeposit } from \\\"./IDeposit.sol\\\";\\n\\ninterface IStabilityPool is IDeposit {\\n    // --- Structs ---\\n\\n    struct Snapshots {\\n        mapping(address => uint256) S;\\n        uint256 P;\\n        uint256 G;\\n        uint128 scale;\\n        uint128 epoch;\\n    }\\n\\n    // --- Events ---\\n\\n    event CommunityIssuanceAddressChanged(address newAddress);\\n    event DepositSnapshotUpdated(address indexed _depositor, uint256 _P, uint256 _G);\\n    event SystemSnapshotUpdated(uint256 _P, uint256 _G);\\n\\n    event AssetSent(address _asset, address _to, uint256 _amount);\\n    event GainsWithdrawn(\\n        address indexed _depositor,\\n        address[] _collaterals,\\n        uint256[] _amounts,\\n        uint256 _debtTokenLoss\\n    );\\n    event TRENPaidToDepositor(address indexed _depositor, uint256 _TREN);\\n    event StabilityPoolAssetBalanceUpdated(address _asset, uint256 _newBalance);\\n    event StabilityPoolDebtTokenBalanceUpdated(uint256 _newBalance);\\n    event StakeChanged(uint256 _newSystemStake, address _depositor);\\n    event UserDepositChanged(address indexed _depositor, uint256 _newDeposit);\\n\\n    event P_Updated(uint256 _P);\\n    event S_Updated(address _asset, uint256 _S, uint128 _epoch, uint128 _scale);\\n    event G_Updated(uint256 _G, uint128 _epoch, uint128 _scale);\\n    event EpochUpdated(uint128 _currentEpoch);\\n    event ScaleUpdated(uint128 _currentScale);\\n\\n    // --- Errors ---\\n\\n    error StabilityPool__ActivePoolOnly(address sender, address expected);\\n    error StabilityPool__AdminContractOnly(address sender, address expected);\\n    error StabilityPool__TrenBoxManagerOnly(address sender, address expected);\\n    error StabilityPool__ArrayNotInAscendingOrder();\\n\\n    // --- Functions ---\\n\\n    function addCollateralType(address _collateral) external;\\n\\n    /*\\n     * Initial checks:\\n     * - _amount is not zero\\n     * ---\\n    * - Triggers a TREN issuance, based on time passed since the last issuance. The TREN issuance is\\n    shared between *all* depositors.\\n     * - Sends depositor's accumulated gains (TREN, assets) to depositor\\n     */\\n    function provideToSP(uint256 _amount, address[] calldata _assets) external;\\n\\n    /*\\n     * Initial checks:\\n     * - _amount is zero or there are no under collateralized trenBoxes left in the system\\n     * - User has a non zero deposit\\n     * ---\\n    * - Triggers a TREN issuance, based on time passed since the last issuance. The TREN issuance is\\n    shared between *all* depositors.\\n     * - Sends all depositor's accumulated gains (TREN, assets) to depositor\\n     * - Decreases deposit's stake, and takes new snapshots.\\n     *\\n     * If _amount > userDeposit, the user withdraws all of their compounded deposit.\\n     */\\n    function withdrawFromSP(uint256 _amount, address[] calldata _assets) external;\\n\\n    /*\\n    Initial checks:\\n    * - Caller is TrenBoxManager\\n    * ---\\n    * Cancels out the specified debt against the debt token contained in the Stability Pool (as far\\n    as possible)\\n    * and transfers the TrenBox's collateral from ActivePool to StabilityPool.\\n    * Only called by liquidation functions in the TrenBoxManager.\\n    */\\n    function offset(uint256 _debt, address _asset, uint256 _coll) external;\\n\\n    /*\\n    * Returns debt tokens held in the pool. Changes when users deposit/withdraw, and when TrenBox\\n    debt is offset.\\n     */\\n    function getTotalDebtTokenDeposits() external view returns (uint256);\\n\\n    /*\\n     * Calculates the asset gains earned by the deposit since its last snapshots were taken.\\n     */\\n    function getDepositorGains(\\n        address _depositor,\\n        address[] calldata _assets\\n    )\\n        external\\n        view\\n        returns (address[] memory, uint256[] memory);\\n\\n    /*\\n     * Calculate the TREN gain earned by a deposit since its last snapshots were taken.\\n     */\\n    function getDepositorTRENGain(address _depositor) external view returns (uint256);\\n\\n    /*\\n     * Return the user's compounded deposits.\\n     */\\n    function getCompoundedDebtTokenDeposits(address _depositor) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0xe6de08cb9a9ddb600e67363917078a6778b683187a559a53b0c7c24759ca7a28\",\"license\":\"MIT\"},\"contracts/Interfaces/ITrenBase.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\ninterface ITrenBase {\\n    struct Colls {\\n        // tokens and amounts should be the same length\\n        address[] tokens;\\n        uint256[] amounts;\\n    }\\n}\\n\",\"keccak256\":\"0x1cfd5cec5536fa56e0440efa542baa6df6a842dddd4c0f763e02a31d3ec060d4\",\"license\":\"MIT\"},\"contracts/Interfaces/ITrenBoxManager.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { IActivePool } from \\\"./IActivePool.sol\\\";\\nimport { ICollSurplusPool } from \\\"./ICollSurplusPool.sol\\\";\\nimport { IDebtToken } from \\\"./IDebtToken.sol\\\";\\nimport { IDefaultPool } from \\\"./IDefaultPool.sol\\\";\\nimport { ITrenBase } from \\\"./ITrenBase.sol\\\";\\nimport { ISortedTrenBoxes } from \\\"./ISortedTrenBoxes.sol\\\";\\nimport { IStabilityPool } from \\\"./IStabilityPool.sol\\\";\\n\\ninterface ITrenBoxManager is ITrenBase {\\n    // Enums\\n    // ------------------------------------------------------------------------------------------------------------\\n\\n    enum Status {\\n        nonExistent,\\n        active,\\n        closedByOwner,\\n        closedByLiquidation,\\n        closedByRedemption\\n    }\\n\\n    enum TrenBoxManagerOperation {\\n        applyPendingRewards,\\n        liquidateInNormalMode,\\n        liquidateInRecoveryMode,\\n        redeemCollateral\\n    }\\n\\n    // Events\\n    // -----------------------------------------------------------------------------------------------------------\\n\\n    event BaseRateUpdated(address indexed _asset, uint256 _baseRate);\\n    event LastFeeOpTimeUpdated(address indexed _asset, uint256 _lastFeeOpTime);\\n    event TotalStakesUpdated(address indexed _asset, uint256 _newTotalStakes);\\n    event SystemSnapshotsUpdated(\\n        address indexed _asset, uint256 _totalStakesSnapshot, uint256 _totalCollateralSnapshot\\n    );\\n    event LTermsUpdated(address indexed _asset, uint256 _L_Coll, uint256 _L_Debt);\\n    event TrenBoxSnapshotsUpdated(address indexed _asset, uint256 _L_Coll, uint256 _L_Debt);\\n    event TrenBoxIndexUpdated(address indexed _asset, address _borrower, uint256 _newIndex);\\n\\n    event TrenBoxUpdated(\\n        address indexed _asset,\\n        address indexed _borrower,\\n        uint256 _debt,\\n        uint256 _coll,\\n        uint256 _stake,\\n        TrenBoxManagerOperation _operation\\n    );\\n\\n    // Custom Errors\\n    // ----------------------------------------------------------------------------------------------------\\n\\n    error TrenBoxManager__FeeBiggerThanAssetDraw();\\n    error TrenBoxManager__OnlyOneTrenBox();\\n\\n    error TrenBoxManager__OnlyTrenBoxManagerOperations();\\n    error TrenBoxManager__OnlyBorrowerOperations();\\n    error TrenBoxManager__OnlyTrenBoxManagerOperationsOrBorrowerOperations();\\n\\n    // Structs\\n    // ----------------------------------------------------------------------------------------------------------\\n\\n    struct TrenBox {\\n        uint256 debt;\\n        uint256 coll;\\n        uint256 stake;\\n        Status status;\\n        uint128 arrayIndex;\\n    }\\n\\n    // Functions\\n    // --------------------------------------------------------------------------------------------------------\\n\\n    function executeFullRedemption(address _asset, address _borrower, uint256 _newColl) external;\\n\\n    function executePartialRedemption(\\n        address _asset,\\n        address _borrower,\\n        uint256 _newDebt,\\n        uint256 _newColl,\\n        uint256 _newNICR,\\n        address _upperPartialRedemptionHint,\\n        address _lowerPartialRedemptionHint\\n    )\\n        external;\\n\\n    function getTrenBoxOwnersCount(address _asset) external view returns (uint256);\\n\\n    function getTrenBoxFromTrenBoxOwnersArray(\\n        address _asset,\\n        uint256 _index\\n    )\\n        external\\n        view\\n        returns (address);\\n\\n    function getNominalICR(address _asset, address _borrower) external view returns (uint256);\\n\\n    function getCurrentICR(\\n        address _asset,\\n        address _borrower,\\n        uint256 _price\\n    )\\n        external\\n        view\\n        returns (uint256);\\n\\n    function updateStakeAndTotalStakes(\\n        address _asset,\\n        address _borrower\\n    )\\n        external\\n        returns (uint256);\\n\\n    function updateTrenBoxRewardSnapshots(address _asset, address _borrower) external;\\n\\n    function addTrenBoxOwnerToArray(\\n        address _asset,\\n        address _borrower\\n    )\\n        external\\n        returns (uint256 index);\\n\\n    function applyPendingRewards(address _asset, address _borrower) external;\\n\\n    function getPendingAssetReward(\\n        address _asset,\\n        address _borrower\\n    )\\n        external\\n        view\\n        returns (uint256);\\n\\n    function getPendingDebtTokenReward(\\n        address _asset,\\n        address _borrower\\n    )\\n        external\\n        view\\n        returns (uint256);\\n\\n    function hasPendingRewards(address _asset, address _borrower) external view returns (bool);\\n\\n    function getEntireDebtAndColl(\\n        address _asset,\\n        address _borrower\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 debt,\\n            uint256 coll,\\n            uint256 pendingDebtTokenReward,\\n            uint256 pendingAssetReward\\n        );\\n\\n    function closeTrenBox(address _asset, address _borrower) external;\\n\\n    function closeTrenBoxLiquidation(address _asset, address _borrower) external;\\n\\n    function removeStake(address _asset, address _borrower) external;\\n\\n    function getRedemptionRate(address _asset) external view returns (uint256);\\n\\n    function getRedemptionRateWithDecay(address _asset) external view returns (uint256);\\n\\n    function getRedemptionFeeWithDecay(\\n        address _asset,\\n        uint256 _assetDraw\\n    )\\n        external\\n        view\\n        returns (uint256);\\n\\n    function getBorrowingRate(address _asset) external view returns (uint256);\\n\\n    function getBorrowingFee(\\n        address _asset,\\n        uint256 _debtTokenAmount\\n    )\\n        external\\n        view\\n        returns (uint256);\\n\\n    function getTrenBoxStatus(address _asset, address _borrower) external view returns (uint256);\\n\\n    function getTrenBoxStake(address _asset, address _borrower) external view returns (uint256);\\n\\n    function getTrenBoxDebt(address _asset, address _borrower) external view returns (uint256);\\n\\n    function getTrenBoxColl(address _asset, address _borrower) external view returns (uint256);\\n\\n    function setTrenBoxStatus(address _asset, address _borrower, uint256 num) external;\\n\\n    function increaseTrenBoxColl(\\n        address _asset,\\n        address _borrower,\\n        uint256 _collIncrease\\n    )\\n        external\\n        returns (uint256);\\n\\n    function decreaseTrenBoxColl(\\n        address _asset,\\n        address _borrower,\\n        uint256 _collDecrease\\n    )\\n        external\\n        returns (uint256);\\n\\n    function increaseTrenBoxDebt(\\n        address _asset,\\n        address _borrower,\\n        uint256 _debtIncrease\\n    )\\n        external\\n        returns (uint256);\\n\\n    function decreaseTrenBoxDebt(\\n        address _asset,\\n        address _borrower,\\n        uint256 _collDecrease\\n    )\\n        external\\n        returns (uint256);\\n\\n    function getTCR(address _asset, uint256 _price) external view returns (uint256);\\n\\n    function checkRecoveryMode(address _asset, uint256 _price) external returns (bool);\\n\\n    function isValidFirstRedemptionHint(\\n        address _asset,\\n        address _firstRedemptionHint,\\n        uint256 _price\\n    )\\n        external\\n        returns (bool);\\n\\n    function updateBaseRateFromRedemption(\\n        address _asset,\\n        uint256 _assetDrawn,\\n        uint256 _price,\\n        uint256 _totalDebtTokenSupply\\n    )\\n        external\\n        returns (uint256);\\n\\n    function getRedemptionFee(address _asset, uint256 _assetDraw) external view returns (uint256);\\n\\n    function finalizeRedemption(\\n        address _asset,\\n        address _receiver,\\n        uint256 _debtToRedeem,\\n        uint256 _fee,\\n        uint256 _totalRedemptionRewards\\n    )\\n        external;\\n\\n    function redistributeDebtAndColl(\\n        address _asset,\\n        uint256 _debt,\\n        uint256 _coll,\\n        uint256 _debtToOffset,\\n        uint256 _collToSendToStabilityPool\\n    )\\n        external;\\n\\n    function updateSystemSnapshots_excludeCollRemainder(\\n        address _asset,\\n        uint256 _collRemainder\\n    )\\n        external;\\n\\n    function movePendingTrenBoxRewardsToActivePool(\\n        address _asset,\\n        uint256 _debtTokenAmount,\\n        uint256 _assetAmount\\n    )\\n        external;\\n\\n    function isTrenBoxActive(address _asset, address _borrower) external view returns (bool);\\n\\n    function sendGasCompensation(\\n        address _asset,\\n        address _liquidator,\\n        uint256 _debtTokenAmount,\\n        uint256 _assetAmount\\n    )\\n        external;\\n\\n    function getNetDebt(address _asset, uint256 _debt) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x4ff266872e48230a0d9f0a517023d9eabcaf12658e873f8685c5a54b340a55c8\",\"license\":\"MIT\"},\"contracts/StabilityPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.23;\\n\\nimport { SafeERC20, IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\nimport { ReentrancyGuardUpgradeable } from\\n    \\\"@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol\\\";\\nimport { UUPSUpgradeable } from\\n    \\\"@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol\\\";\\n\\nimport { TrenBase } from \\\"./Dependencies/TrenBase.sol\\\";\\nimport { SafetyTransfer } from \\\"./Dependencies/SafetyTransfer.sol\\\";\\nimport { TrenMath } from \\\"./Dependencies/TrenMath.sol\\\";\\n\\nimport { IAdminContract } from \\\"./Interfaces/IAdminContract.sol\\\";\\nimport { IActivePool } from \\\"./Interfaces/IActivePool.sol\\\";\\nimport { IStabilityPool } from \\\"./Interfaces/IStabilityPool.sol\\\";\\nimport { IDebtToken } from \\\"./Interfaces/IDebtToken.sol\\\";\\nimport { ITrenBoxManager } from \\\"./Interfaces/ITrenBoxManager.sol\\\";\\nimport { ICommunityIssuance } from \\\"./Interfaces/ICommunityIssuance.sol\\\";\\n\\n/**\\n * @title The Stability Pool holds debt tokens deposited by Stability Pool depositors.\\n * @dev When a trenBox is liquidated, then depending on system conditions, some of its debt tokens\\n * debt gets offset with\\n * debt tokens in the Stability Pool: that is, the offset debt evaporates, and an equal amount of\\n * debt tokens tokens in the Stability Pool is burned.\\n *\\n * Thus, a liquidation causes each depositor to receive a debt tokens loss, in proportion to their\\n * deposit as a share of total deposits.\\n * They also receive an Collateral gain, as the amount of collateral of the liquidated trenBox is\\n * distributed among Stability depositors,\\n * in the same proportion.\\n *\\n * When a liquidation occurs, it depletes every deposit by the same fraction: for example, a\\n * liquidation that depletes 40%\\n * of the total debt tokens in the Stability Pool, depletes 40% of each deposit.\\n *\\n * A deposit that has experienced a series of liquidations is termed a \\\"compounded deposit\\\": each\\n * liquidation depletes the deposit,\\n * multiplying it by some factor in range ]0,1[\\n *\\n *\\n * --- IMPLEMENTATION ---\\n *\\n * We use a highly scalable method of tracking deposits and Collateral gains that has O(1)\\n * complexity.\\n *\\n * When a liquidation occurs, rather than updating each depositor's deposit and Collateral gain, we\\n * simply update two state variables:\\n * a product P, and a sum S. These are kept track for each type of collateral.\\n *\\n * A mathematical manipulation allows us to factor out the initial deposit, and accurately track all\\n * depositors' compounded deposits\\n * and accumulated Collateral amount gains over time, as liquidations occur, using just these two\\n * variables P and S. When depositors join the\\n * Stability Pool, they get a snapshot of the latest P and S: P_t and S_t, respectively.\\n *\\n * The formula for a depositor's accumulated Collateral amount gain is derived here:\\n * https://github.com/liquity/dev/blob/main/papers/Scalable_Reward_Distribution_with_Compounding_Stakes.pdf\\n *\\n * For a given deposit d_t, the ratio P/P_t tells us the factor by which a deposit has decreased\\n * since it joined the Stability Pool,\\n * and the term d_t * (S - S_t)/P_t gives us the deposit's total accumulated Collateral amount gain.\\n *\\n * Each liquidation updates the product P and sum S. After a series of liquidations, a compounded\\n * deposit and corresponding Collateral amount gain\\n * can be calculated using the initial deposit, the depositor\\u2019s snapshots of P and S, and the\\n * latest values of P and S.\\n *\\n * Any time a depositor updates their deposit (withdrawal, top-up) their accumulated Collateral\\n * amount gain is paid out, their new deposit is recorded\\n * (based on their latest compounded deposit and modified by the withdrawal/top-up), and they\\n * receive new snapshots of the latest P and S.\\n * Essentially, they make a fresh deposit that overwrites the old one.\\n *\\n *\\n * --- SCALE FACTOR ---\\n *\\n * Since P is a running product in range ]0,1] that is always-decreasing, it should never reach 0\\n * when multiplied by a number in range ]0,1[.\\n * Unfortunately, Solidity floor division always reaches 0, sooner or later.\\n *\\n * A series of liquidations that nearly empty the Pool (and thus each multiply P by a very small\\n * number in range ]0,1[ ) may push P\\n * to its 18 digit decimal limit, and round it to 0, when in fact the Pool hasn't been emptied: this\\n * would break deposit tracking.\\n *\\n * So, to track P accurately, we use a scale factor: if a liquidation would cause P to decrease to\\n * <1e-9 (and be rounded to 0 by Solidity),\\n * we first multiply P by 1e9, and increment a currentScale factor by 1.\\n *\\n * The added benefit of using 1e9 for the scale factor (rather than 1e18) is that it ensures\\n * negligible precision loss close to the\\n * scale boundary: when P is at its minimum value of 1e9, the relative precision loss in P due to\\n * floor division is only on the\\n * order of 1e-9.\\n *\\n * --- EPOCHS ---\\n *\\n * Whenever a liquidation fully empties the Stability Pool, all deposits should become 0. However,\\n * setting P to 0 would make P be 0\\n * forever, and break all future reward calculations.\\n *\\n * So, every time the Stability Pool is emptied by a liquidation, we reset P = 1 and currentScale =\\n * 0, and increment the currentEpoch by 1.\\n *\\n * --- TRACKING DEPOSIT OVER SCALE CHANGES AND EPOCHS ---\\n *\\n * When a deposit is made, it gets snapshots of the currentEpoch and the currentScale.\\n *\\n * When calculating a compounded deposit, we compare the current epoch to the deposit's epoch\\n * snapshot. If the current epoch is newer,\\n * then the deposit was present during a pool-emptying liquidation, and necessarily has been\\n * depleted to 0.\\n *\\n * Otherwise, we then compare the current scale to the deposit's scale snapshot. If they're equal,\\n * the compounded deposit is given by d_t * P/P_t.\\n * If it spans one scale change, it is given by d_t * P/(P_t * 1e9). If it spans more than one scale\\n * change, we define the compounded deposit\\n * as 0, since it is now less than 1e-9'th of its initial value (e.g. a deposit of 1 billion debt\\n * tokens has depleted to < 1 debt token).\\n *\\n *\\n *  --- TRACKING DEPOSITOR'S COLLATERAL AMOUNT GAIN OVER SCALE CHANGES AND EPOCHS ---\\n *\\n * In the current epoch, the latest value of S is stored upon each scale change, and the mapping\\n * (scale -> S) is stored for each epoch.\\n *\\n * This allows us to calculate a deposit's accumulated Collateral amount gain, during the epoch in\\n * which the deposit was non-zero and earned Collateral amount.\\n *\\n * We calculate the depositor's accumulated Collateral amount gain for the scale at which they made\\n * the deposit, using the Collateral amount gain formula:\\n * e_1 = d_t * (S - S_t) / P_t\\n *\\n * and also for scale after, taking care to divide the latter by a factor of 1e9:\\n * e_2 = d_t * S / (P_t * 1e9)\\n *\\n * The gain in the second scale will be full, as the starting point was in the previous scale, thus\\n * no need to subtract anything.\\n * The deposit therefore was present for reward events from the beginning of that second scale.\\n *\\n *        S_i-S_t + S_{i+1}\\n *      .<--------.------------>\\n *      .         .\\n *      . S_i     .   S_{i+1}\\n *   <--.-------->.<----------->\\n *   S_t.         .\\n *   <->.         .\\n *      t         .\\n *  |---+---------|-------------|-----...\\n *         i            i+1\\n *\\n * The sum of (e_1 + e_2) captures the depositor's total accumulated Collateral amount gain,\\n * handling the case where their\\n * deposit spanned one scale change. We only care about gains across one scale change, since the\\n * compounded\\n * deposit is defined as being 0 once it has spanned more than one scale change.\\n *\\n *\\n * --- UPDATING P WHEN A LIQUIDATION OCCURS ---\\n *\\n * Please see the implementation spec in the proof document, which closely follows on from the\\n * compounded deposit / Collateral amount gain derivations:\\n * https://github.com/liquity/liquity/blob/master/papers/Scalable_Reward_Distribution_with_Compounding_Stakes.pdf\\n *\\n *\\n * --- Gravita ISSUANCE TO STABILITY POOL DEPOSITORS ---\\n *\\n * An Gravita issuance event occurs at every deposit operation, and every liquidation.\\n *\\n * All deposits earn a share of the issued Gravita in proportion to the deposit as a share of total\\n * deposits.\\n *\\n * Please see the system Readme for an overview:\\n * https://github.com/liquity/dev/blob/main/README.md#lqty-issuance-to-stability-providers\\n *\\n * We use the same mathematical product-sum approach to track Gravita gains for depositors, where\\n * 'G' is the sum corresponding to Gravita gains.\\n * The product P (and snapshot P_t) is re-used, as the ratio P/P_t tracks a deposit's depletion due\\n * to liquidations.\\n *\\n */\\ncontract StabilityPool is ReentrancyGuardUpgradeable, UUPSUpgradeable, TrenBase, IStabilityPool {\\n    using SafeERC20 for IERC20;\\n\\n    string public constant NAME = \\\"StabilityPool\\\";\\n\\n    // Tracker for debtToken held in the pool. Changes when users deposit/withdraw, and when TrenBox\\n    // debt is offset.\\n    uint256 internal totalDebtTokenDeposits;\\n\\n    // totalColl.tokens and totalColl.amounts should be the same length and\\n    // always be the same length as IAdminContract(adminContract).validCollaterals().\\n    // Anytime a new collateral is added to AdminContract, both lists are lengthened\\n    Colls internal totalColl;\\n\\n    mapping(address => uint256) public deposits; // depositor address -> deposit amount\\n\\n    /*\\n     * depositSnapshots maintains an entry for each depositor\\n     * that tracks P, S, G, scale, and epoch.\\n     * depositor's snapshot is updated only when they\\n     * deposit or withdraw from stability pool\\n     * depositSnapshots are used to allocate TREN rewards, calculate compoundedDepositAmount\\n     * and to calculate how much Collateral amount the depositor is entitled to\\n     */\\n    mapping(address => Snapshots) public depositSnapshots; // depositor address -> snapshots struct\\n\\n    /*  Product 'P': Running product by which to multiply an initial deposit, in order to find the\\n    current compounded deposit,\\n    * after a series of liquidations have occurred, each of which cancel some debt tokens debt with\\n    the deposit.\\n     *\\n     * During its lifetime, a deposit's value evolves from d_t to d_t * P / P_t , where P_t\\n     * is the snapshot of P taken at the instant the deposit was made. 18-digit decimal.\\n     */\\n    uint256 public P;\\n\\n    uint256 public constant SCALE_FACTOR = 1e9;\\n\\n    // Each time the scale of P shifts by SCALE_FACTOR, the scale is incremented by 1\\n    uint128 public currentScale;\\n\\n    // With each offset that fully empties the Pool, the epoch is incremented by 1\\n    uint128 public currentEpoch;\\n\\n    /* Collateral amount Gain sum 'S': During its lifetime, each deposit d_t earns an Collateral\\n    amount gain of ( d_t * [S - S_t] )/P_t,\\n     * where S_t is the depositor's snapshot of S taken at the time t when the deposit was made.\\n     *\\n     * The 'S' sums are stored in a nested mapping (epoch => scale => sum):\\n     *\\n     * - The inner mapping records the (scale => sum)\\n     * - The middle mapping records (epoch => (scale => sum))\\n     * - The outer mapping records (collateralType => (epoch => (scale => sum)))\\n     */\\n    mapping(address => mapping(uint128 => mapping(uint128 => uint256))) public epochToScaleToSum;\\n\\n    /*\\n    * Similarly, the sum 'G' is used to calculate TREN gains. During it's lifetime, each deposit d_t\\n    earns a TREN gain of\\n    *  ( d_t * [G - G_t] )/P_t, where G_t is the depositor's snapshot of G taken at time t when  the\\n    deposit was made.\\n     *\\n    *  TREN reward events occur are triggered by depositor operations (new deposit, topup,\\n    withdrawal), and liquidations.\\n    *  In each case, the TREN reward is issued (i.e. G is updated), before other state changes are\\n    made.\\n     */\\n    mapping(uint128 => mapping(uint128 => uint256)) public epochToScaleToG;\\n\\n    // Error tracker for the error correction in the TREN issuance calculation\\n    uint256 public lastTRENError;\\n    // Error trackers for the error correction in the offset calculation\\n    uint256[] public lastAssetError_Offset;\\n    uint256 public lastDebtTokenLossError_Offset;\\n\\n    // --- Initializer ---\\n\\n    function initialize() public initializer {\\n        address initialOwner = _msgSender();\\n\\n        __Ownable_init(initialOwner);\\n        __ReentrancyGuard_init();\\n        __UUPSUpgradeable_init();\\n        P = DECIMAL_PRECISION;\\n    }\\n\\n    /**\\n     * @notice add a collateral\\n     * @dev should be called anytime a collateral is added to controller\\n     * keeps all arrays the correct length\\n     * @param _collateral address of collateral to add\\n     */\\n    function addCollateralType(address _collateral) external onlyAdminContract {\\n        lastAssetError_Offset.push(0);\\n        totalColl.tokens.push(_collateral);\\n        totalColl.amounts.push(0);\\n    }\\n\\n    /**\\n     * @notice get collateral balance in the SP for a given collateral type\\n     * @dev Not necessarily this contract's actual collateral balance;\\n     * just what is stored in state\\n     * @param _collateral address of the collateral to get amount of\\n     * @return amount of this specific collateral\\n     */\\n    function getCollateral(address _collateral) external view returns (uint256) {\\n        uint256 collateralIndex = IAdminContract(adminContract).getIndex(_collateral);\\n        return totalColl.amounts[collateralIndex];\\n    }\\n\\n    /**\\n     * @notice getter function\\n     * @dev gets collateral from totalColl\\n     * This is not necessarily the contract's actual collateral balance;\\n     * just what is stored in state\\n     * @return tokens and amounts\\n     */\\n    function getAllCollateral() external view returns (address[] memory, uint256[] memory) {\\n        return (totalColl.tokens, totalColl.amounts);\\n    }\\n\\n    /**\\n     * @notice getter function\\n     * @dev gets total debtToken from deposits\\n     * @return totalDebtTokenDeposits\\n     */\\n    function getTotalDebtTokenDeposits() external view override returns (uint256) {\\n        return totalDebtTokenDeposits;\\n    }\\n\\n    // --- External Depositor Functions ---\\n\\n    /**\\n     * @notice Used to provide debt tokens to the stability Pool\\n     * @dev Triggers a TREN issuance, based on time passed since the last issuance.\\n     * The TREN issuance is shared between *all* depositors\\n     * - Sends depositor's accumulated gains (TREN, collateral assets) to depositor\\n     * - Increases deposit stake, and takes new snapshots for each.\\n     * @param _amount amount of debtToken provided\\n     * @param _assets an array of collaterals to be claimed.\\n     * Skipping a collateral forfeits the available rewards (can be useful for gas optimizations)\\n     */\\n    function provideToSP(\\n        uint256 _amount,\\n        address[] calldata _assets\\n    )\\n        external\\n        override\\n        nonReentrant\\n    {\\n        _requireNonZeroAmount(_amount);\\n\\n        uint256 initialDeposit = deposits[msg.sender];\\n\\n        _triggerTRENIssuance();\\n\\n        (address[] memory gainAssets, uint256[] memory gainAmounts) =\\n            getDepositorGains(msg.sender, _assets);\\n        uint256 compoundedDeposit = getCompoundedDebtTokenDeposits(msg.sender);\\n        uint256 loss = initialDeposit - compoundedDeposit; // Needed only for event log\\n\\n        // First pay out any TREN gains\\n        _payOutTRENGains(msg.sender);\\n\\n        // just pulls debtTokens into the pool, updates totalDeposits variable for the stability\\n        // pool and throws an event\\n        _sendToStabilityPool(msg.sender, _amount);\\n\\n        uint256 newDeposit = compoundedDeposit + _amount;\\n        _updateDepositAndSnapshots(msg.sender, newDeposit);\\n        emit UserDepositChanged(msg.sender, newDeposit);\\n\\n        emit GainsWithdrawn(msg.sender, gainAssets, gainAmounts, loss); // loss required for event\\n            // log\\n\\n        // send any collateral gains accrued to the depositor\\n        _sendGainsToDepositor(msg.sender, gainAssets, gainAmounts);\\n    }\\n\\n    /**\\n     * @param _amount amount of debtToken to withdraw\\n     * @param _assets an array of collaterals to be claimed.\\n     */\\n    function withdrawFromSP(uint256 _amount, address[] calldata _assets) external {\\n        (address[] memory assets, uint256[] memory amounts) = _withdrawFromSP(_amount, _assets);\\n        _sendGainsToDepositor(msg.sender, assets, amounts);\\n    }\\n\\n    /**\\n     * @notice withdraw from the stability pool\\n     * @param _amount debtToken amount to withdraw\\n     * @param _assets an array of collaterals to be claimed.\\n     * @return assets address of assets withdrawn, amount of asset withdrawn\\n     */\\n    function _withdrawFromSP(\\n        uint256 _amount,\\n        address[] calldata _assets\\n    )\\n        internal\\n        returns (address[] memory assets, uint256[] memory amounts)\\n    {\\n        uint256 initialDeposit = deposits[msg.sender];\\n        _requireUserHasDeposit(initialDeposit);\\n\\n        _triggerTRENIssuance();\\n\\n        (assets, amounts) = getDepositorGains(msg.sender, _assets);\\n\\n        uint256 compoundedDeposit = getCompoundedDebtTokenDeposits(msg.sender);\\n\\n        uint256 debtTokensToWithdraw = TrenMath._min(_amount, compoundedDeposit);\\n        uint256 loss = initialDeposit - compoundedDeposit; // Needed only for event log\\n\\n        // First pay out any TREN gains\\n        _payOutTRENGains(msg.sender);\\n        _sendToDepositor(msg.sender, debtTokensToWithdraw);\\n\\n        // Update deposit\\n        uint256 newDeposit = compoundedDeposit - debtTokensToWithdraw;\\n        _updateDepositAndSnapshots(msg.sender, newDeposit);\\n        emit UserDepositChanged(msg.sender, newDeposit);\\n\\n        emit GainsWithdrawn(msg.sender, assets, amounts, loss); // loss required for event log\\n    }\\n\\n    // --- TREN issuance functions ---\\n\\n    function _triggerTRENIssuance() internal {\\n        if (communityIssuance != address(0)) {\\n            uint256 TRENIssuance = ICommunityIssuance(communityIssuance).issueTREN();\\n            _updateG(TRENIssuance);\\n        }\\n    }\\n\\n    function _updateG(uint256 _TRENIssuance) internal {\\n        uint256 cachedTotalDebtTokenDeposits = totalDebtTokenDeposits; // cached to save an SLOAD\\n        /*\\n        * When total deposits is 0, G is not updated. In this case, the TREN issued can not be\\n        obtained by later\\n        * depositors - it is missed out on, and remains in the balanceof the CommunityIssuance\\n        contract.\\n         *\\n         */\\n        if (cachedTotalDebtTokenDeposits == 0 || _TRENIssuance == 0) {\\n            return;\\n        }\\n        uint256 TRENPerUnitStaked =\\n            _computeTRENPerUnitStaked(_TRENIssuance, cachedTotalDebtTokenDeposits);\\n        uint256 marginalTRENGain = TRENPerUnitStaked * P;\\n        uint256 newEpochToScaleToG = epochToScaleToG[currentEpoch][currentScale];\\n        newEpochToScaleToG += marginalTRENGain;\\n        epochToScaleToG[currentEpoch][currentScale] = newEpochToScaleToG;\\n        emit G_Updated(newEpochToScaleToG, currentEpoch, currentScale);\\n    }\\n\\n    function _computeTRENPerUnitStaked(\\n        uint256 _TRENIssuance,\\n        uint256 _totalDeposits\\n    )\\n        internal\\n        returns (uint256)\\n    {\\n        /*\\n        * Calculate the TREN-per-unit staked.  Division uses a \\\"feedback\\\" error correction, to keep\\n        the\\n         * cumulative error low in the running total G:\\n         *\\n        * 1) Form a numerator which compensates for the floor division error that occurred the last\\n        time this\\n         * function was called.\\n         * 2) Calculate \\\"per-unit-staked\\\" ratio.\\n        * 3) Multiply the ratio back by its denominator, to reveal the current floor division error.\\n         * 4) Store this error for use in the next correction when this function is called.\\n        * 5) Note: static analysis tools complain about this \\\"division before multiplication\\\",\\n        however, it is intended.\\n         */\\n        uint256 TRENNumerator = (_TRENIssuance * DECIMAL_PRECISION) + lastTRENError;\\n        uint256 TRENPerUnitStaked = TRENNumerator / _totalDeposits;\\n        lastTRENError = TRENNumerator - (TRENPerUnitStaked * _totalDeposits);\\n        return TRENPerUnitStaked;\\n    }\\n\\n    // --- Liquidation functions ---\\n\\n    /**\\n     * @notice sets the offset for liquidation\\n     * @dev Cancels out the specified debt against the debtTokens contained in the Stability Pool\\n     * (as far as possible)\\n     * and transfers the TrenBox's collateral from ActivePool to StabilityPool.\\n     * Only called by liquidation functions in the TrenBoxManager.\\n     * @param _debtToOffset how much debt to offset\\n     * @param _asset token address\\n     * @param _amountAdded token amount as uint256\\n     */\\n    function offset(\\n        uint256 _debtToOffset,\\n        address _asset,\\n        uint256 _amountAdded\\n    )\\n        external\\n        onlyTrenBoxManager\\n    {\\n        uint256 cachedTotalDebtTokenDeposits = totalDebtTokenDeposits; // cached to save an SLOAD\\n        if (cachedTotalDebtTokenDeposits == 0 || _debtToOffset == 0) {\\n            return;\\n        }\\n        _triggerTRENIssuance();\\n        (uint256 collGainPerUnitStaked, uint256 debtLossPerUnitStaked) =\\n        _computeRewardsPerUnitStaked(\\n            _asset, _amountAdded, _debtToOffset, cachedTotalDebtTokenDeposits\\n        );\\n\\n        _updateRewardSumAndProduct(_asset, collGainPerUnitStaked, debtLossPerUnitStaked); // updates\\n            // S and P\\n        _moveOffsetCollAndDebt(_asset, _amountAdded, _debtToOffset);\\n    }\\n\\n    // --- Offset helper functions ---\\n\\n    /**\\n     * @notice Compute the debtToken and Collateral amount rewards. Uses a \\\"feedback\\\" error\\n     * correction, to keep\\n     * the cumulative error in the P and S state variables low:\\n     *\\n     * @dev 1) Form numerators which compensate for the floor division errors that occurred the last\\n     * time this\\n     * function was called.\\n     * 2) Calculate \\\"per-unit-staked\\\" ratios.\\n     * 3) Multiply each ratio back by its denominator, to reveal the current floor division error.\\n     * 4) Store these errors for use in the next correction when this function is called.\\n     * 5) Note: static analysis tools complain about this \\\"division before multiplication\\\", however,\\n     * it is intended.\\n     * @param _asset Address of token\\n     * @param _amountAdded amount as uint256\\n     * @param _debtToOffset amount of debt to offset\\n     * @param _totalDeposits How much user has deposited\\n     */\\n    function _computeRewardsPerUnitStaked(\\n        address _asset,\\n        uint256 _amountAdded,\\n        uint256 _debtToOffset,\\n        uint256 _totalDeposits\\n    )\\n        internal\\n        returns (uint256 collGainPerUnitStaked, uint256 debtLossPerUnitStaked)\\n    {\\n        uint256 assetIndex = IAdminContract(adminContract).getIndex(_asset);\\n        uint256 collateralNumerator =\\n            (_amountAdded * DECIMAL_PRECISION) + lastAssetError_Offset[assetIndex];\\n        require(_debtToOffset <= _totalDeposits, \\\"StabilityPool: Debt is larger than totalDeposits\\\");\\n        if (_debtToOffset == _totalDeposits) {\\n            debtLossPerUnitStaked = DECIMAL_PRECISION; // When the Pool depletes to 0, so does each\\n                // deposit\\n            lastDebtTokenLossError_Offset = 0;\\n        } else {\\n            uint256 lossNumerator =\\n                (_debtToOffset * DECIMAL_PRECISION) - lastDebtTokenLossError_Offset;\\n            /*\\n            * Add 1 to make error in quotient positive. We want \\\"slightly too much\\\" loss,\\n            * which ensures the error in any given compoundedDeposit favors the Stability Pool.\\n             */\\n            debtLossPerUnitStaked = (lossNumerator / _totalDeposits) + 1;\\n            lastDebtTokenLossError_Offset = (debtLossPerUnitStaked * _totalDeposits) - lossNumerator;\\n        }\\n        collGainPerUnitStaked = collateralNumerator / _totalDeposits;\\n        lastAssetError_Offset[assetIndex] =\\n            collateralNumerator - (collGainPerUnitStaked * _totalDeposits);\\n    }\\n\\n    function _updateRewardSumAndProduct(\\n        address _asset,\\n        uint256 _collGainPerUnitStaked,\\n        uint256 _debtLossPerUnitStaked\\n    )\\n        internal\\n    {\\n        require(_debtLossPerUnitStaked <= DECIMAL_PRECISION, \\\"StabilityPool: Loss < 1\\\");\\n        uint256 currentP = P;\\n        uint256 newP;\\n\\n        /*\\n        * The newProductFactor is the factor by which to change all deposits, due to the depletion\\n        of Stability Pool debt tokens in the liquidation.\\n        * We make the product factor 0 if there was a pool-emptying. Otherwise, it is (1 -\\n        _debtLossPerUnitStaked)\\n         */\\n        uint256 newProductFactor = DECIMAL_PRECISION - _debtLossPerUnitStaked;\\n        uint128 currentScaleCached = currentScale;\\n        uint128 currentEpochCached = currentEpoch;\\n        uint256 currentS = epochToScaleToSum[_asset][currentEpochCached][currentScaleCached];\\n\\n        /*\\n         * Calculate the new S first, before we update P.\\n        * The asset gain for any given depositor from a liquidation depends on the value of their\\n        deposit\\n        * (and the value of totalDeposits) prior to the Stability being depleted by the debt in the\\n        liquidation.\\n         *\\n         * Since S corresponds to asset gain, and P to deposit loss, we update S first.\\n         */\\n        uint256 marginalAssetGain = _collGainPerUnitStaked * currentP;\\n        uint256 newS = currentS + marginalAssetGain;\\n        epochToScaleToSum[_asset][currentEpochCached][currentScaleCached] = newS;\\n        emit S_Updated(_asset, newS, currentEpochCached, currentScaleCached);\\n\\n        // If the Stability Pool was emptied, increment the epoch, and reset the scale and product P\\n        if (newProductFactor == 0) {\\n            currentEpochCached += 1;\\n            currentEpoch = currentEpochCached;\\n            emit EpochUpdated(currentEpochCached);\\n            currentScale = 0;\\n            emit ScaleUpdated(0);\\n            newP = DECIMAL_PRECISION;\\n\\n            // If multiplying P by a non-zero product factor would reduce P below the scale\\n            // boundary, increment the scale\\n        } else {\\n            uint256 mulCached = currentP * newProductFactor;\\n            uint256 mulDivCached = mulCached / DECIMAL_PRECISION;\\n\\n            if (mulDivCached < SCALE_FACTOR) {\\n                newP = (mulCached * SCALE_FACTOR) / DECIMAL_PRECISION;\\n                currentScaleCached += 1;\\n                currentScale = currentScaleCached;\\n                emit ScaleUpdated(currentScaleCached);\\n            } else {\\n                newP = mulDivCached;\\n            }\\n        }\\n\\n        require(newP != 0, \\\"StabilityPool: P = 0\\\");\\n        P = newP;\\n        emit P_Updated(newP);\\n    }\\n\\n    /**\\n     * @notice Internal function to move offset collateral and debt between pools.\\n     * @dev Cancel the liquidated debtToken debt with the debtTokens in the stability pool,\\n     * Burn the debt that was successfully offset. Collateral is moved from\\n     * the ActivePool to this contract.\\n     * @param _asset collateral address\\n     * @param _amount amount as uint256\\n     * @param _debtToOffset uint256\\n     */\\n    function _moveOffsetCollAndDebt(\\n        address _asset,\\n        uint256 _amount,\\n        uint256 _debtToOffset\\n    )\\n        internal\\n    {\\n        IActivePool(activePool).decreaseDebt(_asset, _debtToOffset);\\n        _decreaseDebtTokens(_debtToOffset);\\n        IDebtToken(debtToken).burn(address(this), _debtToOffset);\\n        IActivePool(activePool).sendAsset(_asset, address(this), _amount);\\n    }\\n\\n    function _decreaseDebtTokens(uint256 _amount) internal {\\n        uint256 newTotalDeposits = totalDebtTokenDeposits - _amount;\\n        totalDebtTokenDeposits = newTotalDeposits;\\n        emit StabilityPoolDebtTokenBalanceUpdated(newTotalDeposits);\\n    }\\n\\n    // --- Reward calculator functions for depositor ---\\n\\n    /**\\n     * @notice Calculates the gains earned by the deposit since its last snapshots were taken for\\n     * selected assets.\\n     * @dev Given by the formula:  E = d0 * (S - S(0))/P(0)\\n     * where S(0) and P(0) are the depositor's snapshots of the sum S and product P, respectively.\\n     * d0 is the last recorded deposit value.\\n     * @param _depositor address of depositor in question\\n     * @param _assets array of assets to check gains for\\n     * @return assets, amounts\\n     */\\n    function getDepositorGains(\\n        address _depositor,\\n        address[] memory _assets\\n    )\\n        public\\n        view\\n        returns (address[] memory, uint256[] memory)\\n    {\\n        uint256 initialDeposit = deposits[_depositor];\\n\\n        if (initialDeposit == 0) {\\n            address[] memory emptyAddress = new address[](0);\\n            uint256[] memory emptyUint = new uint256[](0);\\n            return (emptyAddress, emptyUint);\\n        }\\n\\n        Snapshots storage snapshots = depositSnapshots[_depositor];\\n\\n        uint256[] memory amountsFromNewGains =\\n            _calculateNewGains(initialDeposit, snapshots, _assets);\\n        return (_assets, amountsFromNewGains);\\n    }\\n\\n    /**\\n     * @notice get gains on each possible asset by looping through\\n     * @dev assets with _getGainFromSnapshots function\\n     * @param initialDeposit Amount of initial deposit\\n     * @param snapshots struct snapshots\\n     * @param _assets ascending ordered array of assets to calculate and claim gains\\n     */\\n    function _calculateNewGains(\\n        uint256 initialDeposit,\\n        Snapshots storage snapshots,\\n        address[] memory _assets\\n    )\\n        internal\\n        view\\n        returns (uint256[] memory amounts)\\n    {\\n        uint256 assetsLen = _assets.length;\\n        // asset list must be on ascending order - used to avoid any repeated elements\\n        unchecked {\\n            for (uint256 i = 1; i < assetsLen; i++) {\\n                if (_assets[i] <= _assets[i - 1]) {\\n                    revert StabilityPool__ArrayNotInAscendingOrder();\\n                }\\n            }\\n        }\\n        amounts = new uint256[](assetsLen);\\n        for (uint256 i = 0; i < assetsLen;) {\\n            amounts[i] = _getGainFromSnapshots(initialDeposit, snapshots, _assets[i]);\\n            unchecked {\\n                i++;\\n            }\\n        }\\n    }\\n\\n    /**\\n     * @notice gets the gain in S for a given asset\\n     * @dev for a user who deposited initialDeposit\\n     * @param initialDeposit Amount of initialDeposit\\n     * @param snapshots struct snapshots\\n     * @param asset asset to gain snapshot\\n     * @return uint256 the gain\\n     */\\n    function _getGainFromSnapshots(\\n        uint256 initialDeposit,\\n        Snapshots storage snapshots,\\n        address asset\\n    )\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        /*\\n        * Grab the sum 'S' from the epoch at which the stake was made. The Collateral amount gain\\n        may span up to one scale change.\\n         * If it does, the second portion of the Collateral amount gain is scaled by 1e9.\\n         * If the gain spans no scale change, the second portion will be 0.\\n         */\\n        uint256 S_Snapshot = snapshots.S[asset];\\n        uint256 P_Snapshot = snapshots.P;\\n\\n        mapping(uint128 => uint256) storage scaleToSum = epochToScaleToSum[asset][snapshots.epoch];\\n        uint256 firstPortion = scaleToSum[snapshots.scale] - S_Snapshot;\\n        uint256 secondPortion = scaleToSum[snapshots.scale + 1] / SCALE_FACTOR;\\n\\n        uint256 assetGain =\\n            (initialDeposit * (firstPortion + secondPortion)) / P_Snapshot / DECIMAL_PRECISION;\\n\\n        return assetGain;\\n    }\\n\\n    /*\\n     * Calculate the TREN gain earned by a deposit since its last snapshots were taken.\\n     * Given by the formula:  TREN = d0 * (G - G(0))/P(0)\\n    * where G(0) and P(0) are the depositor's snapshots of the sum G and product P, respectively.\\n     * d0 is the last recorded deposit value.\\n     */\\n    function getDepositorTRENGain(address _depositor) public view override returns (uint256) {\\n        uint256 initialDeposit = deposits[_depositor];\\n        if (initialDeposit == 0) {\\n            return 0;\\n        }\\n\\n        Snapshots storage snapshots = depositSnapshots[_depositor];\\n        return _getTRENGainFromSnapshots(initialDeposit, snapshots);\\n    }\\n\\n    function _getTRENGainFromSnapshots(\\n        uint256 initialStake,\\n        Snapshots storage snapshots\\n    )\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        /*\\n        * Grab the sum 'G' from the epoch at which the stake was made. The TREN gain may span up to\\n        one scale change.\\n         * If it does, the second portion of the TREN gain is scaled by 1e9.\\n         * If the gain spans no scale change, the second portion will be 0.\\n         */\\n        uint128 epochSnapshot = snapshots.epoch;\\n        uint128 scaleSnapshot = snapshots.scale;\\n        uint256 G_Snapshot = snapshots.G;\\n        uint256 P_Snapshot = snapshots.P;\\n\\n        uint256 firstPortion = epochToScaleToG[epochSnapshot][scaleSnapshot] - G_Snapshot;\\n        uint256 secondPortion = epochToScaleToG[epochSnapshot][scaleSnapshot + 1] / SCALE_FACTOR;\\n\\n        uint256 TRENGain =\\n            (initialStake * (firstPortion + secondPortion)) / P_Snapshot / DECIMAL_PRECISION;\\n\\n        return TRENGain;\\n    }\\n\\n    // --- Compounded deposit and compounded System stake ---\\n\\n    /*\\n     * Return the user's compounded deposit. Given by the formula:  d = d0 * P/P(0)\\n    * where P(0) is the depositor's snapshot of the product P, taken when they last updated their\\n    deposit.\\n     */\\n    function getCompoundedDebtTokenDeposits(address _depositor)\\n        public\\n        view\\n        override\\n        returns (uint256)\\n    {\\n        uint256 initialDeposit = deposits[_depositor];\\n        if (initialDeposit == 0) {\\n            return 0;\\n        }\\n\\n        return _getCompoundedStakeFromSnapshots(initialDeposit, depositSnapshots[_depositor]);\\n    }\\n\\n    // Internal function, used to calculate compounded deposits and compounded stakes.\\n    function _getCompoundedStakeFromSnapshots(\\n        uint256 initialStake,\\n        Snapshots storage snapshots\\n    )\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        uint256 snapshot_P = snapshots.P;\\n        uint128 scaleSnapshot = snapshots.scale;\\n        uint128 epochSnapshot = snapshots.epoch;\\n\\n        // If stake was made before a pool-emptying event, then it has been fully cancelled with\\n        // debt -- so, return 0\\n        if (epochSnapshot < currentEpoch) {\\n            return 0;\\n        }\\n\\n        uint256 compoundedStake;\\n        uint128 scaleDiff = currentScale - scaleSnapshot;\\n\\n        /* Compute the compounded stake. If a scale change in P was made during the stake's\\n        lifetime,\\n        * account for it. If more than one scale change was made, then the stake has decreased by a\\n        factor of\\n         * at least 1e-9 -- so return 0.\\n         */\\n        if (scaleDiff == 0) {\\n            compoundedStake = (initialStake * P) / snapshot_P;\\n        } else if (scaleDiff == 1) {\\n            compoundedStake = (initialStake * P) / snapshot_P / SCALE_FACTOR;\\n        } else {\\n            compoundedStake = 0;\\n        }\\n\\n        /*\\n         * If compounded deposit is less than a billionth of the initial deposit, return 0.\\n         *\\n        * NOTE: originally, this line was in place to stop rounding errors making the deposit too\\n        large. However, the error\\n        * corrections should ensure the error in P \\\"favors the Pool\\\", i.e. any given compounded\\n        deposit should slightly less\\n         * than it's theoretical value.\\n         *\\n         * Thus it's unclear whether this line is still really needed.\\n         */\\n        if (compoundedStake < initialStake / 1e9) {\\n            return 0;\\n        }\\n\\n        return compoundedStake;\\n    }\\n\\n    // --- Sender functions for debtToken deposits\\n\\n    // Transfer the tokens from the user to the Stability Pool's address, and update its recorded\\n    // deposits\\n    function _sendToStabilityPool(address _address, uint256 _amount) internal {\\n        IDebtToken(debtToken).sendToPool(_address, address(this), _amount);\\n        uint256 newTotalDeposits = totalDebtTokenDeposits + _amount;\\n        totalDebtTokenDeposits = newTotalDeposits;\\n        emit StabilityPoolDebtTokenBalanceUpdated(newTotalDeposits);\\n    }\\n\\n    /**\\n     * @notice transfer collateral gains to the depositor\\n     * @dev this function also unwraps wrapped assets\\n     * before sending to depositor\\n     * @param _to address\\n     * @param assets array of address\\n     * @param amounts array of uint256. Includes pending collaterals since that was added in\\n     * previous steps\\n     */\\n    function _sendGainsToDepositor(\\n        address _to,\\n        address[] memory assets,\\n        uint256[] memory amounts\\n    )\\n        internal\\n    {\\n        uint256 assetsLen = assets.length;\\n        require(assetsLen == amounts.length, \\\"StabilityPool: Length mismatch\\\");\\n        for (uint256 i = 0; i < assetsLen;) {\\n            uint256 amount = amounts[i];\\n            if (amount == 0) {\\n                unchecked {\\n                    i++;\\n                }\\n                continue;\\n            }\\n            address asset = assets[i];\\n            // Assumes we're internally working only with the wrapped version of ERC20 tokens\\n            IERC20(asset).safeTransfer(_to, amount);\\n            unchecked {\\n                i++;\\n            }\\n        }\\n        totalColl.amounts = _leftSubColls(totalColl, assets, amounts);\\n    }\\n\\n    // Send debt tokens to user and decrease deposits in Pool\\n    function _sendToDepositor(address _depositor, uint256 debtTokenWithdrawal) internal {\\n        if (debtTokenWithdrawal == 0) {\\n            return;\\n        }\\n        IDebtToken(debtToken).returnFromPool(address(this), _depositor, debtTokenWithdrawal);\\n        _decreaseDebtTokens(debtTokenWithdrawal);\\n    }\\n\\n    // --- Stability Pool Deposit Functionality ---\\n\\n    /**\\n     * @notice updates deposit and snapshots internally\\n     * @dev if _newValue is zero, delete snapshot for given _depositor and emit event\\n     * otherwise, add an entry or update existing entry for _depositor in the depositSnapshots\\n     * with current values for P, S, G, scale and epoch and then emit event.\\n     * @param _depositor address\\n     * @param _newValue uint256\\n     */\\n    function _updateDepositAndSnapshots(address _depositor, uint256 _newValue) internal {\\n        deposits[_depositor] = _newValue;\\n        address[] memory colls = IAdminContract(adminContract).getValidCollateral();\\n        uint256 collsLen = colls.length;\\n\\n        Snapshots storage depositorSnapshots = depositSnapshots[_depositor];\\n        if (_newValue == 0) {\\n            for (uint256 i = 0; i < collsLen;) {\\n                depositSnapshots[_depositor].S[colls[i]] = 0;\\n                unchecked {\\n                    i++;\\n                }\\n            }\\n            depositorSnapshots.P = 0;\\n            depositorSnapshots.G = 0;\\n            depositorSnapshots.epoch = 0;\\n            depositorSnapshots.scale = 0;\\n            emit DepositSnapshotUpdated(_depositor, 0, 0);\\n            return;\\n        }\\n        uint128 currentScaleCached = currentScale;\\n        uint128 currentEpochCached = currentEpoch;\\n        uint256 currentP = P;\\n\\n        for (uint256 i = 0; i < collsLen;) {\\n            address asset = colls[i];\\n            uint256 currentS = epochToScaleToSum[asset][currentEpochCached][currentScaleCached];\\n            depositSnapshots[_depositor].S[asset] = currentS;\\n            unchecked {\\n                i++;\\n            }\\n        }\\n\\n        uint256 currentG = epochToScaleToG[currentEpochCached][currentScaleCached];\\n        depositorSnapshots.P = currentP;\\n        depositorSnapshots.G = currentG;\\n        depositorSnapshots.scale = currentScaleCached;\\n        depositorSnapshots.epoch = currentEpochCached;\\n\\n        emit DepositSnapshotUpdated(_depositor, currentP, currentG);\\n    }\\n\\n    function S(address _depositor, address _asset) external view returns (uint256) {\\n        return depositSnapshots[_depositor].S[_asset];\\n    }\\n\\n    function _payOutTRENGains(address _depositor) internal {\\n        if (address(communityIssuance) != address(0)) {\\n            uint256 depositorTRENGain = getDepositorTRENGain(_depositor);\\n            ICommunityIssuance(communityIssuance).sendTREN(_depositor, depositorTRENGain);\\n            emit TRENPaidToDepositor(_depositor, depositorTRENGain);\\n        }\\n    }\\n\\n    function _leftSubColls(\\n        Colls memory _coll1,\\n        address[] memory _tokens,\\n        uint256[] memory _amounts\\n    )\\n        internal\\n        pure\\n        returns (uint256[] memory)\\n    {\\n        uint256 coll1Len = _coll1.amounts.length;\\n        uint256 tokensLen = _tokens.length;\\n\\n        for (uint256 i = 0; i < coll1Len;) {\\n            for (uint256 j = 0; j < tokensLen;) {\\n                if (_coll1.tokens[i] == _tokens[j]) {\\n                    _coll1.amounts[i] -= _amounts[j];\\n                }\\n                unchecked {\\n                    j++;\\n                }\\n            }\\n            unchecked {\\n                i++;\\n            }\\n        }\\n\\n        return _coll1.amounts;\\n    }\\n\\n    function _requireUserHasDeposit(uint256 _initialDeposit) internal pure {\\n        require(_initialDeposit != 0, \\\"StabilityPool: User must have a non-zero deposit\\\");\\n    }\\n\\n    function _requireNonZeroAmount(uint256 _amount) internal pure {\\n        require(_amount != 0, \\\"StabilityPool: Amount must be non-zero\\\");\\n    }\\n\\n    // --- Modifiers ---\\n\\n    modifier onlyAdminContract() {\\n        if (msg.sender != adminContract) {\\n            revert StabilityPool__AdminContractOnly(msg.sender, adminContract);\\n        }\\n        _;\\n    }\\n\\n    modifier onlyActivePool() {\\n        if (msg.sender != activePool) {\\n            revert StabilityPool__ActivePoolOnly(msg.sender, activePool);\\n        }\\n        _;\\n    }\\n\\n    modifier onlyTrenBoxManager() {\\n        if (msg.sender != trenBoxManager) {\\n            revert StabilityPool__TrenBoxManagerOnly(msg.sender, trenBoxManager);\\n        }\\n        _;\\n    }\\n\\n    // --- Fallback function ---\\n\\n    function receivedERC20(address _asset, uint256 _amount) external override onlyActivePool {\\n        uint256 collateralIndex = IAdminContract(adminContract).getIndex(_asset);\\n        uint256 newAssetBalance = totalColl.amounts[collateralIndex] + _amount;\\n        totalColl.amounts[collateralIndex] = newAssetBalance;\\n        emit StabilityPoolAssetBalanceUpdated(_asset, newAssetBalance);\\n    }\\n\\n    function authorizeUpgrade(address newImplementation) public {\\n        _authorizeUpgrade(newImplementation);\\n    }\\n\\n    function _authorizeUpgrade(address) internal override onlyOwner { }\\n}\\n\",\"keccak256\":\"0xbfecbf0e6d4f37c0feb804fd82041126b87430aad2040bca1ece71836e94fe94\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a06040523060805234801561001457600080fd5b50608051613fad61003e6000396000818161241b0152818161244401526126730152613fad6000f3fe60806040526004361061036b5760003560e01c806395fb16bb116101c6578063c5f956af116100f7578063ec0d5e0c11610095578063f8d898981161006f578063f8d8989814610ad5578063fc7e286d14610af5578063fe06073314610b22578063fe9d032314610b4257600080fd5b8063ec0d5e0c14610a75578063f1c05a7e14610a95578063f2fde38b14610ab557600080fd5b8063cc8b21e4116100d1578063cc8b21e4146109fd578063cda775f914610a1d578063ce4b5bbe14610a3d578063eb16f00414610a5557600080fd5b8063c5f956af14610997578063c6ba0936146109b7578063c8564c62146109cc57600080fd5b8063ad3018f011610164578063b95717211161013e578063b957172114610917578063be35d3bd14610937578063c05c5e9414610957578063c415b95c1461097757600080fd5b8063ad3018f0146108a2578063ad3cb1cc146108d0578063b5d0c4c71461090157600080fd5b8063a20baee6116101a0578063a20baee61461080a578063a3f4df7e14610826578063a4e59ac81461086c578063a7a488841461088c57600080fd5b806395fb16bb146107aa5780639b56d6c9146107ca5780639e86d0c4146107ea57600080fd5b80636a85d67d116102a05780637f7dde4a1161023e57806386da08241161021857806386da0824146106b55780638b8fbd92146107375780638da5cb5b1461074d5780638e9171b01461078a57600080fd5b80637f7dde4a146106485780638129fc1c1461066857806382e0a5741461067d57600080fd5b8063741bef1a1161027a578063741bef1a1461058b57806376671808146105ab57806377553ad4146105ea5780637ee4196b1461060a57600080fd5b80636a85d67d146105365780636aebb1ab14610556578063715018a61461057657600080fd5b80633cc742251161030d5780634f1ef286116102e75780634f1ef286146104ce57806352ce8272146104e157806352d1902d1461050157806355dafa461461051657600080fd5b80633cc742251461046e5780634bc66f321461048e5780634e8338eb146104ae57600080fd5b80630d9a6b35116103495780630d9a6b35146103ef5780631091da891461040e578063121f2b261461042e57806327d04b351461044e57600080fd5b806301c9310014610370578063048c661d146103925780630a34d4d6146103cf575b600080fd5b34801561037c57600080fd5b5061039061038b366004613894565b610b62565b005b34801561039e57600080fd5b50600c546103b2906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156103db57600080fd5b506010546103b2906001600160a01b031681565b3480156103fb57600080fd5b506032545b6040519081526020016103c6565b34801561041a57600080fd5b506103906104293660046138b1565b610b8c565b34801561043a57600080fd5b50610400610449366004613894565b610c24565b34801561045a57600080fd5b50610400610469366004613894565b610c77565b34801561047a57600080fd5b506006546103b2906001600160a01b031681565b34801561049a57600080fd5b50600d546103b2906001600160a01b031681565b3480156104ba57600080fd5b506104006104c93660046138e9565b610d6f565b6103906104dc366004613969565b610d9c565b3480156104ed57600080fd5b506104006104fc366004613894565b610dbb565b34801561050d57600080fd5b50610400610e06565b34801561052257600080fd5b506009546103b2906001600160a01b031681565b34801561054257600080fd5b50610390610551366004613894565b610e23565b34801561056257600080fd5b50610390610571366004613a56565b610e4d565b34801561058257600080fd5b50610390610fb4565b34801561059757600080fd5b50600a546103b2906001600160a01b031681565b3480156105b757600080fd5b506038546105d290600160801b90046001600160801b031681565b6040516001600160801b0390911681526020016103c6565b3480156105f657600080fd5b506002546103b2906001600160a01b031681565b34801561061657600080fd5b50610400610625366004613abe565b603960209081526000938452604080852082529284528284209052825290205481565b34801561065457600080fd5b506000546103b2906001600160a01b031681565b34801561067457600080fd5b50610390610fc8565b34801561068957600080fd5b50610400610698366004613b03565b603a60209081526000928352604080842090915290825290205481565b3480156106c157600080fd5b506107086106d0366004613894565b6036602052600090815260409020600181015460028201546003909201549091906001600160801b0380821691600160801b90041684565b6040805194855260208501939093526001600160801b03918216928401929092521660608201526080016103c6565b34801561074357600080fd5b5061040060375481565b34801561075957600080fd5b507f9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300546001600160a01b03166103b2565b34801561079657600080fd5b506103906107a5366004613a56565b6110f6565b3480156107b657600080fd5b506004546103b2906001600160a01b031681565b3480156107d657600080fd5b506104006107e5366004613894565b611113565b3480156107f657600080fd5b50610400610805366004613894565b6111b0565b34801561081657600080fd5b50610400670de0b6b3a764000081565b34801561083257600080fd5b5061085f6040518060400160405280600d81526020016c14dd18589a5b1a5d1e541bdbdb609a1b81525081565b6040516103c69190613b5a565b34801561087857600080fd5b506038546105d2906001600160801b031681565b34801561089857600080fd5b50610400603d5481565b3480156108ae57600080fd5b506108c26108bd366004613bb1565b611257565b6040516103c6929190613cdb565b3480156108dc57600080fd5b5061085f604051806040016040528060058152602001640352e302e360dc1b81525081565b34801561090d57600080fd5b50610400603b5481565b34801561092357600080fd5b50610390610932366004613d00565b6112d0565b34801561094357600080fd5b50610400610952366004613d42565b61184a565b34801561096357600080fd5b506001546103b2906001600160a01b031681565b34801561098357600080fd5b506007546103b2906001600160a01b031681565b3480156109a357600080fd5b50600e546103b2906001600160a01b031681565b3480156109c357600080fd5b506108c261186b565b3480156109d857600080fd5b506010546109ed90600160a01b900460ff1681565b60405190151581526020016103c6565b348015610a0957600080fd5b50600b546103b2906001600160a01b031681565b348015610a2957600080fd5b506003546103b2906001600160a01b031681565b348015610a4957600080fd5b50610400633b9aca0081565b348015610a6157600080fd5b50610390610a70366004613d5b565b61192e565b348015610a8157600080fd5b50610390610a90366004613894565b611a7d565b348015610aa157600080fd5b50600f546103b2906001600160a01b031681565b348015610ac157600080fd5b50610390610ad0366004613894565b611b6d565b348015610ae157600080fd5b506005546103b2906001600160a01b031681565b348015610b0157600080fd5b50610400610b10366004613894565b60356020526000908152604090205481565b348015610b2e57600080fd5b50610390610b3d366004613894565b611bab565b348015610b4e57600080fd5b506008546103b2906001600160a01b031681565b610b6a611bb4565b600980546001600160a01b0319166001600160a01b0392909216919091179055565b600f546001600160a01b03163314610bd157600f546040516339bf765b60e01b81523360048201526001600160a01b0390911660248201526044015b60405180910390fd5b603254801580610bdf575083155b15610bea5750505050565b610bf2611c0f565b600080610c0185858886611ca6565b91509150610c10858383611e83565b610c1b8585886121dc565b5050505b505050565b6001600160a01b038116600090815260356020526040812054808203610c4d5750600092915050565b6001600160a01b0383166000908152603660205260409020610c70908290612320565b9392505050565b6000805460405163c5739d0b60e01b81526001600160a01b0384811660048301528392169063c5739d0b90602401602060405180830381865afa158015610cc2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ce69190613d87565b60065460405163c5739d0b60e01b81526001600160a01b0386811660048301529293506000929091169063c5739d0b906024015b602060405180830381865afa158015610d37573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5b9190613d87565b9050610d678183613db6565b949350505050565b6001600160a01b038083166000908152603660209081526040808320938516835292905220545b92915050565b610da4612410565b610dad826124b5565b610db782826124bd565b5050565b6001600160a01b038116600090815260356020526040812054808203610de45750600092915050565b6001600160a01b0383166000908152603660205260409020610d67828261257a565b6000610e10612668565b50600080516020613f8183398151915290565b610e2b611bb4565b600480546001600160a01b0319166001600160a01b0392909216919091179055565b610e556126b1565b610e5e836126fb565b33600090815260356020526040902054610e76611c0f565b600080610eb63386868080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525061125792505050565b915091506000610ec533610c24565b90506000610ed38286613dc9565b9050610ede3361275a565b610ee83389612827565b6000610ef48984613db6565b9050610f0033826128e3565b60405181815233907fbce78369dccab09eec1986f4d409ab09ffbb47d65423e5148fcf98411c5111c99060200160405180910390a2336001600160a01b03167ff20651f7c9cd4e1c112f77cbf2a13a44f79d4165dd781c41b52052bfc888174a868685604051610f7293929190613ddc565b60405180910390a2610f85338686612b8b565b505050505050610c1f60017f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f0055565b610fbc611bb4565b610fc66000612d5b565b565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff1660008115801561100e5750825b905060008267ffffffffffffffff16600114801561102b5750303b155b905081158015611039575080155b156110575760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561108157845460ff60401b1916600160401b1785555b3361108b81612dcc565b611093612ddd565b61109b612ded565b50670de0b6b3a764000060375583156110ef57845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2906020015b60405180910390a15b5050505050565b600080611104858585612df5565b915091506110ef338383612b8b565b60015460405163b31610db60e01b81526001600160a01b038381166004830152600092839291169063b31610db90602401602060405180830381865afa158015611161573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111859190613d87565b90506033600101818154811061119d5761119d613e12565b9060005260206000200154915050919050565b60008054604051635373433f60e01b81526001600160a01b03848116600483015283921690635373433f90602401602060405180830381865afa1580156111fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061121f9190613d87565b600654604051635373433f60e01b81526001600160a01b03868116600483015292935060009290911690635373433f90602401610d1a565b6001600160a01b03821660009081526035602052604081205460609182919081900361129c5750506040805160008082526020820190815281830190925291506112c9565b6001600160a01b0385166000908152603660205260408120906112c0838388612f38565b86955093505050505b9250929050565b6112d8611bb4565b601054600160a01b900460ff16156113325760405162461bcd60e51b815260206004820152601c60248201527f536574757020697320616c726561647920696e697469616c697a6564000000006044820152606401610bc8565b600f81146113825760405162461bcd60e51b815260206004820152601e60248201527f45787065637465642031352061646472657373657320617420736574757000006044820152606401610bc8565b60005b600f8110156114075760008383838181106113a2576113a2613e12565b90506020020160208101906113b79190613894565b6001600160a01b0316036113ff5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b6044820152606401610bc8565b600101611385565b508181600081811061141b5761141b613e12565b90506020020160208101906114309190613894565b600080546001600160a01b0319166001600160a01b03929092169190911790558181600181811061146357611463613e12565b90506020020160208101906114789190613894565b600180546001600160a01b0319166001600160a01b0392909216919091179055818160028181106114ab576114ab613e12565b90506020020160208101906114c09190613894565b600280546001600160a01b0319166001600160a01b0392909216919091179055818160038181106114f3576114f3613e12565b90506020020160208101906115089190613894565b600380546001600160a01b0319166001600160a01b03929092169190911790558181600481811061153b5761153b613e12565b90506020020160208101906115509190613894565b600580546001600160a01b0319166001600160a01b03929092169190911781558290829081811061158357611583613e12565b90506020020160208101906115989190613894565b600680546001600160a01b0319166001600160a01b0392909216919091178155829082908181106115cb576115cb613e12565b90506020020160208101906115e09190613894565b600780546001600160a01b0319166001600160a01b03929092169190911781558290829081811061161357611613613e12565b90506020020160208101906116289190613894565b600880546001600160a01b0319166001600160a01b03929092169190911781558290829081811061165b5761165b613e12565b90506020020160208101906116709190613894565b600a80546001600160a01b0319166001600160a01b0392909216919091179055818160098181106116a3576116a3613e12565b90506020020160208101906116b89190613894565b600b80546001600160a01b0319166001600160a01b03929092169190911790558181600a8181106116eb576116eb613e12565b90506020020160208101906117009190613894565b600c80546001600160a01b0319166001600160a01b03929092169190911790558181600b81811061173357611733613e12565b90506020020160208101906117489190613894565b600d80546001600160a01b0319166001600160a01b03929092169190911790558181600c81811061177b5761177b613e12565b90506020020160208101906117909190613894565b600e80546001600160a01b0319166001600160a01b03929092169190911790558181600d8181106117c3576117c3613e12565b90506020020160208101906117d89190613894565b600f80546001600160a01b0319166001600160a01b03929092169190911790558181600e81811061180b5761180b613e12565b90506020020160208101906118209190613894565b601080546001600160a81b0319166001600160a01b039290921691909117600160a01b1790555050565b603c818154811061185a57600080fd5b600091825260209091200154905081565b60608060336000016033600101818054806020026020016040519081016040528092919081815260200182805480156118cd57602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116118af575b505050505091508080548060200260200160405190810160405280929190818152602001828054801561191f57602002820191906000526020600020905b81548152602001906001019080831161190b575b50505050509050915091509091565b6000546001600160a01b0316331461196e57600054604051633eafff5160e11b81523360048201526001600160a01b039091166024820152604401610bc8565b60015460405163b31610db60e01b81526001600160a01b038481166004830152600092169063b31610db90602401602060405180830381865afa1580156119b9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119dd9190613d87565b9050600082603360010183815481106119f8576119f8613e12565b9060005260206000200154611a0d9190613db6565b90508060336001018381548110611a2657611a26613e12565b60009182526020918290200191909155604080516001600160a01b03871681529182018390527fb36e395f001a695c24ce43be3fb7c2338a2e794c691d5665d2f7847cc231a4b5910160405180910390a150505050565b6001546001600160a01b03163314611abd57600154604051632abcdbcb60e21b81523360048201526001600160a01b039091166024820152604401610bc8565b603c8054600180820190925560007fc6bb06cb7f92603de181bf256cd16846b93b752a170ff24824098b31aa008a7e909101819055603380548084019091557f82a75bdeeae8604d839476ae9efd8b0e15aa447e21bfd7f41283bb54e22c9a820180546001600160a01b0319166001600160a01b03949094169390931790925560348054918201815582527f46bddb1178e94d7f2892ff5f366840eb658911794f2c3a44c450aa2c505186c10155565b611b75611bb4565b6001600160a01b038116611b9f57604051631e4fbdf760e01b815260006004820152602401610bc8565b611ba881612d5b565b50565b611ba8816124b5565b33611be67f9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300546001600160a01b031690565b6001600160a01b031614610fc65760405163118cdaa760e01b8152336004820152602401610bc8565b6004546001600160a01b031615610fc6576000600460009054906101000a90046001600160a01b03166001600160a01b031663234209eb6040518163ffffffff1660e01b81526004016020604051808303816000875af1158015611c77573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9b9190613d87565b9050611ba88161305a565b60015460405163b31610db60e01b81526001600160a01b038681166004830152600092839283929091169063b31610db90602401602060405180830381865afa158015611cf7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d1b9190613d87565b90506000603c8281548110611d3257611d32613e12565b9060005260206000200154670de0b6b3a764000088611d519190613e28565b611d5b9190613db6565b905084861115611dc65760405162461bcd60e51b815260206004820152603060248201527f53746162696c697479506f6f6c3a2044656274206973206c617267657220746860448201526f616e20746f74616c4465706f7369747360801b6064820152608401610bc8565b848603611de2576000603d55670de0b6b3a76400009250611e37565b603d54600090611dfa670de0b6b3a764000089613e28565b611e049190613dc9565b9050611e108682613e3f565b611e1b906001613db6565b935080611e288786613e28565b611e329190613dc9565b603d55505b611e418582613e3f565b9350611e4d8585613e28565b611e579082613dc9565b603c8381548110611e6a57611e6a613e12565b9060005260206000200181905550505094509492505050565b670de0b6b3a7640000811115611edb5760405162461bcd60e51b815260206004820152601760248201527f53746162696c697479506f6f6c3a204c6f7373203c20310000000000000000006044820152606401610bc8565b603754600080611ef384670de0b6b3a7640000613dc9565b6038546001600160a01b03881660009081526039602090815260408083206001600160801b03600160801b86048116808652918452828520951680855294909252822054939450919290611f47878a613e28565b90506000611f558284613db6565b6001600160a01b038c1660008181526039602090815260408083206001600160801b038a8116808652918452828520908c1680865290845293829020869055815194855291840185905283015260608201529091507fe799d8213ffd47c58af0bad222f3f83a7bacf689130d897017d6c2cb9346e8cb9060800160405180910390a18560000361209257611fea600185613e61565b603880546001600160801b03908116600160801b918416918202179091556040519081529094507fb50f0f59e7cb5b421dc77581c3a9919e3806e076e5fa78a874c3f120cb7d874d9060200160405180910390a1603880546001600160801b0319169055604051600081527f1f9dfc70cd666adb18a39d60a797518f7b4febf4b6e24ef37d44f6e1e7219fbe9060200160405180910390a1670de0b6b3a76400009650612150565b600061209e878a613e28565b905060006120b4670de0b6b3a764000083613e3f565b9050633b9aca0081101561214957670de0b6b3a76400006120d9633b9aca0084613e28565b6120e39190613e3f565b98506120f0600188613e61565b603880546001600160801b0319166001600160801b0383169081179091556040519081529097507f1f9dfc70cd666adb18a39d60a797518f7b4febf4b6e24ef37d44f6e1e7219fbe9060200160405180910390a161214d565b8098505b50505b866000036121975760405162461bcd60e51b8152602060048201526014602482015273053746162696c697479506f6f6c3a2050203d20360641b6044820152606401610bc8565b60378790556040518781527fc1a9618cb59ebca77cbdbc2949f126823c407ff13edb285fd0262519a9c18e8c9060200160405180910390a15050505050505050505050565b600054604051632fb9ba3160e01b81526001600160a01b0385811660048301526024820184905290911690632fb9ba3190604401600060405180830381600087803b15801561222a57600080fd5b505af115801561223e573d6000803e3d6000fd5b5050505061224b81613149565b600554604051632770a7eb60e21b8152306004820152602481018390526001600160a01b0390911690639dc29fac90604401600060405180830381600087803b15801561229757600080fd5b505af11580156122ab573d6000803e3d6000fd5b50506000546040516347878f1560e01b81526001600160a01b0387811660048301523060248301526044820187905290911692506347878f159150606401600060405180830381600087803b15801561230357600080fd5b505af1158015612317573d6000803e3d6000fd5b50505050505050565b60018101546003820154603854600092916001600160801b0380821692600160801b9283900482169290041681101561235f5760009350505050610d96565b603854600090819061237b9085906001600160801b0316613e88565b9050806001600160801b03166000036123ae57846037548961239d9190613e28565b6123a79190613e3f565b91506123e2565b806001600160801b03166001036123dd57633b9aca00856037548a6123d39190613e28565b61239d9190613e3f565b600091505b6123f0633b9aca0089613e3f565b82101561240557600095505050505050610d96565b509695505050505050565b306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148061249757507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661248b600080516020613f81833981519152546001600160a01b031690565b6001600160a01b031614155b15610fc65760405163703e46dd60e11b815260040160405180910390fd5b611ba8611bb4565b816001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612517575060408051601f3d908101601f1916820190925261251491810190613d87565b60015b61253f57604051634c9c8ce360e01b81526001600160a01b0383166004820152602401610bc8565b600080516020613f81833981519152811461257057604051632a87526960e21b815260048101829052602401610bc8565b610c1f8383613198565b6003810154600282015460018301546001600160801b03600160801b840481166000818152603a602090815260408083209490971680835293905294852054909391929085906125cb908490613dc9565b6001600160801b0386166000908152603a6020526040812091925090633b9aca0090826125f9886001613e61565b6001600160801b03166001600160801b03168152602001908152602001600020546126249190613e3f565b90506000670de0b6b3a76400008461263c8486613db6565b612646908d613e28565b6126509190613e3f565b61265a9190613e3f565b9a9950505050505050505050565b306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610fc65760405163703e46dd60e11b815260040160405180910390fd5b7f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f008054600119016126f557604051633ee5aeb560e01b815260040160405180910390fd5b60029055565b80600003611ba85760405162461bcd60e51b815260206004820152602660248201527f53746162696c697479506f6f6c3a20416d6f756e74206d757374206265206e6f6044820152656e2d7a65726f60d01b6064820152608401610bc8565b6004546001600160a01b031615611ba857600061277682610dbb565b60048054604051630227f7bb60e61b81526001600160a01b03868116938201939093526024810184905292935016906389fdeec090604401600060405180830381600087803b1580156127c857600080fd5b505af11580156127dc573d6000803e3d6000fd5b50505050816001600160a01b03167f60243fd2e9882f8d26aa92149ed8254e5ebfd16b84a891bb88168b1adebda9568260405161281b91815260200190565b60405180910390a25050565b600554604051632ee65eeb60e21b81526001600160a01b038481166004830152306024830152604482018490529091169063bb997bac90606401600060405180830381600087803b15801561287b57600080fd5b505af115801561288f573d6000803e3d6000fd5b505050506000816032546128a39190613db6565b60328190556040518181529091507f8c9268469ff6265448f46f8119962e815f393b25b87bb55bda5e709a412b85d79060200160405180910390a1505050565b6001600160a01b038083166000908152603560205260408082208490556001548151634eb5750560e11b8152915192931691639d6aea0a9160048082019286929091908290030181865afa15801561293f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526129679190810190613ea8565b80516001600160a01b0385166000908152603660205260408120929350909190849003612a575760005b828110156129f3576001600160a01b0386166000908152603660205260408120855182908790859081106129c7576129c7613e12565b6020908102919091018101516001600160a01b0316825281019190915260400160002055600101612991565b5060006001820181905560028201819055600382018190556040805182815260208101929092526001600160a01b038716917fc48943df4095f4f20d171fd2872eafdc0eed4d9014ac3672f3bde7fd425449d5910160405180910390a25050505050565b6038546037546001600160801b0380831692600160801b9004169060005b85811015612af4576000878281518110612a9157612a91613e12565b6020908102919091018101516001600160a01b0390811660008181526039845260408082206001600160801b03808b168452908652818320908b168352855280822054938f16825260368552808220928252919093529091205550600101612a75565b506001600160801b038281166000818152603a6020908152604080832094881680845294825291829020546001890186905560028901819055600160801b9093029093176003880155805184815292830182905290916001600160a01b038b16917fc48943df4095f4f20d171fd2872eafdc0eed4d9014ac3672f3bde7fd425449d5910160405180910390a2505050505050505050565b815181518114612bdd5760405162461bcd60e51b815260206004820152601e60248201527f53746162696c697479506f6f6c3a204c656e677468206d69736d6174636800006044820152606401610bc8565b60005b81811015612c5d576000838281518110612bfc57612bfc613e12565b6020026020010151905080600003612c175750600101612be0565b6000858381518110612c2b57612c2b613e12565b60200260200101519050612c538783836001600160a01b03166131ee9092919063ffffffff16565b5050600101612be0565b506040805160338054606060208202840181018552938301818152612d219484928491840182828015612cb957602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311612c9b575b5050505050815260200160018201805480602002602001604051908101604052809291908181526020018280548015612d1157602002820191906000526020600020905b815481526020019060010190808311612cfd575b5050505050815250508484613240565b80516110ef9160349160209091019061381f565b60017f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f0055565b7f9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c19930080546001600160a01b031981166001600160a01b03848116918217845560405192169182907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3505050565b612dd461331a565b611ba881613363565b612de561331a565b610fc661336b565b610fc661331a565b336000908152603560205260409020546060908190612e1381613373565b612e1b611c0f565b612e583386868080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525061125792505050565b90935091506000612e6833610c24565b90506000612e7688836133dc565b90506000612e848385613dc9565b9050612e8f3361275a565b612e9933836133f2565b6000612ea58385613dc9565b9050612eb133826128e3565b60405181815233907fbce78369dccab09eec1986f4d409ab09ffbb47d65423e5148fcf98411c5111c99060200160405180910390a2336001600160a01b03167ff20651f7c9cd4e1c112f77cbf2a13a44f79d4165dd781c41b52052bfc888174a888885604051612f2393929190613ddc565b60405180910390a25050505050935093915050565b805160609060015b81811015612fb757836001820381518110612f5d57612f5d613e12565b60200260200101516001600160a01b0316848281518110612f8057612f80613e12565b60200260200101516001600160a01b031611612faf57604051637243bc1760e11b815260040160405180910390fd5b600101612f40565b508067ffffffffffffffff811115612fd157612fd1613922565b604051908082528060200260200182016040528015612ffa578160200160208202803683370190505b50915060005b818110156130515761302c868686848151811061301f5761301f613e12565b6020026020010151613473565b83828151811061303e5761303e613e12565b6020908102919091010152600101613000565b50509392505050565b603254801580613068575081155b15613071575050565b600061307d838361353f565b905060006037548261308f9190613e28565b6038546001600160801b03600160801b820481166000908152603a602090815260408083209390941682529190915220549091506130cd8282613db6565b603880546001600160801b03600160801b80830482166000908152603a60209081526040808320958516835294815290849020869055935483518681529181048316948201949094529216908201529091507f2d6127771b164a9cc8827d24b5955db2a77e7a81dac389107ebb8bce9fb64968906060016110e6565b6000816032546131599190613dc9565b60328190556040518181529091507f8c9268469ff6265448f46f8119962e815f393b25b87bb55bda5e709a412b85d79060200160405180910390a15050565b6131a182613592565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a28051156131e657610c1f82826135f7565b610db761366d565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663a9059cbb60e01b179052610c1f90849061368c565b60208301515182516060919060005b8281101561330a5760005b828110156133015786818151811061327457613274613e12565b60200260200101516001600160a01b03168860000151838151811061329b5761329b613e12565b60200260200101516001600160a01b0316036132f9578581815181106132c3576132c3613e12565b6020026020010151886020015183815181106132e1576132e1613e12565b602002602001018181516132f59190613dc9565b9052505b60010161325a565b5060010161324f565b5050506020909301519392505050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a0054600160401b900460ff16610fc657604051631afcd79f60e31b815260040160405180910390fd5b611b7561331a565b612d3561331a565b80600003611ba85760405162461bcd60e51b815260206004820152603060248201527f53746162696c697479506f6f6c3a2055736572206d757374206861766520612060448201526f1b9bdb8b5e995c9bc819195c1bdcda5d60821b6064820152608401610bc8565b60008183106133eb5781610c70565b5090919050565b806000036133fe575050565b600554604051631062c15f60e11b81523060048201526001600160a01b03848116602483015260448201849052909116906320c582be90606401600060405180830381600087803b15801561345257600080fd5b505af1158015613466573d6000803e3d6000fd5b50505050610db781613149565b6001600160a01b0381166000908152602083815260408083205460018601546039845282852060038801546001600160801b03600160801b82048116885291865284872091168652938490529184205490929084906134d3908590613dc9565b6003880154909150600090633b9aca0090849083906134fc906001600160801b03166001613e61565b6001600160801b03166001600160801b03168152602001908152602001600020546135279190613e3f565b90506000670de0b6b3a76400008561263c8486613db6565b600080603b54670de0b6b3a7640000856135599190613e28565b6135639190613db6565b905060006135718483613e3f565b905061357d8482613e28565b6135879083613dc9565b603b55949350505050565b806001600160a01b03163b6000036135c857604051634c9c8ce360e01b81526001600160a01b0382166004820152602401610bc8565b600080516020613f8183398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080846001600160a01b0316846040516136149190613f42565b600060405180830381855af49150503d806000811461364f576040519150601f19603f3d011682016040523d82523d6000602084013e613654565b606091505b50915091506136648583836136ef565b95945050505050565b3415610fc65760405163b398979f60e01b815260040160405180910390fd5b60006136a16001600160a01b0384168361374b565b905080516000141580156136c65750808060200190518101906136c49190613f5e565b155b15610c1f57604051635274afe760e01b81526001600160a01b0384166004820152602401610bc8565b606082613704576136ff82613759565b610c70565b815115801561371b57506001600160a01b0384163b155b1561374457604051639996b31560e01b81526001600160a01b0385166004820152602401610bc8565b5080610c70565b6060610c7083836000613782565b8051156137695780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6060814710156137a75760405163cd78605960e01b8152306004820152602401610bc8565b600080856001600160a01b031684866040516137c39190613f42565b60006040518083038185875af1925050503d8060008114613800576040519150601f19603f3d011682016040523d82523d6000602084013e613805565b606091505b50915091506138158683836136ef565b9695505050505050565b82805482825590600052602060002090810192821561385a579160200282015b8281111561385a57825182559160200191906001019061383f565b5061386692915061386a565b5090565b5b80821115613866576000815560010161386b565b6001600160a01b0381168114611ba857600080fd5b6000602082840312156138a657600080fd5b8135610c708161387f565b6000806000606084860312156138c657600080fd5b8335925060208401356138d88161387f565b929592945050506040919091013590565b600080604083850312156138fc57600080fd5b82356139078161387f565b915060208301356139178161387f565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561396157613961613922565b604052919050565b6000806040838503121561397c57600080fd5b82356139878161387f565b915060208381013567ffffffffffffffff808211156139a557600080fd5b818601915086601f8301126139b957600080fd5b8135818111156139cb576139cb613922565b6139dd601f8201601f19168501613938565b915080825287848285010111156139f357600080fd5b80848401858401376000848284010152508093505050509250929050565b60008083601f840112613a2357600080fd5b50813567ffffffffffffffff811115613a3b57600080fd5b6020830191508360208260051b85010111156112c957600080fd5b600080600060408486031215613a6b57600080fd5b83359250602084013567ffffffffffffffff811115613a8957600080fd5b613a9586828701613a11565b9497909650939450505050565b80356001600160801b0381168114613ab957600080fd5b919050565b600080600060608486031215613ad357600080fd5b8335613ade8161387f565b9250613aec60208501613aa2565b9150613afa60408501613aa2565b90509250925092565b60008060408385031215613b1657600080fd5b613b1f83613aa2565b9150613b2d60208401613aa2565b90509250929050565b60005b83811015613b51578181015183820152602001613b39565b50506000910152565b6020815260008251806020840152613b79816040850160208701613b36565b601f01601f19169190910160400192915050565b600067ffffffffffffffff821115613ba757613ba7613922565b5060051b60200190565b60008060408385031215613bc457600080fd5b8235613bcf8161387f565b915060208381013567ffffffffffffffff811115613bec57600080fd5b8401601f81018613613bfd57600080fd5b8035613c10613c0b82613b8d565b613938565b81815260059190911b82018301908381019088831115613c2f57600080fd5b928401925b82841015613c56578335613c478161387f565b82529284019290840190613c34565b80955050505050509250929050565b60008151808452602080850194506020840160005b83811015613c9f5781516001600160a01b031687529582019590820190600101613c7a565b509495945050505050565b60008151808452602080850194506020840160005b83811015613c9f57815187529582019590820190600101613cbf565b604081526000613cee6040830185613c65565b82810360208401526136648185613caa565b60008060208385031215613d1357600080fd5b823567ffffffffffffffff811115613d2a57600080fd5b613d3685828601613a11565b90969095509350505050565b600060208284031215613d5457600080fd5b5035919050565b60008060408385031215613d6e57600080fd5b8235613d798161387f565b946020939093013593505050565b600060208284031215613d9957600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610d9657610d96613da0565b81810381811115610d9657610d96613da0565b606081526000613def6060830186613c65565b8281036020840152613e018186613caa565b915050826040830152949350505050565b634e487b7160e01b600052603260045260246000fd5b8082028115828204841417610d9657610d96613da0565b600082613e5c57634e487b7160e01b600052601260045260246000fd5b500490565b6001600160801b03818116838216019080821115613e8157613e81613da0565b5092915050565b6001600160801b03828116828216039080821115613e8157613e81613da0565b60006020808385031215613ebb57600080fd5b825167ffffffffffffffff811115613ed257600080fd5b8301601f81018513613ee357600080fd5b8051613ef1613c0b82613b8d565b81815260059190911b82018301908381019087831115613f1057600080fd5b928401925b82841015613f37578351613f288161387f565b82529284019290840190613f15565b979650505050505050565b60008251613f54818460208701613b36565b9190910192915050565b600060208284031215613f7057600080fd5b81518015158114610c7057600080fdfe360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbca164736f6c6343000817000a",
  "deployedBytecode": "0x60806040526004361061036b5760003560e01c806395fb16bb116101c6578063c5f956af116100f7578063ec0d5e0c11610095578063f8d898981161006f578063f8d8989814610ad5578063fc7e286d14610af5578063fe06073314610b22578063fe9d032314610b4257600080fd5b8063ec0d5e0c14610a75578063f1c05a7e14610a95578063f2fde38b14610ab557600080fd5b8063cc8b21e4116100d1578063cc8b21e4146109fd578063cda775f914610a1d578063ce4b5bbe14610a3d578063eb16f00414610a5557600080fd5b8063c5f956af14610997578063c6ba0936146109b7578063c8564c62146109cc57600080fd5b8063ad3018f011610164578063b95717211161013e578063b957172114610917578063be35d3bd14610937578063c05c5e9414610957578063c415b95c1461097757600080fd5b8063ad3018f0146108a2578063ad3cb1cc146108d0578063b5d0c4c71461090157600080fd5b8063a20baee6116101a0578063a20baee61461080a578063a3f4df7e14610826578063a4e59ac81461086c578063a7a488841461088c57600080fd5b806395fb16bb146107aa5780639b56d6c9146107ca5780639e86d0c4146107ea57600080fd5b80636a85d67d116102a05780637f7dde4a1161023e57806386da08241161021857806386da0824146106b55780638b8fbd92146107375780638da5cb5b1461074d5780638e9171b01461078a57600080fd5b80637f7dde4a146106485780638129fc1c1461066857806382e0a5741461067d57600080fd5b8063741bef1a1161027a578063741bef1a1461058b57806376671808146105ab57806377553ad4146105ea5780637ee4196b1461060a57600080fd5b80636a85d67d146105365780636aebb1ab14610556578063715018a61461057657600080fd5b80633cc742251161030d5780634f1ef286116102e75780634f1ef286146104ce57806352ce8272146104e157806352d1902d1461050157806355dafa461461051657600080fd5b80633cc742251461046e5780634bc66f321461048e5780634e8338eb146104ae57600080fd5b80630d9a6b35116103495780630d9a6b35146103ef5780631091da891461040e578063121f2b261461042e57806327d04b351461044e57600080fd5b806301c9310014610370578063048c661d146103925780630a34d4d6146103cf575b600080fd5b34801561037c57600080fd5b5061039061038b366004613894565b610b62565b005b34801561039e57600080fd5b50600c546103b2906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156103db57600080fd5b506010546103b2906001600160a01b031681565b3480156103fb57600080fd5b506032545b6040519081526020016103c6565b34801561041a57600080fd5b506103906104293660046138b1565b610b8c565b34801561043a57600080fd5b50610400610449366004613894565b610c24565b34801561045a57600080fd5b50610400610469366004613894565b610c77565b34801561047a57600080fd5b506006546103b2906001600160a01b031681565b34801561049a57600080fd5b50600d546103b2906001600160a01b031681565b3480156104ba57600080fd5b506104006104c93660046138e9565b610d6f565b6103906104dc366004613969565b610d9c565b3480156104ed57600080fd5b506104006104fc366004613894565b610dbb565b34801561050d57600080fd5b50610400610e06565b34801561052257600080fd5b506009546103b2906001600160a01b031681565b34801561054257600080fd5b50610390610551366004613894565b610e23565b34801561056257600080fd5b50610390610571366004613a56565b610e4d565b34801561058257600080fd5b50610390610fb4565b34801561059757600080fd5b50600a546103b2906001600160a01b031681565b3480156105b757600080fd5b506038546105d290600160801b90046001600160801b031681565b6040516001600160801b0390911681526020016103c6565b3480156105f657600080fd5b506002546103b2906001600160a01b031681565b34801561061657600080fd5b50610400610625366004613abe565b603960209081526000938452604080852082529284528284209052825290205481565b34801561065457600080fd5b506000546103b2906001600160a01b031681565b34801561067457600080fd5b50610390610fc8565b34801561068957600080fd5b50610400610698366004613b03565b603a60209081526000928352604080842090915290825290205481565b3480156106c157600080fd5b506107086106d0366004613894565b6036602052600090815260409020600181015460028201546003909201549091906001600160801b0380821691600160801b90041684565b6040805194855260208501939093526001600160801b03918216928401929092521660608201526080016103c6565b34801561074357600080fd5b5061040060375481565b34801561075957600080fd5b507f9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300546001600160a01b03166103b2565b34801561079657600080fd5b506103906107a5366004613a56565b6110f6565b3480156107b657600080fd5b506004546103b2906001600160a01b031681565b3480156107d657600080fd5b506104006107e5366004613894565b611113565b3480156107f657600080fd5b50610400610805366004613894565b6111b0565b34801561081657600080fd5b50610400670de0b6b3a764000081565b34801561083257600080fd5b5061085f6040518060400160405280600d81526020016c14dd18589a5b1a5d1e541bdbdb609a1b81525081565b6040516103c69190613b5a565b34801561087857600080fd5b506038546105d2906001600160801b031681565b34801561089857600080fd5b50610400603d5481565b3480156108ae57600080fd5b506108c26108bd366004613bb1565b611257565b6040516103c6929190613cdb565b3480156108dc57600080fd5b5061085f604051806040016040528060058152602001640352e302e360dc1b81525081565b34801561090d57600080fd5b50610400603b5481565b34801561092357600080fd5b50610390610932366004613d00565b6112d0565b34801561094357600080fd5b50610400610952366004613d42565b61184a565b34801561096357600080fd5b506001546103b2906001600160a01b031681565b34801561098357600080fd5b506007546103b2906001600160a01b031681565b3480156109a357600080fd5b50600e546103b2906001600160a01b031681565b3480156109c357600080fd5b506108c261186b565b3480156109d857600080fd5b506010546109ed90600160a01b900460ff1681565b60405190151581526020016103c6565b348015610a0957600080fd5b50600b546103b2906001600160a01b031681565b348015610a2957600080fd5b506003546103b2906001600160a01b031681565b348015610a4957600080fd5b50610400633b9aca0081565b348015610a6157600080fd5b50610390610a70366004613d5b565b61192e565b348015610a8157600080fd5b50610390610a90366004613894565b611a7d565b348015610aa157600080fd5b50600f546103b2906001600160a01b031681565b348015610ac157600080fd5b50610390610ad0366004613894565b611b6d565b348015610ae157600080fd5b506005546103b2906001600160a01b031681565b348015610b0157600080fd5b50610400610b10366004613894565b60356020526000908152604090205481565b348015610b2e57600080fd5b50610390610b3d366004613894565b611bab565b348015610b4e57600080fd5b506008546103b2906001600160a01b031681565b610b6a611bb4565b600980546001600160a01b0319166001600160a01b0392909216919091179055565b600f546001600160a01b03163314610bd157600f546040516339bf765b60e01b81523360048201526001600160a01b0390911660248201526044015b60405180910390fd5b603254801580610bdf575083155b15610bea5750505050565b610bf2611c0f565b600080610c0185858886611ca6565b91509150610c10858383611e83565b610c1b8585886121dc565b5050505b505050565b6001600160a01b038116600090815260356020526040812054808203610c4d5750600092915050565b6001600160a01b0383166000908152603660205260409020610c70908290612320565b9392505050565b6000805460405163c5739d0b60e01b81526001600160a01b0384811660048301528392169063c5739d0b90602401602060405180830381865afa158015610cc2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ce69190613d87565b60065460405163c5739d0b60e01b81526001600160a01b0386811660048301529293506000929091169063c5739d0b906024015b602060405180830381865afa158015610d37573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5b9190613d87565b9050610d678183613db6565b949350505050565b6001600160a01b038083166000908152603660209081526040808320938516835292905220545b92915050565b610da4612410565b610dad826124b5565b610db782826124bd565b5050565b6001600160a01b038116600090815260356020526040812054808203610de45750600092915050565b6001600160a01b0383166000908152603660205260409020610d67828261257a565b6000610e10612668565b50600080516020613f8183398151915290565b610e2b611bb4565b600480546001600160a01b0319166001600160a01b0392909216919091179055565b610e556126b1565b610e5e836126fb565b33600090815260356020526040902054610e76611c0f565b600080610eb63386868080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525061125792505050565b915091506000610ec533610c24565b90506000610ed38286613dc9565b9050610ede3361275a565b610ee83389612827565b6000610ef48984613db6565b9050610f0033826128e3565b60405181815233907fbce78369dccab09eec1986f4d409ab09ffbb47d65423e5148fcf98411c5111c99060200160405180910390a2336001600160a01b03167ff20651f7c9cd4e1c112f77cbf2a13a44f79d4165dd781c41b52052bfc888174a868685604051610f7293929190613ddc565b60405180910390a2610f85338686612b8b565b505050505050610c1f60017f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f0055565b610fbc611bb4565b610fc66000612d5b565b565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff1660008115801561100e5750825b905060008267ffffffffffffffff16600114801561102b5750303b155b905081158015611039575080155b156110575760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561108157845460ff60401b1916600160401b1785555b3361108b81612dcc565b611093612ddd565b61109b612ded565b50670de0b6b3a764000060375583156110ef57845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2906020015b60405180910390a15b5050505050565b600080611104858585612df5565b915091506110ef338383612b8b565b60015460405163b31610db60e01b81526001600160a01b038381166004830152600092839291169063b31610db90602401602060405180830381865afa158015611161573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111859190613d87565b90506033600101818154811061119d5761119d613e12565b9060005260206000200154915050919050565b60008054604051635373433f60e01b81526001600160a01b03848116600483015283921690635373433f90602401602060405180830381865afa1580156111fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061121f9190613d87565b600654604051635373433f60e01b81526001600160a01b03868116600483015292935060009290911690635373433f90602401610d1a565b6001600160a01b03821660009081526035602052604081205460609182919081900361129c5750506040805160008082526020820190815281830190925291506112c9565b6001600160a01b0385166000908152603660205260408120906112c0838388612f38565b86955093505050505b9250929050565b6112d8611bb4565b601054600160a01b900460ff16156113325760405162461bcd60e51b815260206004820152601c60248201527f536574757020697320616c726561647920696e697469616c697a6564000000006044820152606401610bc8565b600f81146113825760405162461bcd60e51b815260206004820152601e60248201527f45787065637465642031352061646472657373657320617420736574757000006044820152606401610bc8565b60005b600f8110156114075760008383838181106113a2576113a2613e12565b90506020020160208101906113b79190613894565b6001600160a01b0316036113ff5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b6044820152606401610bc8565b600101611385565b508181600081811061141b5761141b613e12565b90506020020160208101906114309190613894565b600080546001600160a01b0319166001600160a01b03929092169190911790558181600181811061146357611463613e12565b90506020020160208101906114789190613894565b600180546001600160a01b0319166001600160a01b0392909216919091179055818160028181106114ab576114ab613e12565b90506020020160208101906114c09190613894565b600280546001600160a01b0319166001600160a01b0392909216919091179055818160038181106114f3576114f3613e12565b90506020020160208101906115089190613894565b600380546001600160a01b0319166001600160a01b03929092169190911790558181600481811061153b5761153b613e12565b90506020020160208101906115509190613894565b600580546001600160a01b0319166001600160a01b03929092169190911781558290829081811061158357611583613e12565b90506020020160208101906115989190613894565b600680546001600160a01b0319166001600160a01b0392909216919091178155829082908181106115cb576115cb613e12565b90506020020160208101906115e09190613894565b600780546001600160a01b0319166001600160a01b03929092169190911781558290829081811061161357611613613e12565b90506020020160208101906116289190613894565b600880546001600160a01b0319166001600160a01b03929092169190911781558290829081811061165b5761165b613e12565b90506020020160208101906116709190613894565b600a80546001600160a01b0319166001600160a01b0392909216919091179055818160098181106116a3576116a3613e12565b90506020020160208101906116b89190613894565b600b80546001600160a01b0319166001600160a01b03929092169190911790558181600a8181106116eb576116eb613e12565b90506020020160208101906117009190613894565b600c80546001600160a01b0319166001600160a01b03929092169190911790558181600b81811061173357611733613e12565b90506020020160208101906117489190613894565b600d80546001600160a01b0319166001600160a01b03929092169190911790558181600c81811061177b5761177b613e12565b90506020020160208101906117909190613894565b600e80546001600160a01b0319166001600160a01b03929092169190911790558181600d8181106117c3576117c3613e12565b90506020020160208101906117d89190613894565b600f80546001600160a01b0319166001600160a01b03929092169190911790558181600e81811061180b5761180b613e12565b90506020020160208101906118209190613894565b601080546001600160a81b0319166001600160a01b039290921691909117600160a01b1790555050565b603c818154811061185a57600080fd5b600091825260209091200154905081565b60608060336000016033600101818054806020026020016040519081016040528092919081815260200182805480156118cd57602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116118af575b505050505091508080548060200260200160405190810160405280929190818152602001828054801561191f57602002820191906000526020600020905b81548152602001906001019080831161190b575b50505050509050915091509091565b6000546001600160a01b0316331461196e57600054604051633eafff5160e11b81523360048201526001600160a01b039091166024820152604401610bc8565b60015460405163b31610db60e01b81526001600160a01b038481166004830152600092169063b31610db90602401602060405180830381865afa1580156119b9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119dd9190613d87565b9050600082603360010183815481106119f8576119f8613e12565b9060005260206000200154611a0d9190613db6565b90508060336001018381548110611a2657611a26613e12565b60009182526020918290200191909155604080516001600160a01b03871681529182018390527fb36e395f001a695c24ce43be3fb7c2338a2e794c691d5665d2f7847cc231a4b5910160405180910390a150505050565b6001546001600160a01b03163314611abd57600154604051632abcdbcb60e21b81523360048201526001600160a01b039091166024820152604401610bc8565b603c8054600180820190925560007fc6bb06cb7f92603de181bf256cd16846b93b752a170ff24824098b31aa008a7e909101819055603380548084019091557f82a75bdeeae8604d839476ae9efd8b0e15aa447e21bfd7f41283bb54e22c9a820180546001600160a01b0319166001600160a01b03949094169390931790925560348054918201815582527f46bddb1178e94d7f2892ff5f366840eb658911794f2c3a44c450aa2c505186c10155565b611b75611bb4565b6001600160a01b038116611b9f57604051631e4fbdf760e01b815260006004820152602401610bc8565b611ba881612d5b565b50565b611ba8816124b5565b33611be67f9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300546001600160a01b031690565b6001600160a01b031614610fc65760405163118cdaa760e01b8152336004820152602401610bc8565b6004546001600160a01b031615610fc6576000600460009054906101000a90046001600160a01b03166001600160a01b031663234209eb6040518163ffffffff1660e01b81526004016020604051808303816000875af1158015611c77573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9b9190613d87565b9050611ba88161305a565b60015460405163b31610db60e01b81526001600160a01b038681166004830152600092839283929091169063b31610db90602401602060405180830381865afa158015611cf7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d1b9190613d87565b90506000603c8281548110611d3257611d32613e12565b9060005260206000200154670de0b6b3a764000088611d519190613e28565b611d5b9190613db6565b905084861115611dc65760405162461bcd60e51b815260206004820152603060248201527f53746162696c697479506f6f6c3a2044656274206973206c617267657220746860448201526f616e20746f74616c4465706f7369747360801b6064820152608401610bc8565b848603611de2576000603d55670de0b6b3a76400009250611e37565b603d54600090611dfa670de0b6b3a764000089613e28565b611e049190613dc9565b9050611e108682613e3f565b611e1b906001613db6565b935080611e288786613e28565b611e329190613dc9565b603d55505b611e418582613e3f565b9350611e4d8585613e28565b611e579082613dc9565b603c8381548110611e6a57611e6a613e12565b9060005260206000200181905550505094509492505050565b670de0b6b3a7640000811115611edb5760405162461bcd60e51b815260206004820152601760248201527f53746162696c697479506f6f6c3a204c6f7373203c20310000000000000000006044820152606401610bc8565b603754600080611ef384670de0b6b3a7640000613dc9565b6038546001600160a01b03881660009081526039602090815260408083206001600160801b03600160801b86048116808652918452828520951680855294909252822054939450919290611f47878a613e28565b90506000611f558284613db6565b6001600160a01b038c1660008181526039602090815260408083206001600160801b038a8116808652918452828520908c1680865290845293829020869055815194855291840185905283015260608201529091507fe799d8213ffd47c58af0bad222f3f83a7bacf689130d897017d6c2cb9346e8cb9060800160405180910390a18560000361209257611fea600185613e61565b603880546001600160801b03908116600160801b918416918202179091556040519081529094507fb50f0f59e7cb5b421dc77581c3a9919e3806e076e5fa78a874c3f120cb7d874d9060200160405180910390a1603880546001600160801b0319169055604051600081527f1f9dfc70cd666adb18a39d60a797518f7b4febf4b6e24ef37d44f6e1e7219fbe9060200160405180910390a1670de0b6b3a76400009650612150565b600061209e878a613e28565b905060006120b4670de0b6b3a764000083613e3f565b9050633b9aca0081101561214957670de0b6b3a76400006120d9633b9aca0084613e28565b6120e39190613e3f565b98506120f0600188613e61565b603880546001600160801b0319166001600160801b0383169081179091556040519081529097507f1f9dfc70cd666adb18a39d60a797518f7b4febf4b6e24ef37d44f6e1e7219fbe9060200160405180910390a161214d565b8098505b50505b866000036121975760405162461bcd60e51b8152602060048201526014602482015273053746162696c697479506f6f6c3a2050203d20360641b6044820152606401610bc8565b60378790556040518781527fc1a9618cb59ebca77cbdbc2949f126823c407ff13edb285fd0262519a9c18e8c9060200160405180910390a15050505050505050505050565b600054604051632fb9ba3160e01b81526001600160a01b0385811660048301526024820184905290911690632fb9ba3190604401600060405180830381600087803b15801561222a57600080fd5b505af115801561223e573d6000803e3d6000fd5b5050505061224b81613149565b600554604051632770a7eb60e21b8152306004820152602481018390526001600160a01b0390911690639dc29fac90604401600060405180830381600087803b15801561229757600080fd5b505af11580156122ab573d6000803e3d6000fd5b50506000546040516347878f1560e01b81526001600160a01b0387811660048301523060248301526044820187905290911692506347878f159150606401600060405180830381600087803b15801561230357600080fd5b505af1158015612317573d6000803e3d6000fd5b50505050505050565b60018101546003820154603854600092916001600160801b0380821692600160801b9283900482169290041681101561235f5760009350505050610d96565b603854600090819061237b9085906001600160801b0316613e88565b9050806001600160801b03166000036123ae57846037548961239d9190613e28565b6123a79190613e3f565b91506123e2565b806001600160801b03166001036123dd57633b9aca00856037548a6123d39190613e28565b61239d9190613e3f565b600091505b6123f0633b9aca0089613e3f565b82101561240557600095505050505050610d96565b509695505050505050565b306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148061249757507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661248b600080516020613f81833981519152546001600160a01b031690565b6001600160a01b031614155b15610fc65760405163703e46dd60e11b815260040160405180910390fd5b611ba8611bb4565b816001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612517575060408051601f3d908101601f1916820190925261251491810190613d87565b60015b61253f57604051634c9c8ce360e01b81526001600160a01b0383166004820152602401610bc8565b600080516020613f81833981519152811461257057604051632a87526960e21b815260048101829052602401610bc8565b610c1f8383613198565b6003810154600282015460018301546001600160801b03600160801b840481166000818152603a602090815260408083209490971680835293905294852054909391929085906125cb908490613dc9565b6001600160801b0386166000908152603a6020526040812091925090633b9aca0090826125f9886001613e61565b6001600160801b03166001600160801b03168152602001908152602001600020546126249190613e3f565b90506000670de0b6b3a76400008461263c8486613db6565b612646908d613e28565b6126509190613e3f565b61265a9190613e3f565b9a9950505050505050505050565b306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610fc65760405163703e46dd60e11b815260040160405180910390fd5b7f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f008054600119016126f557604051633ee5aeb560e01b815260040160405180910390fd5b60029055565b80600003611ba85760405162461bcd60e51b815260206004820152602660248201527f53746162696c697479506f6f6c3a20416d6f756e74206d757374206265206e6f6044820152656e2d7a65726f60d01b6064820152608401610bc8565b6004546001600160a01b031615611ba857600061277682610dbb565b60048054604051630227f7bb60e61b81526001600160a01b03868116938201939093526024810184905292935016906389fdeec090604401600060405180830381600087803b1580156127c857600080fd5b505af11580156127dc573d6000803e3d6000fd5b50505050816001600160a01b03167f60243fd2e9882f8d26aa92149ed8254e5ebfd16b84a891bb88168b1adebda9568260405161281b91815260200190565b60405180910390a25050565b600554604051632ee65eeb60e21b81526001600160a01b038481166004830152306024830152604482018490529091169063bb997bac90606401600060405180830381600087803b15801561287b57600080fd5b505af115801561288f573d6000803e3d6000fd5b505050506000816032546128a39190613db6565b60328190556040518181529091507f8c9268469ff6265448f46f8119962e815f393b25b87bb55bda5e709a412b85d79060200160405180910390a1505050565b6001600160a01b038083166000908152603560205260408082208490556001548151634eb5750560e11b8152915192931691639d6aea0a9160048082019286929091908290030181865afa15801561293f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526129679190810190613ea8565b80516001600160a01b0385166000908152603660205260408120929350909190849003612a575760005b828110156129f3576001600160a01b0386166000908152603660205260408120855182908790859081106129c7576129c7613e12565b6020908102919091018101516001600160a01b0316825281019190915260400160002055600101612991565b5060006001820181905560028201819055600382018190556040805182815260208101929092526001600160a01b038716917fc48943df4095f4f20d171fd2872eafdc0eed4d9014ac3672f3bde7fd425449d5910160405180910390a25050505050565b6038546037546001600160801b0380831692600160801b9004169060005b85811015612af4576000878281518110612a9157612a91613e12565b6020908102919091018101516001600160a01b0390811660008181526039845260408082206001600160801b03808b168452908652818320908b168352855280822054938f16825260368552808220928252919093529091205550600101612a75565b506001600160801b038281166000818152603a6020908152604080832094881680845294825291829020546001890186905560028901819055600160801b9093029093176003880155805184815292830182905290916001600160a01b038b16917fc48943df4095f4f20d171fd2872eafdc0eed4d9014ac3672f3bde7fd425449d5910160405180910390a2505050505050505050565b815181518114612bdd5760405162461bcd60e51b815260206004820152601e60248201527f53746162696c697479506f6f6c3a204c656e677468206d69736d6174636800006044820152606401610bc8565b60005b81811015612c5d576000838281518110612bfc57612bfc613e12565b6020026020010151905080600003612c175750600101612be0565b6000858381518110612c2b57612c2b613e12565b60200260200101519050612c538783836001600160a01b03166131ee9092919063ffffffff16565b5050600101612be0565b506040805160338054606060208202840181018552938301818152612d219484928491840182828015612cb957602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311612c9b575b5050505050815260200160018201805480602002602001604051908101604052809291908181526020018280548015612d1157602002820191906000526020600020905b815481526020019060010190808311612cfd575b5050505050815250508484613240565b80516110ef9160349160209091019061381f565b60017f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f0055565b7f9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c19930080546001600160a01b031981166001600160a01b03848116918217845560405192169182907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3505050565b612dd461331a565b611ba881613363565b612de561331a565b610fc661336b565b610fc661331a565b336000908152603560205260409020546060908190612e1381613373565b612e1b611c0f565b612e583386868080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525061125792505050565b90935091506000612e6833610c24565b90506000612e7688836133dc565b90506000612e848385613dc9565b9050612e8f3361275a565b612e9933836133f2565b6000612ea58385613dc9565b9050612eb133826128e3565b60405181815233907fbce78369dccab09eec1986f4d409ab09ffbb47d65423e5148fcf98411c5111c99060200160405180910390a2336001600160a01b03167ff20651f7c9cd4e1c112f77cbf2a13a44f79d4165dd781c41b52052bfc888174a888885604051612f2393929190613ddc565b60405180910390a25050505050935093915050565b805160609060015b81811015612fb757836001820381518110612f5d57612f5d613e12565b60200260200101516001600160a01b0316848281518110612f8057612f80613e12565b60200260200101516001600160a01b031611612faf57604051637243bc1760e11b815260040160405180910390fd5b600101612f40565b508067ffffffffffffffff811115612fd157612fd1613922565b604051908082528060200260200182016040528015612ffa578160200160208202803683370190505b50915060005b818110156130515761302c868686848151811061301f5761301f613e12565b6020026020010151613473565b83828151811061303e5761303e613e12565b6020908102919091010152600101613000565b50509392505050565b603254801580613068575081155b15613071575050565b600061307d838361353f565b905060006037548261308f9190613e28565b6038546001600160801b03600160801b820481166000908152603a602090815260408083209390941682529190915220549091506130cd8282613db6565b603880546001600160801b03600160801b80830482166000908152603a60209081526040808320958516835294815290849020869055935483518681529181048316948201949094529216908201529091507f2d6127771b164a9cc8827d24b5955db2a77e7a81dac389107ebb8bce9fb64968906060016110e6565b6000816032546131599190613dc9565b60328190556040518181529091507f8c9268469ff6265448f46f8119962e815f393b25b87bb55bda5e709a412b85d79060200160405180910390a15050565b6131a182613592565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a28051156131e657610c1f82826135f7565b610db761366d565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663a9059cbb60e01b179052610c1f90849061368c565b60208301515182516060919060005b8281101561330a5760005b828110156133015786818151811061327457613274613e12565b60200260200101516001600160a01b03168860000151838151811061329b5761329b613e12565b60200260200101516001600160a01b0316036132f9578581815181106132c3576132c3613e12565b6020026020010151886020015183815181106132e1576132e1613e12565b602002602001018181516132f59190613dc9565b9052505b60010161325a565b5060010161324f565b5050506020909301519392505050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a0054600160401b900460ff16610fc657604051631afcd79f60e31b815260040160405180910390fd5b611b7561331a565b612d3561331a565b80600003611ba85760405162461bcd60e51b815260206004820152603060248201527f53746162696c697479506f6f6c3a2055736572206d757374206861766520612060448201526f1b9bdb8b5e995c9bc819195c1bdcda5d60821b6064820152608401610bc8565b60008183106133eb5781610c70565b5090919050565b806000036133fe575050565b600554604051631062c15f60e11b81523060048201526001600160a01b03848116602483015260448201849052909116906320c582be90606401600060405180830381600087803b15801561345257600080fd5b505af1158015613466573d6000803e3d6000fd5b50505050610db781613149565b6001600160a01b0381166000908152602083815260408083205460018601546039845282852060038801546001600160801b03600160801b82048116885291865284872091168652938490529184205490929084906134d3908590613dc9565b6003880154909150600090633b9aca0090849083906134fc906001600160801b03166001613e61565b6001600160801b03166001600160801b03168152602001908152602001600020546135279190613e3f565b90506000670de0b6b3a76400008561263c8486613db6565b600080603b54670de0b6b3a7640000856135599190613e28565b6135639190613db6565b905060006135718483613e3f565b905061357d8482613e28565b6135879083613dc9565b603b55949350505050565b806001600160a01b03163b6000036135c857604051634c9c8ce360e01b81526001600160a01b0382166004820152602401610bc8565b600080516020613f8183398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080846001600160a01b0316846040516136149190613f42565b600060405180830381855af49150503d806000811461364f576040519150601f19603f3d011682016040523d82523d6000602084013e613654565b606091505b50915091506136648583836136ef565b95945050505050565b3415610fc65760405163b398979f60e01b815260040160405180910390fd5b60006136a16001600160a01b0384168361374b565b905080516000141580156136c65750808060200190518101906136c49190613f5e565b155b15610c1f57604051635274afe760e01b81526001600160a01b0384166004820152602401610bc8565b606082613704576136ff82613759565b610c70565b815115801561371b57506001600160a01b0384163b155b1561374457604051639996b31560e01b81526001600160a01b0385166004820152602401610bc8565b5080610c70565b6060610c7083836000613782565b8051156137695780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6060814710156137a75760405163cd78605960e01b8152306004820152602401610bc8565b600080856001600160a01b031684866040516137c39190613f42565b60006040518083038185875af1925050503d8060008114613800576040519150601f19603f3d011682016040523d82523d6000602084013e613805565b606091505b50915091506138158683836136ef565b9695505050505050565b82805482825590600052602060002090810192821561385a579160200282015b8281111561385a57825182559160200191906001019061383f565b5061386692915061386a565b5090565b5b80821115613866576000815560010161386b565b6001600160a01b0381168114611ba857600080fd5b6000602082840312156138a657600080fd5b8135610c708161387f565b6000806000606084860312156138c657600080fd5b8335925060208401356138d88161387f565b929592945050506040919091013590565b600080604083850312156138fc57600080fd5b82356139078161387f565b915060208301356139178161387f565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561396157613961613922565b604052919050565b6000806040838503121561397c57600080fd5b82356139878161387f565b915060208381013567ffffffffffffffff808211156139a557600080fd5b818601915086601f8301126139b957600080fd5b8135818111156139cb576139cb613922565b6139dd601f8201601f19168501613938565b915080825287848285010111156139f357600080fd5b80848401858401376000848284010152508093505050509250929050565b60008083601f840112613a2357600080fd5b50813567ffffffffffffffff811115613a3b57600080fd5b6020830191508360208260051b85010111156112c957600080fd5b600080600060408486031215613a6b57600080fd5b83359250602084013567ffffffffffffffff811115613a8957600080fd5b613a9586828701613a11565b9497909650939450505050565b80356001600160801b0381168114613ab957600080fd5b919050565b600080600060608486031215613ad357600080fd5b8335613ade8161387f565b9250613aec60208501613aa2565b9150613afa60408501613aa2565b90509250925092565b60008060408385031215613b1657600080fd5b613b1f83613aa2565b9150613b2d60208401613aa2565b90509250929050565b60005b83811015613b51578181015183820152602001613b39565b50506000910152565b6020815260008251806020840152613b79816040850160208701613b36565b601f01601f19169190910160400192915050565b600067ffffffffffffffff821115613ba757613ba7613922565b5060051b60200190565b60008060408385031215613bc457600080fd5b8235613bcf8161387f565b915060208381013567ffffffffffffffff811115613bec57600080fd5b8401601f81018613613bfd57600080fd5b8035613c10613c0b82613b8d565b613938565b81815260059190911b82018301908381019088831115613c2f57600080fd5b928401925b82841015613c56578335613c478161387f565b82529284019290840190613c34565b80955050505050509250929050565b60008151808452602080850194506020840160005b83811015613c9f5781516001600160a01b031687529582019590820190600101613c7a565b509495945050505050565b60008151808452602080850194506020840160005b83811015613c9f57815187529582019590820190600101613cbf565b604081526000613cee6040830185613c65565b82810360208401526136648185613caa565b60008060208385031215613d1357600080fd5b823567ffffffffffffffff811115613d2a57600080fd5b613d3685828601613a11565b90969095509350505050565b600060208284031215613d5457600080fd5b5035919050565b60008060408385031215613d6e57600080fd5b8235613d798161387f565b946020939093013593505050565b600060208284031215613d9957600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610d9657610d96613da0565b81810381811115610d9657610d96613da0565b606081526000613def6060830186613c65565b8281036020840152613e018186613caa565b915050826040830152949350505050565b634e487b7160e01b600052603260045260246000fd5b8082028115828204841417610d9657610d96613da0565b600082613e5c57634e487b7160e01b600052601260045260246000fd5b500490565b6001600160801b03818116838216019080821115613e8157613e81613da0565b5092915050565b6001600160801b03828116828216039080821115613e8157613e81613da0565b60006020808385031215613ebb57600080fd5b825167ffffffffffffffff811115613ed257600080fd5b8301601f81018513613ee357600080fd5b8051613ef1613c0b82613b8d565b81815260059190911b82018301908381019087831115613f1057600080fd5b928401925b82841015613f37578351613f288161387f565b82529284019290840190613f15565b979650505050505050565b60008251613f54818460208701613b36565b9190910192915050565b600060208284031215613f7057600080fd5b81518015158114610c7057600080fdfe360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbca164736f6c6343000817000a",
  "devdoc": {
    "details": "When a trenBox is liquidated, then depending on system conditions, some of its debt tokens debt gets offset with debt tokens in the Stability Pool: that is, the offset debt evaporates, and an equal amount of debt tokens tokens in the Stability Pool is burned. Thus, a liquidation causes each depositor to receive a debt tokens loss, in proportion to their deposit as a share of total deposits. They also receive an Collateral gain, as the amount of collateral of the liquidated trenBox is distributed among Stability depositors, in the same proportion. When a liquidation occurs, it depletes every deposit by the same fraction: for example, a liquidation that depletes 40% of the total debt tokens in the Stability Pool, depletes 40% of each deposit. A deposit that has experienced a series of liquidations is termed a \"compounded deposit\": each liquidation depletes the deposit, multiplying it by some factor in range ]0,1[ --- IMPLEMENTATION --- We use a highly scalable method of tracking deposits and Collateral gains that has O(1) complexity. When a liquidation occurs, rather than updating each depositor's deposit and Collateral gain, we simply update two state variables: a product P, and a sum S. These are kept track for each type of collateral. A mathematical manipulation allows us to factor out the initial deposit, and accurately track all depositors' compounded deposits and accumulated Collateral amount gains over time, as liquidations occur, using just these two variables P and S. When depositors join the Stability Pool, they get a snapshot of the latest P and S: P_t and S_t, respectively. The formula for a depositor's accumulated Collateral amount gain is derived here: https://github.com/liquity/dev/blob/main/papers/Scalable_Reward_Distribution_with_Compounding_Stakes.pdf For a given deposit d_t, the ratio P/P_t tells us the factor by which a deposit has decreased since it joined the Stability Pool, and the term d_t * (S - S_t)/P_t gives us the deposit's total accumulated Collateral amount gain. Each liquidation updates the product P and sum S. After a series of liquidations, a compounded deposit and corresponding Collateral amount gain can be calculated using the initial deposit, the depositor’s snapshots of P and S, and the latest values of P and S. Any time a depositor updates their deposit (withdrawal, top-up) their accumulated Collateral amount gain is paid out, their new deposit is recorded (based on their latest compounded deposit and modified by the withdrawal/top-up), and they receive new snapshots of the latest P and S. Essentially, they make a fresh deposit that overwrites the old one. --- SCALE FACTOR --- Since P is a running product in range ]0,1] that is always-decreasing, it should never reach 0 when multiplied by a number in range ]0,1[. Unfortunately, Solidity floor division always reaches 0, sooner or later. A series of liquidations that nearly empty the Pool (and thus each multiply P by a very small number in range ]0,1[ ) may push P to its 18 digit decimal limit, and round it to 0, when in fact the Pool hasn't been emptied: this would break deposit tracking. So, to track P accurately, we use a scale factor: if a liquidation would cause P to decrease to <1e-9 (and be rounded to 0 by Solidity), we first multiply P by 1e9, and increment a currentScale factor by 1. The added benefit of using 1e9 for the scale factor (rather than 1e18) is that it ensures negligible precision loss close to the scale boundary: when P is at its minimum value of 1e9, the relative precision loss in P due to floor division is only on the order of 1e-9. --- EPOCHS --- Whenever a liquidation fully empties the Stability Pool, all deposits should become 0. However, setting P to 0 would make P be 0 forever, and break all future reward calculations. So, every time the Stability Pool is emptied by a liquidation, we reset P = 1 and currentScale = 0, and increment the currentEpoch by 1. --- TRACKING DEPOSIT OVER SCALE CHANGES AND EPOCHS --- When a deposit is made, it gets snapshots of the currentEpoch and the currentScale. When calculating a compounded deposit, we compare the current epoch to the deposit's epoch snapshot. If the current epoch is newer, then the deposit was present during a pool-emptying liquidation, and necessarily has been depleted to 0. Otherwise, we then compare the current scale to the deposit's scale snapshot. If they're equal, the compounded deposit is given by d_t * P/P_t. If it spans one scale change, it is given by d_t * P/(P_t * 1e9). If it spans more than one scale change, we define the compounded deposit as 0, since it is now less than 1e-9'th of its initial value (e.g. a deposit of 1 billion debt tokens has depleted to < 1 debt token).  --- TRACKING DEPOSITOR'S COLLATERAL AMOUNT GAIN OVER SCALE CHANGES AND EPOCHS --- In the current epoch, the latest value of S is stored upon each scale change, and the mapping (scale -> S) is stored for each epoch. This allows us to calculate a deposit's accumulated Collateral amount gain, during the epoch in which the deposit was non-zero and earned Collateral amount. We calculate the depositor's accumulated Collateral amount gain for the scale at which they made the deposit, using the Collateral amount gain formula: e_1 = d_t * (S - S_t) / P_t and also for scale after, taking care to divide the latter by a factor of 1e9: e_2 = d_t * S / (P_t * 1e9) The gain in the second scale will be full, as the starting point was in the previous scale, thus no need to subtract anything. The deposit therefore was present for reward events from the beginning of that second scale.        S_i-S_t + S_{i+1}      .<--------.------------>      .         .      . S_i     .   S_{i+1}   <--.-------->.<----------->   S_t.         .   <->.         .      t         .  |---+---------|-------------|-----...         i            i+1 The sum of (e_1 + e_2) captures the depositor's total accumulated Collateral amount gain, handling the case where their deposit spanned one scale change. We only care about gains across one scale change, since the compounded deposit is defined as being 0 once it has spanned more than one scale change. --- UPDATING P WHEN A LIQUIDATION OCCURS --- Please see the implementation spec in the proof document, which closely follows on from the compounded deposit / Collateral amount gain derivations: https://github.com/liquity/liquity/blob/master/papers/Scalable_Reward_Distribution_with_Compounding_Stakes.pdf --- Gravita ISSUANCE TO STABILITY POOL DEPOSITORS --- An Gravita issuance event occurs at every deposit operation, and every liquidation. All deposits earn a share of the issued Gravita in proportion to the deposit as a share of total deposits. Please see the system Readme for an overview: https://github.com/liquity/dev/blob/main/README.md#lqty-issuance-to-stability-providers We use the same mathematical product-sum approach to track Gravita gains for depositors, where 'G' is the sum corresponding to Gravita gains. The product P (and snapshot P_t) is re-used, as the ratio P/P_t tracks a deposit's depletion due to liquidations.",
    "errors": {
      "AddressEmptyCode(address)": [
        {
          "details": "There's no code at `target` (it is not a contract)."
        }
      ],
      "AddressInsufficientBalance(address)": [
        {
          "details": "The ETH balance of the account is not enough to perform the operation."
        }
      ],
      "ERC1967InvalidImplementation(address)": [
        {
          "details": "The `implementation` of the proxy is invalid."
        }
      ],
      "ERC1967NonPayable()": [
        {
          "details": "An upgrade function sees `msg.value > 0` that may be lost."
        }
      ],
      "FailedInnerCall()": [
        {
          "details": "A call to an address target failed. The target may have reverted."
        }
      ],
      "InvalidInitialization()": [
        {
          "details": "The contract is already initialized."
        }
      ],
      "NotInitializing()": [
        {
          "details": "The contract is not initializing."
        }
      ],
      "OwnableInvalidOwner(address)": [
        {
          "details": "The owner is not a valid owner account. (eg. `address(0)`)"
        }
      ],
      "OwnableUnauthorizedAccount(address)": [
        {
          "details": "The caller account is not authorized to perform an operation."
        }
      ],
      "ReentrancyGuardReentrantCall()": [
        {
          "details": "Unauthorized reentrant call."
        }
      ],
      "SafeERC20FailedOperation(address)": [
        {
          "details": "An operation with an ERC20 token failed."
        }
      ],
      "UUPSUnauthorizedCallContext()": [
        {
          "details": "The call is from an unauthorized context."
        }
      ],
      "UUPSUnsupportedProxiableUUID(bytes32)": [
        {
          "details": "The storage `slot` is unsupported as a UUID."
        }
      ]
    },
    "events": {
      "Initialized(uint64)": {
        "details": "Triggered when the contract has been initialized or reinitialized."
      },
      "Upgraded(address)": {
        "details": "Emitted when the implementation is upgraded."
      }
    },
    "kind": "dev",
    "methods": {
      "addCollateralType(address)": {
        "details": "should be called anytime a collateral is added to controller keeps all arrays the correct length",
        "params": {
          "_collateral": "address of collateral to add"
        }
      },
      "getAllCollateral()": {
        "details": "gets collateral from totalColl This is not necessarily the contract's actual collateral balance; just what is stored in state",
        "returns": {
          "_0": "tokens and amounts"
        }
      },
      "getCollateral(address)": {
        "details": "Not necessarily this contract's actual collateral balance; just what is stored in state",
        "params": {
          "_collateral": "address of the collateral to get amount of"
        },
        "returns": {
          "_0": "amount of this specific collateral"
        }
      },
      "getDepositorGains(address,address[])": {
        "details": "Given by the formula:  E = d0 * (S - S(0))/P(0) where S(0) and P(0) are the depositor's snapshots of the sum S and product P, respectively. d0 is the last recorded deposit value.",
        "params": {
          "_assets": "array of assets to check gains for",
          "_depositor": "address of depositor in question"
        },
        "returns": {
          "_0": "assets, amounts"
        }
      },
      "getTotalDebtTokenDeposits()": {
        "details": "gets total debtToken from deposits",
        "returns": {
          "_0": "totalDebtTokenDeposits"
        }
      },
      "offset(uint256,address,uint256)": {
        "details": "Cancels out the specified debt against the debtTokens contained in the Stability Pool (as far as possible) and transfers the TrenBox's collateral from ActivePool to StabilityPool. Only called by liquidation functions in the TrenBoxManager.",
        "params": {
          "_amountAdded": "token amount as uint256",
          "_asset": "token address",
          "_debtToOffset": "how much debt to offset"
        }
      },
      "owner()": {
        "details": "Returns the address of the current owner."
      },
      "provideToSP(uint256,address[])": {
        "details": "Triggers a TREN issuance, based on time passed since the last issuance. The TREN issuance is shared between *all* depositors - Sends depositor's accumulated gains (TREN, collateral assets) to depositor - Increases deposit stake, and takes new snapshots for each.",
        "params": {
          "_amount": "amount of debtToken provided",
          "_assets": "an array of collaterals to be claimed. Skipping a collateral forfeits the available rewards (can be useful for gas optimizations)"
        }
      },
      "proxiableUUID()": {
        "details": "Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the implementation. It is used to validate the implementation's compatibility when performing an upgrade. IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier."
      },
      "renounceOwnership()": {
        "details": "Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."
      },
      "transferOwnership(address)": {
        "details": "Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."
      },
      "upgradeToAndCall(address,bytes)": {
        "custom:oz-upgrades-unsafe-allow-reachable": "delegatecall",
        "details": "Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call encoded in `data`. Calls {_authorizeUpgrade}. Emits an {Upgraded} event."
      },
      "withdrawFromSP(uint256,address[])": {
        "params": {
          "_amount": "amount of debtToken to withdraw",
          "_assets": "an array of collaterals to be claimed."
        }
      }
    },
    "title": "The Stability Pool holds debt tokens deposited by Stability Pool depositors.",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "addCollateralType(address)": {
        "notice": "add a collateral"
      },
      "getAllCollateral()": {
        "notice": "getter function"
      },
      "getCollateral(address)": {
        "notice": "get collateral balance in the SP for a given collateral type"
      },
      "getDepositorGains(address,address[])": {
        "notice": "Calculates the gains earned by the deposit since its last snapshots were taken for selected assets."
      },
      "getTotalDebtTokenDeposits()": {
        "notice": "getter function"
      },
      "offset(uint256,address,uint256)": {
        "notice": "sets the offset for liquidation"
      },
      "provideToSP(uint256,address[])": {
        "notice": "Used to provide debt tokens to the stability Pool"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 9891,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "activePool",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 9893,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "adminContract",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 9895,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "borrowerOperations",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 9897,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "collSurplusPool",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      },
      {
        "astId": 9899,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "communityIssuance",
        "offset": 0,
        "slot": "4",
        "type": "t_address"
      },
      {
        "astId": 9901,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "debtToken",
        "offset": 0,
        "slot": "5",
        "type": "t_address"
      },
      {
        "astId": 9903,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "defaultPool",
        "offset": 0,
        "slot": "6",
        "type": "t_address"
      },
      {
        "astId": 9905,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "feeCollector",
        "offset": 0,
        "slot": "7",
        "type": "t_address"
      },
      {
        "astId": 9907,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "gasPoolAddress",
        "offset": 0,
        "slot": "8",
        "type": "t_address"
      },
      {
        "astId": 9909,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "trenStaking",
        "offset": 0,
        "slot": "9",
        "type": "t_address"
      },
      {
        "astId": 9911,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "priceFeed",
        "offset": 0,
        "slot": "10",
        "type": "t_address"
      },
      {
        "astId": 9913,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "sortedTrenBoxes",
        "offset": 0,
        "slot": "11",
        "type": "t_address"
      },
      {
        "astId": 9915,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "stabilityPool",
        "offset": 0,
        "slot": "12",
        "type": "t_address"
      },
      {
        "astId": 9917,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "timelockAddress",
        "offset": 0,
        "slot": "13",
        "type": "t_address"
      },
      {
        "astId": 9919,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "treasuryAddress",
        "offset": 0,
        "slot": "14",
        "type": "t_address"
      },
      {
        "astId": 9921,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "trenBoxManager",
        "offset": 0,
        "slot": "15",
        "type": "t_address"
      },
      {
        "astId": 9923,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "trenBoxManagerOperations",
        "offset": 0,
        "slot": "16",
        "type": "t_address"
      },
      {
        "astId": 9925,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "isAddressSetupInitialized",
        "offset": 20,
        "slot": "16",
        "type": "t_bool"
      },
      {
        "astId": 9930,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "__gap",
        "offset": 0,
        "slot": "17",
        "type": "t_array(t_uint256)33_storage"
      },
      {
        "astId": 16563,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "totalDebtTokenDeposits",
        "offset": 0,
        "slot": "50",
        "type": "t_uint256"
      },
      {
        "astId": 16566,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "totalColl",
        "offset": 0,
        "slot": "51",
        "type": "t_struct(Colls)13212_storage"
      },
      {
        "astId": 16570,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "deposits",
        "offset": 0,
        "slot": "53",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 16575,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "depositSnapshots",
        "offset": 0,
        "slot": "54",
        "type": "t_mapping(t_address,t_struct(Snapshots)12914_storage)"
      },
      {
        "astId": 16577,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "P",
        "offset": 0,
        "slot": "55",
        "type": "t_uint256"
      },
      {
        "astId": 16582,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "currentScale",
        "offset": 0,
        "slot": "56",
        "type": "t_uint128"
      },
      {
        "astId": 16584,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "currentEpoch",
        "offset": 16,
        "slot": "56",
        "type": "t_uint128"
      },
      {
        "astId": 16592,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "epochToScaleToSum",
        "offset": 0,
        "slot": "57",
        "type": "t_mapping(t_address,t_mapping(t_uint128,t_mapping(t_uint128,t_uint256)))"
      },
      {
        "astId": 16598,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "epochToScaleToG",
        "offset": 0,
        "slot": "58",
        "type": "t_mapping(t_uint128,t_mapping(t_uint128,t_uint256))"
      },
      {
        "astId": 16600,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "lastTRENError",
        "offset": 0,
        "slot": "59",
        "type": "t_uint256"
      },
      {
        "astId": 16603,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "lastAssetError_Offset",
        "offset": 0,
        "slot": "60",
        "type": "t_array(t_uint256)dyn_storage"
      },
      {
        "astId": 16605,
        "contract": "contracts/StabilityPool.sol:StabilityPool",
        "label": "lastDebtTokenLossError_Offset",
        "offset": 0,
        "slot": "61",
        "type": "t_uint256"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_address)dyn_storage": {
        "base": "t_address",
        "encoding": "dynamic_array",
        "label": "address[]",
        "numberOfBytes": "32"
      },
      "t_array(t_uint256)33_storage": {
        "base": "t_uint256",
        "encoding": "inplace",
        "label": "uint256[33]",
        "numberOfBytes": "1056"
      },
      "t_array(t_uint256)dyn_storage": {
        "base": "t_uint256",
        "encoding": "dynamic_array",
        "label": "uint256[]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_mapping(t_address,t_mapping(t_uint128,t_mapping(t_uint128,t_uint256)))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(uint128 => mapping(uint128 => uint256)))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint128,t_mapping(t_uint128,t_uint256))"
      },
      "t_mapping(t_address,t_struct(Snapshots)12914_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct IStabilityPool.Snapshots)",
        "numberOfBytes": "32",
        "value": "t_struct(Snapshots)12914_storage"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_mapping(t_uint128,t_mapping(t_uint128,t_uint256))": {
        "encoding": "mapping",
        "key": "t_uint128",
        "label": "mapping(uint128 => mapping(uint128 => uint256))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint128,t_uint256)"
      },
      "t_mapping(t_uint128,t_uint256)": {
        "encoding": "mapping",
        "key": "t_uint128",
        "label": "mapping(uint128 => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_struct(Colls)13212_storage": {
        "encoding": "inplace",
        "label": "struct ITrenBase.Colls",
        "members": [
          {
            "astId": 13208,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "tokens",
            "offset": 0,
            "slot": "0",
            "type": "t_array(t_address)dyn_storage"
          },
          {
            "astId": 13211,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "amounts",
            "offset": 0,
            "slot": "1",
            "type": "t_array(t_uint256)dyn_storage"
          }
        ],
        "numberOfBytes": "64"
      },
      "t_struct(Snapshots)12914_storage": {
        "encoding": "inplace",
        "label": "struct IStabilityPool.Snapshots",
        "members": [
          {
            "astId": 12905,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "S",
            "offset": 0,
            "slot": "0",
            "type": "t_mapping(t_address,t_uint256)"
          },
          {
            "astId": 12907,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "P",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 12909,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "G",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 12911,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "scale",
            "offset": 0,
            "slot": "3",
            "type": "t_uint128"
          },
          {
            "astId": 12913,
            "contract": "contracts/StabilityPool.sol:StabilityPool",
            "label": "epoch",
            "offset": 16,
            "slot": "3",
            "type": "t_uint128"
          }
        ],
        "numberOfBytes": "128"
      },
      "t_uint128": {
        "encoding": "inplace",
        "label": "uint128",
        "numberOfBytes": "16"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}